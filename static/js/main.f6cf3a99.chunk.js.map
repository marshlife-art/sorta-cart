{"version":3,"sources":["theme.tsx","redux/preferences/actions.ts","components/UserMenu.tsx","services/useCartService.ts","appDatabase.ts","constants.ts","components/CartTable.tsx","components/CartDrawer.tsx","util/utilz.ts","components/DataTable.tsx","components/NavBar.tsx","components/Landing.tsx","redux/session/actions.ts","components/Login.tsx","components/Register.tsx","components/Checkout.tsx","App.tsx","redux/session/reducers.ts","redux/preferences/reducers.ts","redux/index.ts","index.tsx"],"names":["darkTheme","createMuiTheme","palette","type","primary","main","secondary","error","red","A400","lightTheme","DEFAULT_PREFERENCES","dark_mode","set","preferences","isFetching","StyledMenu","withStyles","paper","border","props","Menu","elevation","getContentAnchorEl","anchorOrigin","vertical","horizontal","transformOrigin","StyledMenuItem","theme","root","MenuItem","connect","states","preferencesService","dispatch","getPreferences","a","async","Promise","resolve","rject","localStorage","getItem","JSON","parse","setPreferences","setItem","stringify","withRouter","anchorEl","setAnchorEl","history","useState","useDarkTheme","setUseDarkTheme","useEffect","handleClose","id","keepMounted","open","Boolean","onClose","onClick","push","ListItemText","prev","style","display","justifyContent","alignItems","Switch","checked","undefined","value","inputProps","db","cart","version","stores","table","Dexie","useCartService","status","result","setResult","toArray","then","line_items","payload","catch","e","on","changes","find","change","console","log","getCartItemCount","count","warn","useCartItemCount","itemCount","setItemCount","addToCart","product","line_item","product_id","quantity","total","parseFloat","ws_price","selected_unit","add","removeItemFromCart","index","delete","emptyCart","clear","err","updateLineItem","update","API_HOST","TAX_RATE","TAX_RATE_STRING","toFixed","useStyles","makeStyles","createStyles","width","overflowX","height","maxWidth","padding","spacing","borderCollapse","qtyinput","usdFormat","num","liTotal","u_price","classes","checkout","summary","invoiceSubtotal","map","reduce","sum","i","invoiceTaxes","invoiceTotal","Paper","className","Table","aria-label","TableHead","TableRow","TableCell","align","TableBody","idx","key","Tooltip","title","IconButton","size","event","fontSize","name","description","pksize","pk","join","liPkSize","Select","onChange","unit","handleUnitChange","target","margin","unit_type","TextField","InputLabelProps","shrink","fullWidth","handleQtyChange","min","step","rowSpan","colSpan","length","TableFooter","emptyCartAndCloseDrawer","Button","variant","color","CartDrawer","setOpen","cartResult","Drawer","anchor","window","confirm","PROPERTY_MAP","c","d","f","g","k","l","m","og","r","v","w","ft","n","s","y","1","2","3","tableRef","createRef","cartDrawerOpen","setCartDrawerOpen","React","userMenuAnchorEl","setUserMenuAnchorEl","cartAction","icon","Badge","badgeContent","max","tooltip","isFreeAction","userAction","currentTarget","actions","setActions","fetch","response","json","setCategoryLookup","categoryLookup","setSubCategoryLookup","subCategoryLookup","catDefaultFilter","match","params","cat","subCatDefaultFilter","subcat","columns","field","lookup","filterPlaceholder","defaultFilter","editComponent","arg","filtering","render","row","CS","EA","codes","split","code","Chip","label","hidden","data","query","reject","method","headers","body","page","totalCount","Typography","options","headerStyle","position","top","filterCellStyle","maxBodyHeight","pageSize","pageSizeOptions","debounceInterval","search","emptyRowsWhenPaging","flexGrow","boxShadow","toolbar","backgroundColor","background","default","text","menuButton","marginLeft","grow","borderRadius","shape","fade","common","white","breakpoints","up","searchIcon","pointerEvents","inputRoot","inputInput","transition","transitions","create","showCart","AppBar","Toolbar","Fade","in","children","edge","gridRoot","minHeight","crumbz","flexDirection","gridBtn","textDecoration","cursor","catHover","catBtn","overflow","overflowWrap","hyphens","categories","setCategories","selectedCat","setSelectedCat","subCategories","setSubCategories","Object","keys","transitionDelay","toUpperCase","Grid","container","justify","Zoom","item","xs","sm","md","lg","subCat","user","setError","login","email","password","msg","token","reason","message","finally","form","marginTop","submit","ownProps","userService","session","showTitle","onLoginFn","role","Container","onSubmit","preventDefault","emailEl","elements","namedItem","passwordEl","autoFocus","required","disabled","Box","gutterBottom","textAlign","notice","marginBottom","formControl","onRegisterFn","helperText","FormControl","component","FormLabel","RadioGroup","FormControlLabel","control","Radio","FormHelperText","FormGroup","Checkbox","multiline","rowsMax","registrationStyles","opt","optItem","down","Registration","setOpt","setCanGoToNextStep","handleNext","backDisabled","handleBack","nextDisabled","nextText","onCanContinue","StepButtons","reviewStyles","infoContainer","ReviewCart","setEmail","phone","setPhone","setName","address","setAddress","notes","setNotes","direction","paymentStyles","paymentContainer","Payment","stepButtonsStyles","button","checkoutStyles","instructions","stepBtnz","finished","Checkout","activeStep","setActiveStep","canGoToNextStep","steps","prevActiveStep","Stepper","Step","StepLabel","ThemeProvider","CssBaseline","path","exact","DataTable","Landing","combineReducers","state","action","createStore","applyMiddleware","thunk","ReactDOM","store","document","querySelector"],"mappings":"sSAGMA,EAAYC,YAAe,CAC/BC,QAAS,CACPC,KAAM,OACNC,QAAS,CACPC,KAAM,WAERC,UAAW,CACTD,KAAM,WAERE,MAAO,CACLF,KAAMG,IAAIC,SAKVC,EAAaT,YAAe,CAChCC,QAAS,CACPC,KAAM,QACNC,QAAS,CACPC,KAAM,WAERC,UAAW,CACTD,KAAM,WAERE,MAAO,CACLF,KAAMG,IAAIC,S,0MCvBVE,EAAmC,CACvCC,UAAW,SAkBAC,EAAM,SAACC,GAClB,MAAO,CAAEX,KAAM,kBAAmBW,gBAKvBC,EAAa,SAACA,GACzB,MAAO,CAAEZ,KAAM,2BAA4BY,eCXvCC,EAAaC,YAAW,CAC5BC,MAAO,CACLC,OAAQ,sBAFOF,EAIhB,SAACG,GAAD,OACD,kBAACC,EAAA,EAAD,eACEC,UAAW,EACXC,mBAAoB,KACpBC,aAAc,CACZC,SAAU,SACVC,WAAY,UAEdC,gBAAiB,CACfF,SAAU,MACVC,WAAY,WAEVN,OAIFQ,EAAiBX,aAAW,SAAAY,GAAK,MAAK,CAC1CC,KAAM,MADeb,CASnBc,KA8GJ,IAgBeC,eAhBS,SAACC,GACvB,MAAO,CACLC,mBAAoBD,EAAOnB,YAAYoB,uBAIhB,SACzBC,GAEA,MAAO,CACLC,eAAgB,kBAAMD,GDjIjB,SAAOA,GAAP,SAAAE,EAAAC,OAAA,yEACE,IAAIC,SAAc,SAACC,EAASC,GACjCN,EAASpB,GAAW,IAEpB,IAAMD,EAAc4B,cAAgBA,aAAaC,QAAQ,eAIvDR,EAAStB,EAHNC,EAGU8B,KAAKC,MAAM/B,GAFXH,IAIfwB,EAASpB,GAAW,IACpByB,QAXG,yCCkILM,eAAgB,SAAChC,GAAD,OACdqB,EDnHwB,SAC5BrB,GAEA,OAAO,SAAOqB,GAAP,SAAAE,EAAAC,OAAA,yEACE,IAAIC,SAAc,SAACC,EAASC,GACjCN,EAASpB,GAAW,IAEfD,GAGH4B,cACEA,aAAaK,QAAQ,cAAeH,KAAKI,UAAUlC,IACrDqB,EAAStB,EAAIC,KAJbqB,EAAStB,EAAIF,IAMfwB,EAASpB,GAAW,IACpByB,QAZG,sCCgHMM,CAAehC,QAIfkB,CAGbiB,aAtHF,SAAkB7B,GAAc,IAG5B8B,EAME9B,EANF8B,SACAC,EAKE/B,EALF+B,YACAjB,EAIEd,EAJFc,mBACAE,EAGEhB,EAHFgB,eACAU,EAEE1B,EAFF0B,eACAM,EACEhC,EADFgC,QAR4B,EAWUC,mBAAyB,MAXnC,mBAWvBC,EAXuB,KAWTC,EAXS,KAa9BC,qBAAU,WACRpB,MACC,CAACA,IAEJoB,qBAAU,YACHtB,EAAmBnB,YAAcmB,EAAmBpB,aAClC,OAAjBwC,GACFC,EAC+C,SAA7CrB,EAAmBpB,YAAYF,aAKpC,CAACsB,IAEJsB,qBAAU,WAENtB,GACAA,EAAmBpB,aACF,OAAjBwC,GAC8C,SAA7CpB,EAAmBpB,YAAYF,YAC9B0C,GAEFR,EAAe,CAAElC,UAAW0C,EAAe,OAAS,YAGrD,CAACA,IAEJ,IAAMG,EAAc,WAClBN,EAAY,OAGd,OACE,oCACE,kBAACnC,EAAD,CACE0C,GAAG,aACHR,SAAUA,EACVS,aAAW,EACXC,KAAMC,QAAQX,GACdY,QAASL,GAET,kBAAC7B,EAAD,CACEmC,QAAS,WACPX,EAAQY,KAAK,UACbP,MAGF,kBAACQ,EAAA,EAAD,CAAc7D,QAAQ,aAGxB,kBAACwB,EAAD,CACEmC,QAAS,WACPX,EAAQY,KAAK,aACbP,MAGF,kBAACQ,EAAA,EAAD,CAAc7D,QAAQ,cAGxB,kBAACwB,EAAD,CAAgBmC,QAAS,kBAAMR,GAAgB,SAAAW,GAAI,OAAKA,OACtD,kBAACD,EAAA,EAAD,KACE,yBACEE,MAAO,CACLC,QAAS,OACTC,eAAgB,gBAChBC,WAAY,WAGd,4CACA,kBAACC,EAAA,EAAD,CACEC,QACmB,OAAjBlB,QAA0CmB,IAAjBnB,GAErBA,EAENoB,MAAM,eACNC,WAAY,CAAE,aAAc,iC,6DC9ItCC,G,OAAK,ICFX,YAGE,aAAe,IAAD,8BACZ,4CAAM,uBAHRC,UAEc,EAEZ,EAAKC,QAAQ,GAAGC,OAAO,CACrBF,KAAM,qBAER,EAAKA,KAAO,EAAKG,MAAM,QALX,EAHhB,2BAAiCC,ODI3BC,EAAiB,WAAO,IAAD,EACC7B,mBAAwB,CAClD8B,OAAQ,YAFiB,mBACpBC,EADoB,KACZC,EADY,KA8B3B,OA1BA7B,qBAAU,WACRoB,EAAGC,KACAS,UACAC,MAAK,SAAAC,GAAU,OACdH,EAAU,CAAEF,OAAQ,SAAUM,QAAS,CAAED,WAAYA,QAEtDE,OAAM,SAAAC,GAELN,EAAU,CAAEF,OAAQ,QAAS5E,MAAOoF,OAGxCf,EAAGgB,GAAG,WAAW,SAAAC,GACfA,EAAQC,MAAK,SAAAC,GAAM,MAAqB,SAAjBA,EAAOf,UAC5BJ,EAAGC,KACAS,UACAC,MAAK,SAAAC,GACJQ,QAAQC,IAAI,kCACZZ,EAAU,CAAEF,OAAQ,SAAUM,QAAS,CAAED,WAAYA,QAEtDE,OAAM,SAAAC,GAELN,EAAU,CAAEF,OAAQ,QAAS5E,MAAOoF,YAG3C,IAEIP,GAGHc,GAAmB,WACvB,OAAOtB,EAAGC,KAAKsB,QAAQT,OAAM,SAAAC,GAE3B,OADAK,QAAQI,KAAK,mCAAoCT,GAC1C,MAILU,GAAmB,WAAO,IAAD,EACKhD,mBAAS,GADd,mBACtBiD,EADsB,KACXC,EADW,KAY7B,OATA/C,qBAAU,WACR0C,KAAmBX,MAAK,SAAAY,GAAK,OAAII,EAAaJ,MAE9CvB,EAAGgB,GAAG,WAAW,SAAAC,GACfA,EAAQC,MAAK,SAAAC,GAAM,MAAqB,SAAjBA,EAAOf,UAC5BkB,KAAmBX,MAAK,SAAAY,GAAK,OAAII,EAAaJ,WAEjD,IAEIG,GAGHE,GAAY,SAACC,GACjB,IAAIC,EAAmB,eAClBD,EADkB,CAErBE,WAAYF,EAAQ/C,GACpBkD,SAAU,EACVC,MAAOC,WAAWL,EAAQM,UAC1BC,cAAe,cAEVN,EAAUhD,GAEjBkB,EAAGC,KACAoC,IAAIP,GACJhB,OAAM,SAAAnF,GAAK,OAAIyF,QAAQI,KAAK,4BAA6B7F,OAGxD2G,GAAqB,SAACC,GAC1BvC,EAAGC,KACAuC,OAAOD,GACPzB,OAAM,SAAAnF,GAAK,OAAIyF,QAAQI,KAAK,qCAAsC7F,OAGjE8G,GAAY,WAChBzC,EAAGC,KAAKyC,QAAQ5B,OAAM,SAAS6B,GAC7BvB,QAAQI,KAAK,4BAA6BmB,OAIxCC,GAAiB,SAACd,GACtB9B,EAAGC,KACA4C,OAAOf,EAAUhD,GAAIgD,GACrBhB,OAAM,SAAAnF,GAAK,OAAIyF,QAAQI,KAAK,iCAAkC7F,O,mIE1BtDmH,GAEP,4BAGOC,GAAW,OACXC,GAAe,WAAkB,IAAXD,IAAgBE,QAAQ,GAA/B,KC/CtBC,GAAYC,cAAW,SAAClG,GAAD,OAC3BmG,aAAa,CACXlG,KAAM,CACJmG,MAAO,OACPC,UAAW,OACXC,OAAQ,QAEVnD,MAAO,CACLoD,SAAU,OACVC,QAASxG,EAAMyG,QAAQ,GACvBC,eAAgB,WAChB,OAAQ,CACNpH,OAAQ,SAGZqH,SAAU,CACRP,MAAO,aAKb,SAASQ,GAAUC,GACjB,MACQ,IAAN,OADiB,kBAARA,EACE5B,WAAW4B,GAAKb,QAAQ,GAExBa,EAAIb,QAAQ,IAQ3B,SAASc,GAAQjC,GACf,MAAmC,OAA5BA,EAAUM,eAA0BN,EAAUkC,QACjDlC,EAAUE,SAAWE,WAAWJ,EAAUkC,SAC1ClC,EAAUE,SAAWE,WAAWJ,EAAUK,UAuLjC9D,oBApKf,SAAmB7B,GACjB,IAAMyH,EAAUf,KAERgB,EAAsB1H,EAAtB0H,SAAUC,EAAY3H,EAAZ2H,QACZC,EAA2B5H,EAAMoE,WA7B1ByD,KAAI,qBAAGpC,SAAmBqC,QAAO,SAACC,EAAKC,GAAN,OAAYD,EAAMC,IAAG,GA8B7DC,EAAe1B,GAAWqB,EAC1BM,EAAeD,EAAeL,EAkBpC,OACE,kBAACO,GAAA,EAAD,CAAOC,UAAWX,EAAQ/G,MACxB,kBAAC2H,GAAA,EAAD,CAAOD,UAAWX,EAAQ7D,MAAO0E,aAAW,QAC1C,kBAACC,GAAA,EAAD,KACE,kBAACC,GAAA,EAAD,KACE,kBAACC,GAAA,EAAD,CAAWC,MAAM,WACjB,kBAACD,GAAA,EAAD,oBACA,kBAACA,GAAA,EAAD,CAAWC,MAAM,SAAjB,SACA,kBAACD,GAAA,EAAD,CAAWC,MAAM,UAAjB,QACA,kBAACD,GAAA,EAAD,CAAWC,MAAM,SAAjB,QACA,kBAACD,GAAA,EAAD,CAAWC,MAAM,SAAjB,WAGJ,kBAACC,GAAA,EAAD,KACG3I,EAAMoE,WAAWyD,KAAI,SAACvC,EAAWsD,GAAZ,OACpB,kBAACJ,GAAA,EAAD,CAAUK,IAAG,YAAOD,IAClB,kBAACH,GAAA,EAAD,CAAWC,MAAM,WACbf,GACA,kBAACmB,EAAA,EAAD,CACER,aAAW,mBACXS,MAAM,oBAEN,kBAACC,EAAA,EAAD,CACEV,aAAW,SACXW,KAAK,QACLtG,QAAS,SAACuG,GAAD,OA7BL5G,EA6BoCgD,EAAUhD,QA5BpEwD,GAAmBxD,GADE,IAACA,IA+BJ,kBAAC,KAAD,CAAW6G,SAAS,eAK5B,kBAACV,GAAA,EAAD,KACGnD,EAAU8D,KADb,IACoB9D,EAAU+D,aAE9B,kBAACZ,GAAA,EAAD,CAAWC,MAAM,SACf,6BAC+B,OAA5BpD,EAAUM,eAA0BN,EAAUkC,QAC3CH,GAAU/B,EAAUkC,SACpBH,GAAU/B,EAAUK,WAE1B,6BAjFhB,SAAkBL,GAChB,IAAMgE,EAAS,GAGf,OAFAhE,EAAUiE,IAAuB,IAAjBjE,EAAUiE,IAAYD,EAAO1G,KAAK0C,EAAUiE,IAC5DjE,EAAU2D,MAAQK,EAAO1G,KAAK0C,EAAU2D,MACjCK,EAAOE,KAAK,OA6ECC,CAASnE,KAEjB,kBAACmD,GAAA,EAAD,CAAWC,MAAM,UACbf,EAmBArC,EAAUM,cAlBVN,EAAUkC,SACVlC,EAAUkC,UAAYlC,EAAUK,SAC9B,kBAAC+D,GAAA,EAAD,CACEpG,MAAOgC,EAAUM,cACjB+D,SAAU,SAACT,GAAD,OAjEL,SAAC5D,EAAqBsE,GAC7CtE,EAAUM,cAAgBgE,EAC1BtE,EAAUG,MAAQ8B,GAAQjC,GAC1Bc,GAAed,GA+DKuE,CAAiBvE,EAAW4D,EAAMY,OAAOxG,QAE3CyG,OAAO,SAEP,kBAACpJ,EAAA,EAAD,CAAU2C,MAAM,MAAhB,QACA,kBAAC3C,EAAA,EAAD,CAAU2C,MAAM,MAAhB,SAEwB,OAAxBgC,EAAU0E,UACZ,OAEA,QAMN,kBAACvB,GAAA,EAAD,CAAWC,MAAM,SACbf,EAgBArC,EAAUE,SAfV,kBAACyE,GAAA,EAAD,CACE7B,UAAWX,EAAQL,SACnBrI,KAAK,SACLmL,gBAAiB,CACfC,QAAQ,GAEVJ,OAAO,QACPK,WAAS,EACT9G,MAAOgC,EAAUE,SACjBmE,SAAU,SAACT,GAAD,OAvFJ,SAAC5D,EAAqBE,GAC5CF,EAAUE,SAAWA,EAAW,EAAIA,EAAW,EAC/CF,EAAUG,MAAQ8B,GAAQjC,GAC1Bc,GAAed,GAqFG+E,CAAgB/E,EAAW4D,EAAMY,OAAOxG,QAE1CC,WAAY,CAAE+G,IAAK,IAAKC,KAAM,QAMpC,kBAAC9B,GAAA,EAAD,CAAWC,MAAM,SAASrB,GAAU/B,EAAUG,YAGlD,kBAAC+C,GAAA,EAAD,KACE,kBAACC,GAAA,EAAD,CAAW+B,QAAS,EAAGC,QAAS,IAChC,kBAAChC,GAAA,EAAD,iBACA,kBAACA,GAAA,EAAD,CAAWC,MAAM,SACd1I,EAAMoE,YAAcpE,EAAMoE,WAAWsG,QAExC,kBAACjC,GAAA,EAAD,CAAWC,MAAM,SAASrB,GAAUO,KAEtC,kBAACY,GAAA,EAAD,KACE,kBAACC,GAAA,EAAD,YACA,kBAACA,GAAA,EAAD,CAAWC,MAAM,SAASlC,IAC1B,kBAACiC,GAAA,EAAD,CAAWC,MAAM,SAASrB,GAAUY,KAEtC,kBAACO,GAAA,EAAD,KACE,kBAACC,GAAA,EAAD,cACA,kBAACA,GAAA,EAAD,CAAWC,MAAM,QAAQ+B,QAAS,GAChC,2BAAIpD,GAAUa,QAIlBP,IAAYD,GACZ,kBAACiD,GAAA,EAAD,KACE,kBAACnC,GAAA,EAAD,KACE,kBAACC,GAAA,EAAD,CAAWgC,QAAS,EAAG/B,MAAM,QAC1B1I,EAAM4K,yBACL,kBAACC,EAAA,EAAD,CACEC,QAAQ,YACRC,MAAM,YACNpI,QAAS3C,EAAM4K,yBAHjB,eASJ,kBAACnC,GAAA,EAAD,CAAWgC,QAAS,EAAG/B,MAAM,SAC3B,kBAACmC,EAAA,EAAD,CACEC,QAAQ,YACRC,MAAM,UACNpI,QAAS,kBAAM3C,EAAMgC,QAAQY,KAAK,eAHpC,oBChMDoI,OA3Bf,SAAoBhL,GAAyB,IACnCwC,EAAkBxC,EAAlBwC,KAAMyI,EAAYjL,EAAZiL,QACRC,EAAapH,IAWnB,OACE,kBAACqH,EAAA,EAAD,CAAQC,OAAO,QAAQ5I,KAAMA,EAAME,QAAS,kBAAMuI,GAASzI,KAClC,WAAtB0I,EAAWnH,QAAuB,aACZ,WAAtBmH,EAAWnH,QACVmH,EAAW7G,QAAQD,WAAWsG,OAAS,GACrC,kBAAC,GAAD,CACEtG,WAAY8G,EAAW7G,QAAQD,WAC/BwG,wBAhBsB,SAC9B1B,GAEImC,OAAOC,QAAQ,mBACjBrF,KACAgF,GAAQ,SCaP,IAAM3E,GAEP,4BChBAiF,GAA4C,CAChDtK,EAAG,yBACHuK,EAAG,WACHC,EAAG,aACHC,EAAG,qBACHC,EAAG,cACHC,EAAG,SACHC,EAAG,qBACHC,EAAG,2BACHC,GAAI,UACJC,EAAG,gBACHC,EAAG,QACHC,EAAG,aACHC,GAAI,aACJC,EAAG,UACHC,EAAG,iBACHC,EAAG,aACHC,EAAG,eACHC,EAAG,eACHC,EAAG,gBAgPU5K,oBA5Nf,SACE7B,GAEA,IAAI0M,EAAWC,sBAMTzH,EAAYD,KAPlB,EAS4ChD,oBAAS,GATrD,mBASO2K,EATP,KASuBC,EATvB,OAaIC,IAAM7K,SAA6B,MAbvC,mBAWE8K,EAXF,KAYEC,EAZF,KAmBMC,EAAa,CACjBC,KAAM,kBACJ,kBAACC,EAAA,EAAD,CAAOC,aAAclI,EAAWmI,IAAK,GAAItC,MAAM,WAC7C,kBAAC,IAAD,QAGJuC,QAAS,OACTC,cAAc,EACd5K,QAAS,kBAAMkK,GAAmBD,KAG9BY,EAAa,CACjBN,KAAM,kBAAM,kBAAC,IAAD,OACZI,QAAS,OACTC,cAAc,EACd5K,QAnB0B,SAACuG,GAC3B8D,EAAoB9D,EAAMuE,iBAhB5B,EAqC8BxL,mBAAwB,CAACuL,IArCvD,mBAqCOE,EArCP,KAqCgBC,EArChB,KAuCAvL,qBAAU,WAENuL,EADEzI,EACS,CAAC+H,EAAYO,GAEb,CAACA,MAGb,CAACtI,IA9CJ,MAgD4CjD,oBAAiB,WAC3D2L,MAAM,GAAD,OAAItH,GAAJ,gBACFnC,MAAK,SAAA0J,GAAQ,OAAIA,EAASC,UAC1B3J,MAAK,SAAAH,GAAM,OAAI+J,EAAkB/J,MACjCM,MAAMM,QAAQI,SApDnB,mBAgDOgJ,EAhDP,KAgDuBD,EAhDvB,OAuDkD9L,oBAAiB,WACjE2L,MAAM,GAAD,OAAItH,GAAJ,oBACFnC,MAAK,SAAA0J,GAAQ,OAAIA,EAASC,UAC1B3J,MAAK,SAAAH,GAAM,OAAIiK,EAAqBjK,MACpCM,MAAMM,QAAQI,SA3DnB,mBAuDOkJ,EAvDP,KAuD0BD,EAvD1B,KA8DME,EAAmBnO,EAAMoO,OAC7BpO,EAAMoO,MAAMC,QACZrO,EAAMoO,MAAMC,OAAOC,KAAO,CAACtO,EAAMoO,MAAMC,OAAOC,KAC1CC,EAAsBvO,EAAMoO,OAChCpO,EAAMoO,MAAMC,QACZrO,EAAMoO,MAAMC,OAAOG,QAAU,CAACxO,EAAMoO,MAAMC,OAAOG,QAEnD,OACE,oCACE,kBAAC,IAAD,CACE9B,SAAUA,EACV+B,QAAS,CACP,CACE1F,MAAO,WACP2F,MAAO,WACP3P,KAAM,SACN4P,OAAQX,EACRY,kBAAmB,SACnBC,cAAeV,GAEjB,CACEpF,MAAO,eACP2F,MAAO,eACP3P,KAAM,SACN4P,OAAQT,EACRY,cAAe,SAAAC,GAEb,OADAnK,QAAQC,IAAI,qBAAsBkK,GAC3B,+CAETH,kBAAmB,SACnBC,cAAeN,GAEjB,CACExF,MAAO,cACP2F,MAAO,cACP3P,KAAM,SACNiQ,WAAW,EACXC,OAAQ,SAAAC,GACN,OAAIA,EAAI9F,KACA,GAAN,OAAU8F,EAAI9F,KAAd,eAAyB8F,EAAI7F,aAEtB6F,EAAI7F,cAIjB,CACEN,MAAO,KACP2F,MAAO,KACP3P,KAAM,UACNiQ,WAAW,GAEb,CAAEjG,MAAO,OAAQ2F,MAAO,OAAQ3P,KAAM,SAAUiQ,WAAW,GAC3D,CACEjG,MAAO,YACP2F,MAAO,YACP3P,KAAM,SACN4P,OAAQ,CAAEQ,GAAI,OAAQC,GAAI,QAC1BR,kBAAmB,UAErB,CACE7F,MAAO,QACP2F,MAAO,WACP3P,KAAM,WACNiQ,WAAW,GAEb,CACEjG,MAAO,aACP2F,MAAO,UACP3P,KAAM,WACNiQ,WAAW,EACXC,OAAQ,SAAAC,GAAG,OACTA,EAAIvJ,WAAauJ,EAAI1H,QAArB,WAAmC0H,EAAI1H,SAAY,KAEvD,CACEuB,MAAO,aACP2F,MAAO,QACP3P,KAAM,SACN4P,OAAQpD,GACRqD,kBAAmB,SACnBK,OAAQ,SAAAC,GAAG,OAAgBA,EAAIG,MA9JtCC,MAAM,MACNzH,KAAI,SAAC0H,EAAM3G,GAAP,OACH2C,GAAagE,GACX,kBAACC,EAAA,EAAD,CACEC,MAAOlE,GAAagE,GACpBxM,MAAO,CAAEgH,OAAQ,GACjBd,KAAK,QACLJ,IAAG,eAAUD,KAGf,QAsJE,CACEG,WAAO1F,EACPqL,WAAOrL,EACPtE,KAAM,SACNkQ,OAAQ,SAAAC,GACN,IACMO,EACF,uBAEJ,OACE,kBAAC3G,EAAA,EAAD,CAASR,aAAYmH,EAAO1G,MAAO0G,GACjC,kBAACzG,EAAA,EAAD,CAAY+B,MAAM,YAAYpI,QAAS,kBAAMyC,GAAU8J,KAEnD,kBAAC,IAAD,UASZ,CAAEnG,MAAO,MAAO2F,MAAO,WAAY3P,KAAM,SAAU2Q,QAAQ,GAE3D,CAAE3G,MAAO,KAAM2F,MAAO,KAAM3P,KAAM,SAAU2Q,QAAQ,IAEtDC,KAAM,SAAAC,GAAK,OACT,IAAIzO,SAAQ,SAACC,EAASyO,GACpBjL,QAAQC,IAAI,SAAU+K,GACtBhC,MAAM,GAAD,OAAItH,GAAJ,aAAyB,CAC5BwJ,OAAQ,OACRC,QAAS,CACP,eAAgB,oBAElBC,KAAMxO,KAAKI,UAAUgO,KAEpBzL,MAAK,SAAA0J,GAAQ,OAAIA,EAASC,UAC1B3J,MAAK,SAAAH,GACJY,QAAQC,IAAI,SAAUb,GACtB5C,EAAQ4C,MAETM,OAAM,SAAA6B,GAEL,OADAvB,QAAQI,KAAK,oBAAqBmB,GAC3B/E,EAAQ,CAAEuO,KAAM,GAAIM,KAAM,EAAGC,WAAY,WAIxDnH,MACE,kBAAC8B,EAAA,EAAD,CACEC,QAAQ,OACR7B,KAAK,QACLtG,QAAS,kBAAM3C,EAAMgC,QAAQY,KAAK,OAElC,kBAACuN,EAAA,EAAD,CAAYrF,QAAQ,MAApB,eAGJsF,QAAS,CACPC,YAAa,CAAEC,SAAU,SAAUC,IAAK,GACxCC,gBAAiB,CAAExJ,SAAU,SAC7ByJ,cAAe,sBACfC,SAAU,GACVC,gBAAiB,CAAC,GAAI,IAAK,KAC3BC,iBAAkB,IAClB5B,WAAW,EACX6B,QAAQ,EACRC,qBAAqB,GAEvBpD,QAASA,IAEX,kBAAC,GAAD,CAAYlL,KAAMoK,EAAgB3B,QAAS4B,IAC3C,kBAAC,EAAD,CAAU/K,SAAUiL,EAAkBhL,YAAaiL,Q,yFC/PnDtG,GAAYC,cAAW,SAAClG,GAAD,OAC3BmG,aAAa,CACXlG,KAAM,CACJqQ,SAAU,EACVC,UAAW,QAEbC,QAAS,CACPC,gBAAiBzQ,EAAM3B,QAAQqS,WAAWC,QAC1CrG,MAAOtK,EAAM3B,QAAQuS,KAAKrS,SAE5BsS,WAAY,CACVC,WAAY9Q,EAAMyG,QAAQ,IAE5BsK,KAAM,CACJT,SAAU,GAMZF,OAAO,cACLP,SAAU,WACVmB,aAAchR,EAAMiR,MAAMD,aAC1BP,gBAAiBS,aAAKlR,EAAM3B,QAAQ8S,OAAOC,MAAO,KAClD,UAAW,CACTX,gBAAiBS,aAAKlR,EAAM3B,QAAQ8S,OAAOC,MAAO,MAEpDN,WAAY,EACZ1K,MAAO,QACNpG,EAAMqR,YAAYC,GAAG,MAAQ,CAC5BR,WAAY9Q,EAAMyG,QAAQ,GAC1BL,MAAO,SAGXmL,WAAY,CACVnL,MAAOpG,EAAMyG,QAAQ,GACrBH,OAAQ,OACRuJ,SAAU,WACV2B,cAAe,OACfjP,QAAS,OACTE,WAAY,SACZD,eAAgB,UAElBiP,UAAW,CACTnH,MAAO,WAEToH,WAAW,cACTlL,QAASxG,EAAMyG,QAAQ,EAAG,EAAG,EAAG,GAChCkL,WAAY3R,EAAM4R,YAAYC,OAAO,SACrCzL,MAAO,QACNpG,EAAMqR,YAAYC,GAAG,MAAQ,CAC5BlL,MAAO,IACP,UAAW,CACTA,MAAO,YAuFFhF,oBA3Ef,SAAgB7B,GACd,IAAMyH,EAAUf,KACVxB,EAAYD,KAEVsN,EAAavS,EAAbuS,SAJgD,EAKZtQ,oBAAS,GALG,mBAKjD2K,EALiD,KAKjCC,EALiC,OAMR5K,mBAC9C,MAPsD,mBAMjD8K,EANiD,KAM/BC,EAN+B,KAcxD,OACE,kBAACwF,GAAA,EAAD,CAAQlC,SAAS,SAASlI,UAAWX,EAAQ/G,MAC3C,kBAAC+R,GAAA,EAAD,CAASrK,UAAWX,EAAQwJ,SAC1B,6BACE,kBAACyB,GAAA,EAAD,CAAMC,IAAE,GACN,kBAAC9H,EAAA,EAAD,CACEC,QAAQ,OACR7B,KAAK,QACLtG,QAAS,kBAAM3C,EAAMgC,QAAQY,KAAK,OAElC,kBAACuN,EAAA,EAAD,CAAYrF,QAAQ,MAApB,iBAKL9K,EAAM4S,UAAY,yBAAKxK,UAAWX,EAAQ+J,MAAxB,QAgBlBe,GAAYrN,EAAY,GACvB,kBAAC8D,EAAA,EAAD,CACE6J,KAAK,MACLzK,UAAWX,EAAQ6J,WACnBvG,MAAM,UACNzC,aAAW,YACX3F,QAAS,kBAAMkK,GAAkB,SAAA/J,GAAI,OAAKA,OAE1C,kBAACqK,EAAA,EAAD,CAAOC,aAAclI,EAAWmI,IAAK,GAAItC,MAAM,aAC7C,kBAAC,IAAD,QAKN,kBAAC/B,EAAA,EAAD,CACE6J,KAAK,MACLzK,UAAWX,EAAQ6J,WACnBvG,MAAM,UACNzC,aAAW,YACX3F,QAtDoB,SAACuG,GAC3B8D,EAAoB9D,EAAMuE,iBAuDpB,kBAAC,IAAD,QAGJ,kBAAC,EAAD,CAAU3L,SAAUiL,EAAkBhL,YAAaiL,IACnD,kBAAC,GAAD,CAAYxK,KAAMoK,EAAgB3B,QAAS4B,QC3I3CnG,GAAYC,cAAW,SAAClG,GAAD,OAC3BmG,aAAa,CACXkM,SAAU,CACRjM,MAAO,OACPC,UAAW,OACXiM,UAAW,qBACX9L,QAASxG,EAAMyG,QAAQ,GACvBlE,QAAS,QAEXgQ,OAAQ,CACNhQ,QAAS,OACTiQ,cAAe,MACfhQ,eAAgB,aAChBC,WAAY,SACZ6N,SAAU,GAEZmC,QAAS,CACPrM,MAAO,OACPE,OAAQ,OACRoK,WAAY1Q,EAAM3B,QAAQqS,WAAWrR,MACrC,UAAW,CACTqT,eAAgB,YAChBC,OAAQ,YAGZC,SAAU,CACR,UAAW,CACTF,eAAgB,YAChBC,OAAQ,YAGZE,OAAQ,CACNC,SAAU,SACVC,aAAc,aACdC,QAAS,aAkMA5R,oBA7Lf,SAAiB7B,GACf,IAAMyH,EAAUf,KAD2B,EAGPzE,mBAAmB,IAHZ,mBAGpCyR,EAHoC,KAGxBC,EAHwB,OAIL1R,mBAAS,IAJJ,mBAIpC2R,EAJoC,KAIvBC,EAJuB,OAKD5R,mBAExC,IAPyC,mBAKpC6R,EALoC,KAKrBC,EALqB,KAsD3C,OA7CA3R,qBAAU,WACRwL,MAAM,GAAD,OAAItH,GAAJ,gBACFnC,MAAK,SAAA0J,GAAQ,OAAIA,EAASC,UAC1B3J,MAAK,SAAAH,GACJY,QAAQC,IAAI,SAAUb,GACtB2P,EAAcK,OAAOC,KAAKjQ,OAE3BM,OAAM,SAAA6B,GACLvB,QAAQI,KAAK,oBAAqBmB,GAClCwN,EAAc,SAEjB,CAACA,IAEJvR,qBAAU,WACRwL,MAAM,GAAD,OAAItH,GAAJ,mBAA+B,CAClCwJ,OAAQ,OACRC,QAAS,CACP,eAAgB,oBAElBC,KAAMxO,KAAKI,UAAU,CAAE8R,WAAY,CAACE,OAEnCzP,MAAK,SAAA0J,GAAQ,OAAIA,EAASC,UAC1B3J,MAAK,SAAAH,GACJY,QAAQC,IAAI,SAAUb,GACtB+P,EACEC,OAAOC,KAAKjQ,GAAQ6D,KAAI,SAAAuB,GAAI,MAAK,CAC/BA,OACAqG,MAAOrG,EACJkG,MAAM,KACN9F,KAAK,MACL8F,MAAM,KACN9F,KAAK,MACL8F,MAAM,KACN9F,KAAK,OACL8F,MAAM,KACN9F,KAAK,eAIblF,OAAM,SAAA6B,GACLvB,QAAQI,KAAK,oBAAqBmB,GAClC4N,EAAiB,SAEpB,CAACH,EAAaG,IAGf,oCACE,kBAAC,GAAD,CAAQxB,UAAQ,GACbqB,GACC,yBAAKxL,UAAWX,EAAQuL,QACtB,kBAACN,GAAA,EAAD,CAAMC,IAAE,GACN,kBAAC,KAAD,CAAkBxJ,SAAS,WAE7B,kBAACuJ,GAAA,EAAD,CAAMC,IAAE,EAAC5P,MAAO,CAAEmR,gBAAiB,SACjC,kBAACrJ,EAAA,EAAD,CACEC,QAAQ,OACR7B,KAAK,QACLtG,QAAS,kBAAMkR,EAAe,MAE9B,kBAAC1D,EAAA,EAAD,CACErF,QAAQ,KACR1C,UAAWwL,GAAenM,EAAQ4L,UAFpC,gBASJ,kBAACX,GAAA,EAAD,CAAMC,IAAE,EAAC5P,MAAO,CAAEmR,gBAAiB,UACjC,kBAAC,KAAD,CAAkB/K,SAAS,WAE7B,kBAACuJ,GAAA,EAAD,CAAMC,IAAE,EAAC5P,MAAO,CAAEmR,gBAAiB,UACjC,kBAAC/D,EAAA,EAAD,CAAYrF,QAAQ,MAAM8I,EAAYO,kBAM9C,kBAACC,GAAA,EAAD,CAAMC,WAAS,EAACnN,QAAS,EAAGoN,QAAQ,SAASlM,UAAWX,EAAQqL,UAC7DY,IACEE,GACDF,EAAW7L,KAAI,SAACG,EAAGY,GAAJ,OACb,kBAAC2L,GAAA,EAAD,CACE5B,IAAE,EACF5P,MAAO,CAAEmR,gBAAgB,GAAD,OAAW,GAANtL,EAAL,OACxBC,IAAG,YAAOD,IAEV,kBAACwL,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,GAAIC,GAAI,EAAGC,GAAI,EAAGC,GAAI,GACnC,kBAAC/J,EAAA,EAAD,CACEzC,UAAWX,EAAQyL,QACnBpI,QAAQ,WACR7B,KAAK,QACLJ,IAAG,YAAOD,GACVjG,QAAS,kBAAMkR,EAAe7L,KAE9B,kBAACmI,EAAA,EAAD,CAAYrF,QAAQ,KAAK1C,UAAWX,EAAQ6L,QACzCtL,SAOZ0L,EAAWhJ,OAAS,IAAMkJ,GACzB,kBAACW,GAAA,EAAD,CACE5B,IAAE,EACF5P,MAAO,CACLmR,gBAAgB,GAAD,OAAyB,GAApBR,EAAWhJ,OAAhB,QAGjB,kBAAC0J,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,GAAIC,GAAI,EAAGC,GAAI,EAAGC,GAAI,GACnC,kBAAC/J,EAAA,EAAD,CACEzC,UAAWX,EAAQyL,QACnBpI,QAAQ,WACR7B,KAAK,QACLtG,QAAS,kBAAM3C,EAAMgC,QAAQY,KAAK,eAElC,kBAACuN,EAAA,EAAD,CAAYrF,QAAQ,KAAK1C,UAAWX,EAAQ6L,QAA5C,qBAQPQ,GACCF,GACAE,EAAcjM,KAAI,SAACgN,EAAQjM,GAAT,OAChB,kBAAC2L,GAAA,EAAD,CACE5B,IAAE,EACF5P,MAAO,CAAEmR,gBAAgB,GAAD,OAAW,GAANtL,EAAL,OACxBC,IAAG,YAAOD,IAEV,kBAACwL,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,GAAIC,GAAI,EAAGC,GAAI,GAC5B,kBAAC9J,EAAA,EAAD,CACEzC,UAAWX,EAAQyL,QACnBpI,QAAQ,WACR7B,KAAK,QACLJ,IAAG,YAAOD,GACVjG,QAAS,kBACP3C,EAAMgC,QAAQY,KAAd,oBACegR,EADf,YAC8BiB,EAAOzL,SAIvC,kBAAC+G,EAAA,EAAD,CAAYrF,QAAQ,KAAK1C,UAAWX,EAAQ6L,QACzCuB,EAAOpF,aAOnBqE,EAAcpJ,OAAS,GAAKkJ,GAC3B,kBAACW,GAAA,EAAD,CACE5B,IAAE,EACF5P,MAAO,CACLmR,gBAAgB,GAAD,OAA4B,GAAvBJ,EAAcpJ,OAAnB,QAGjB,kBAAC0J,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,GAAIC,GAAI,EAAGC,GAAI,GAC5B,kBAAC9J,EAAA,EAAD,CACEzC,UAAWX,EAAQyL,QACnBpI,QAAQ,WACR7B,KAAK,QACLtG,QAAS,kBAAM3C,EAAMgC,QAAQY,KAAd,oBAAgCgR,MAE/C,kBAACzD,EAAA,EAAD,CAAYrF,QAAQ,KAAK1C,UAAWX,EAAQ6L,QAA5C,0B,uEChNH7T,GAAM,SAACqV,GAClB,MAAO,CAAE/V,KAAM,MAAO+V,SAEXC,GAAW,SAAC5V,GACvB,MAAO,CAAEJ,KAAM,YAAaI,UAEjBQ,GAAa,SAACA,GACzB,MAAO,CAAEZ,KAAM,eAAgBY,eAgGpBqV,GAAQ,SACnBC,EACAC,GAEA,OAAO,SAAOnU,GAAP,SAAAE,EAAAC,OAAA,yEACE,IAAIC,SAAc,SAAAC,GACvBL,EAASpB,IAAW,IAEpBiO,MAAM,GAAD,OAAItH,GAAJ,UAAsB,CACzBwJ,OAAQ,OACRC,QAAS,CACP,eAAgB,oBAElBC,KAAMxO,KAAKI,UAAU,CAAEqT,QAAOC,eAE7B/Q,MAAK,SAAA0J,GAAQ,OAAIA,EAASC,UAC1B3J,MAAK,SAAA0J,GAEiB,OAAjBA,EAASsH,KAAgBtH,EAASiH,MAAQjH,EAASiH,KAAKM,OAC1D9T,cAAgBA,aAAaK,QAAQ,QAASkM,EAASiH,KAAKM,OAC5DrU,EAAStB,GAAIoO,EAASiH,QAEtB/T,EAASgU,GAAS,CAAE5V,MAAO,QAASkW,OAAQxH,EAASyH,cAGxDhR,OAAM,SAAAC,GACLK,QAAQC,IAAI,eAAgBN,GAC5BxD,EACEgU,GAAS,CAAE5V,MAAO,QAASkW,OAAQ,qCAGtCE,SAAQ,WACPxU,EAASpB,IAAW,IACpByB,WA7BD,uCCxGHsF,GAAYC,cAAW,SAAAlG,GAAK,MAAK,CACrC+U,KAAM,CACJ3O,MAAO,OAEP4O,UAAWhV,EAAMyG,QAAQ,GACzBlE,QAAS,OACTiQ,cAAe,SACfhQ,eAAgB,UAElB8F,MAAO,CACL/F,QAAS,OACTC,eAAgB,gBAChBC,WAAY,YAEdwS,OAAQ,CACN3L,OAAQtJ,EAAMyG,QAAQ,EAAG,EAAG,QAuGhC,IAkBetG,gBAlBS,SACtBC,EACA8U,GAEA,MAAO,CACLC,YAAa/U,EAAOgV,QAAQD,gBAIL,SACzB7U,EACA4U,GAEA,MAAO,CACLX,MAAO,SAACC,EAAOC,GAAR,OAAqBnU,EAASiU,GAAMC,EAAOC,QAIvCtU,CAA6CiB,aArH5D,SAAe7B,GACb,IAiBQ4V,EAA+C5V,EAA/C4V,YAAaE,EAAkC9V,EAAlC8V,UAAWC,EAAuB/V,EAAvB+V,UAAW/T,EAAYhC,EAAZgC,QACrCyF,EAAUf,KAnBW,EAoBDzE,mBAAS,IApBR,mBAoBpB9C,EApBoB,KAoBb4V,EApBa,KAiC3B,OAVA3S,qBAAU,WACJwT,EAAYd,OAASc,EAAYjW,YAAciW,EAAYd,KAAKkB,OAClEpR,QAAQC,IAAI,iBAAkB+Q,EAAYd,MAC1CiB,EAAYA,IAAc/T,EAAQY,KAAK,QAKxC,CAACgT,EAAaG,EAAW/T,IAG1B,kBAACiU,GAAA,EAAD,CAAWjP,SAAS,MAClB,0BAAMkP,SAlCM,SAAChN,GACfA,EAAMiN,iBACNpB,EAAS,IACT,IAAMjL,EAASZ,EAAMuE,cACf2I,EAAUtM,EAAOuM,SAASC,UAAU,SACpCC,EAAazM,EAAOuM,SAASC,UAAU,YAG3CF,GACAA,EAAQ9S,MAAMoH,OAAS,GACvB6L,GACAA,EAAWjT,MAAMoH,OAAS,GAE1B1K,EAAMgV,MAAMoB,EAAQ9S,MAAOiT,EAAWjT,QAqBb8E,UAAWX,EAAQ+N,MACzCM,GACC,yBAAK1N,UAAWX,EAAQsB,OACtB,kBAACoH,EAAA,EAAD,CAAYrF,QAAQ,KAAK9H,QAAQ,SAAjC,YAKJ,kBAACiH,GAAA,EAAD,CACEwF,MAAM,QACNrG,KAAK,QACLrK,KAAK,OACLyX,WAAS,EACTpM,WAAS,EACTqM,UAAQ,IAEV,kBAACxM,GAAA,EAAD,CACEwF,MAAM,WACNrG,KAAK,WACLrK,KAAK,WACLqL,WAAS,EACTqM,UAAQ,IAGV,6BACE,kBAAC5L,EAAA,EAAD,CACE9L,KAAK,SACLqL,WAAS,EACTU,QAAQ,YACRC,MAAM,UACN2L,SAAU1W,EAAM4V,YAAYjW,WAC5ByI,UAAWX,EAAQiO,QANrB,UAYF,kBAACiB,GAAA,EAAD,CAAK5L,MAAM,cACR/K,EAAM4V,YAAYzW,OACjB,oCACE,kBAACgR,EAAA,EAAD,CAAYrF,QAAQ,WAAW9H,QAAQ,SAAvC,mBAGA,kBAACmN,EAAA,EAAD,CAAYrF,QAAQ,QAAQ9H,QAAQ,QAAQ4T,cAAY,GACrD5W,EAAM4V,YAAYzW,MAAMkW,SAI9BlW,GACC,oCACE,kBAACgR,EAAA,EAAD,CAAYrF,QAAQ,WAAW9H,QAAQ,SAAvC,mBAGA,kBAACmN,EAAA,EAAD,CAAYrF,QAAQ,QAAQ9H,QAAQ,QAAQ4T,cAAY,GACrDzX,W,gFClGXuH,GAAYC,cAAW,SAAAlG,GAAK,MAAK,CACrC+U,KAAM,CACJ3O,MAAO,OAEP4O,UAAWhV,EAAMyG,QAAQ,GACzBlE,QAAS,OACTiQ,cAAe,SACfhQ,eAAgB,SAChB,4BAA6B,CAC3B8H,MAAOtK,EAAM3B,QAAQK,MAAMF,KAC3B4X,UAAW,UAGf9N,MAAO,CACL/F,QAAS,OACTC,eAAgB,gBAChBC,WAAY,YAEd4T,OAAQ,CACNrB,UAAWhV,EAAMyG,QAAQ,GACzB6P,aAActW,EAAMyG,QAAQ,IAE9B8P,YAAa,CACXjN,OAAO,GAAD,OAAKtJ,EAAMyG,QAAQ,GAAnB,QACN,WAAY,CACViC,SAAU,UACVsM,UAAWhV,EAAMyG,QAAQ,GACzB6P,aAActW,EAAMyG,QAAQ,KAGhCwO,OAAQ,CACN3L,OAAQtJ,EAAMyG,QAAQ,EAAG,EAAG,QAoShC,IAkBetG,gBAlBS,SACtBC,EACA8U,GAEA,MAAO,CACLC,YAAa/U,EAAOgV,QAAQD,gBAIL,SACzB7U,EACA4U,GAEA,MAAO,CACLX,MAAO,SAACC,EAAOC,GAAR,OAAqBnU,EAASiU,GAAMC,EAAOC,QAIvCtU,CAGbiB,aArTF,SAAkB7B,GAChB,IAiBQ4V,EAAkD5V,EAAlD4V,YAAaE,EAAqC9V,EAArC8V,UAAWmB,EAA0BjX,EAA1BiX,aAAcjV,EAAYhC,EAAZgC,QACxCyF,EAAUf,KAnBc,EAoBJzE,mBAAS,IApBL,mBAoBvB9C,EApBuB,KAoBhB4V,EApBgB,KAiC9B,OAVA3S,qBAAU,WACJwT,EAAYd,OAASc,EAAYjW,YAAciW,EAAYd,KAAKkB,OAClEpR,QAAQC,IAAI,iBAAkB+Q,EAAYd,MAC1CmC,EAAeA,IAAiBjV,EAAQY,KAAK,QAK9C,CAACgT,EAAaqB,EAAcjV,IAG7B,kBAACiU,GAAA,EAAD,CAAWjP,SAAS,MAClB,0BAAMkP,SAlCM,SAAChN,GACfA,EAAMiN,iBACNpB,EAAS,IACT,IAAMjL,EAASZ,EAAMuE,cACf2I,EAAUtM,EAAOuM,SAASC,UAAU,SACpCC,EAAazM,EAAOuM,SAASC,UAAU,YAG3CF,GACAA,EAAQ9S,MAAMoH,OAAS,GACvB6L,GACAA,EAAWjT,MAAMoH,OAAS,GAE1B1K,EAAMgV,MAAMoB,EAAQ9S,MAAOiT,EAAWjT,QAqBb8E,UAAWX,EAAQ+N,MACzCM,GACC,yBAAK1N,UAAWX,EAAQsB,OACtB,kBAACoH,EAAA,EAAD,CAAYrF,QAAQ,KAAK9H,QAAQ,SAAjC,aAKJ,kBAACiH,GAAA,EAAD,CACEwF,MAAM,QACNrG,KAAK,QACLrK,KAAK,OACLmY,WAAW,WACXV,WAAS,EACTpM,WAAS,EACTqM,UAAQ,IAEV,kBAACxM,GAAA,EAAD,CACEwF,MAAM,OACNrG,KAAK,OACLrK,KAAK,OACLmY,WAAW,WACX9M,WAAS,EACTqM,UAAQ,IAEV,kBAACxM,GAAA,EAAD,CACEwF,MAAM,QACNrG,KAAK,QACLrK,KAAK,QACLmY,WAAW,WACX9M,WAAS,EACTqM,UAAQ,IAEV,kBAACxM,GAAA,EAAD,CAAWwF,MAAM,UAAUrG,KAAK,UAAUrK,KAAK,OAAOqL,WAAS,IAE/D,uBAAGhC,UAAWX,EAAQqP,QACpB,qgBAYF,kBAACK,GAAA,EAAD,CAAaC,UAAU,WAAWhP,UAAWX,EAAQuP,aACnD,kBAACK,GAAA,EAAD,CAAWD,UAAU,UAArB,mBACA,kBAACE,GAAA,EAAD,CACEhP,aAAW,OACXc,KAAK,QAIL,kBAACmO,GAAA,EAAD,CACEjU,MAAM,QACNkU,QAAS,kBAACC,GAAA,EAAD,MACThI,MAAM,sCAER,kBAAC8H,GAAA,EAAD,CACEjU,MAAM,iBACNkU,QAAS,kBAACC,GAAA,EAAD,MACThI,MAAM,6DAER,kBAAC8H,GAAA,EAAD,CACEjU,MAAM,iBACNkU,QAAS,kBAACC,GAAA,EAAD,MACThI,MAAM,oFAIV,kBAACiI,GAAA,EAAD,kBAGF,kBAACP,GAAA,EAAD,CAAaC,UAAU,WAAWhP,UAAWX,EAAQuP,aACnD,kBAACK,GAAA,EAAD,CAAWD,UAAU,UAArB,0CAGA,kBAACE,GAAA,EAAD,CACEhP,aAAW,OACXc,KAAK,QAIL,kBAACmO,GAAA,EAAD,CACEjU,MAAM,QACNkU,QAAS,kBAACC,GAAA,EAAD,MACThI,MAAM,gBAER,kBAAC8H,GAAA,EAAD,CACEjU,MAAM,SACNkU,QAAS,kBAACC,GAAA,EAAD,MACThI,MAAM,kBAER,kBAAC8H,GAAA,EAAD,CACEjU,MAAM,SACNkU,QAAS,kBAACC,GAAA,EAAD,MACThI,MAAM,kBAGV,kBAACiI,GAAA,EAAD,kBAGF,kBAACP,GAAA,EAAD,CAAaC,UAAU,WAAWhP,UAAWX,EAAQuP,aACnD,kBAACK,GAAA,EAAD,CAAWD,UAAU,UAArB,gCACA,kBAACE,GAAA,EAAD,CACEhP,aAAW,OACXc,KAAK,QAIL,kBAACmO,GAAA,EAAD,CACEjU,MAAM,SACNkU,QAAS,kBAACC,GAAA,EAAD,MACThI,MAAM,8FAGR,kBAAC8H,GAAA,EAAD,CACEjU,MAAM,WACNkU,QAAS,kBAACC,GAAA,EAAD,MACThI,MAAM,0EAGV,kBAACiI,GAAA,EAAD,kBAGF,kBAACP,GAAA,EAAD,CAAaC,UAAU,WAAWhP,UAAWX,EAAQuP,aACnD,kBAACK,GAAA,EAAD,CAAWD,UAAU,UAArB,yBACA,kBAACO,GAAA,EAAD,KACE,kBAACJ,GAAA,EAAD,CACEC,QACE,kBAACI,GAAA,EAAD,CAEEjO,SAAU/E,QAAQC,IAClBvB,MAAM,iBAGVmM,MAAM,yEAER,kBAAC8H,GAAA,EAAD,CACEC,QACE,kBAACI,GAAA,EAAD,CAEEjO,SAAU/E,QAAQC,IAClBvB,MAAM,mBAGVmM,MAAM,qEAER,kBAAC8H,GAAA,EAAD,CACEC,QACE,kBAACI,GAAA,EAAD,CAEEjO,SAAU/E,QAAQC,IAClBvB,MAAM,eAGVmM,MAAM,+BAER,kBAAC8H,GAAA,EAAD,CACEC,QACE,kBAACI,GAAA,EAAD,CAEEjO,SAAU/E,QAAQC,IAClBvB,MAAM,wBAGVmM,MAAM,yCAER,kBAAC8H,GAAA,EAAD,CACEC,QACE,kBAACI,GAAA,EAAD,CAEEjO,SAAU/E,QAAQC,IAClBvB,MAAM,aAGVmM,MAAM,sCAER,kBAACxF,GAAA,EAAD,CACEwF,MAAM,UACNrG,KAAK,kBACLrK,KAAK,OACL8Y,WAAS,EACTC,QAAQ,KACR1N,WAAS,MAKf,kBAAC+M,GAAA,EAAD,CAAaC,UAAU,WAAWhP,UAAWX,EAAQuP,aACnD,kBAACK,GAAA,EAAD,CAAWD,UAAU,UAArB,2CAGA,kBAACO,GAAA,EAAD,KACE,kBAACJ,GAAA,EAAD,CACEC,QACE,kBAACI,GAAA,EAAD,CAEEjO,SAAU/E,QAAQC,IAClBvB,MAAM,UAGVmM,MAAM,kKAKV,kBAACiI,GAAA,EAAD,kBAGF,6BACE,kBAAC7M,EAAA,EAAD,CACE9L,KAAK,SACLqL,WAAS,EACTU,QAAQ,YACRC,MAAM,UACN2L,SAAU1W,EAAM4V,YAAYjW,WAC5ByI,UAAWX,EAAQiO,QANrB,aAYF,kBAACiB,GAAA,EAAD,CAAK5L,MAAM,cACR/K,EAAM4V,YAAYzW,OACjB,oCACE,kBAACgR,EAAA,EAAD,CAAYrF,QAAQ,WAAW9H,QAAQ,SAAvC,mBAGA,kBAACmN,EAAA,EAAD,CAAYrF,QAAQ,QAAQ9H,QAAQ,QAAQ4T,cAAY,GACrD5W,EAAM4V,YAAYzW,MAAMkW,SAI9BlW,GACC,oCACE,kBAACgR,EAAA,EAAD,CAAYrF,QAAQ,WAAW9H,QAAQ,SAAvC,mBAGA,kBAACmN,EAAA,EAAD,CAAYrF,QAAQ,QAAQ9H,QAAQ,QAAQ4T,cAAY,GACrDzX,WCvUX4Y,GAAqBpR,cAAW,SAAClG,GAAD,OACpCmG,aAAa,CACXoR,IAAK,CACHhV,QAAS,OACTiQ,cAAe,SACfhM,QAAQ,GAAD,OAAKxG,EAAMyG,QAAQ,GAAnB,QACPhE,WAAY,UAEd+U,QAAQ,cACNjV,QAAS,OACTC,eAAgB,gBAChBC,WAAY,SACZ6T,aAActW,EAAMyG,QAAQ,GAC5BF,SAAU,QACVH,MAAO,OACNpG,EAAMqR,YAAYoG,KAAK,MAAQ,CAC9BrR,MAAO,OACPG,SAAU,eAMlB,SAASmR,GACPnY,GAKA,IAAMyH,EAAUsQ,KADhB,EAEsB9V,qBAFtB,mBAEO+V,EAFP,KAEYI,EAFZ,KAKEC,EAMErY,EANFqY,mBACAC,EAKEtY,EALFsY,WACAC,EAIEvY,EAJFuY,aACAC,EAGExY,EAHFwY,WACAC,EAEEzY,EAFFyY,aACAC,EACE1Y,EADF0Y,SAGFtW,qBAAU,WACRiW,GAAmB,KAClB,CAACA,IAEJ,IAAMM,EAAgB,WACpBN,GAAmB,GACnBC,KAGF,OACE,oCACE,kBAACnQ,GAAA,EAAD,KACG6P,GACC,kBAAClP,EAAA,EAAD,CAASR,aAAW,OAAOS,MAAM,QAC/B,kBAACC,EAAA,EAAD,CAAYrG,QAAS,kBAAMyV,OAAO/U,KAChC,kBAAC,KAAD,SAIJ2U,GACA,yBAAK5P,UAAWX,EAAQuQ,KACtB,yBAAK5P,UAAWX,EAAQwQ,SACtB,kBAAC9H,EAAA,EAAD,CAAYrF,QAAQ,QAAQ8L,cAAY,GAAxC,qBAGA,kBAAC/L,EAAA,EAAD,CACEC,QAAQ,YACRC,MAAM,UACNpI,QAAS,kBAAMyV,EAAO,WAHxB,YAQF,yBAAKhQ,UAAWX,EAAQwQ,SACtB,kBAAC9H,EAAA,EAAD,CAAYrF,QAAQ,QAAQ8L,cAAY,GAAxC,4BAGA,kBAAC/L,EAAA,EAAD,CAAQE,MAAM,YAAYpI,QAAS,kBAAMyV,EAAO,cAAhD,aAIF,yBAAKhQ,UAAWX,EAAQwQ,SACtB,kBAAC9H,EAAA,EAAD,CAAYrF,QAAQ,QAAQ8L,cAAY,GAAxC,uBAGA,kBAAC/L,EAAA,EAAD,CAAQlI,QAAS,kBAAMgW,MAAvB,WAKG,UAARX,GAAmB,kBAAC,GAAD,CAAOjC,UAAW4C,IAC7B,aAARX,GAAsB,kBAAC,GAAD,CAAUf,aAAc0B,KAEjD,kBAACC,GACK,CAAEL,eAAcC,aAAYC,eAAcH,aAAYI,cAMlE,IAAMG,GAAelS,cAAW,SAAClG,GAAD,OAC9BmG,aAAa,CACXkS,cAAe,CACb7R,QAASxG,EAAMyG,QAAQ,GACvBH,OAAQ,OACR/D,QAAS,OACTiQ,cAAe,SACf/P,WAAY,SACZ,4BAA6B,CAC3B6H,MAAOtK,EAAM3B,QAAQK,MAAMF,KAC3B4X,UAAW,eAMnB,SAASkC,GACP/Y,GAIA,IAAMyH,EAAUoR,KACV3N,EAAapH,IAEjBuU,EAMErY,EANFqY,mBACAE,EAKEvY,EALFuY,aACAC,EAIExY,EAJFwY,WACAC,EAGEzY,EAHFyY,aACAH,EAEEtY,EAFFsY,WACAI,EACE1Y,EADF0Y,SATF,EAY0BzW,mBAAS,IAZnC,mBAYOgT,EAZP,KAYc+D,EAZd,OAa0B/W,mBAAS,IAbnC,mBAaOgX,EAbP,KAacC,EAbd,OAcwBjX,mBAAS,IAdjC,mBAcOmH,EAdP,KAca+P,EAdb,OAe8BlX,mBAAS,IAfvC,mBAeOmX,EAfP,KAegBC,EAfhB,OAgB0BpX,mBAAS,IAhBnC,mBAgBOqX,EAhBP,KAgBcC,EAhBd,KAsBA,OAJAnX,qBAAU,WACRiW,GAAsBA,KAAsBpD,GAASgE,GAAS7P,MAC7D,CAACiP,EAAoBpD,EAAOgE,EAAO7P,IAGpC,oCACE,kBAACgL,GAAA,EAAD,CAAMC,WAAS,EAACC,QAAQ,SAASkF,UAAU,OACzC,kBAACpF,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,GAAIC,GAAI,GACrB,kBAACvM,GAAA,EAAD,CAAOC,UAAWX,EAAQqR,eACxB,kBAAC7O,GAAA,EAAD,CACEwF,MAAM,QACNrG,KAAK,QACLrK,KAAK,OACLuE,MAAO2R,EACPtL,SAAU,SAACT,GAAD,OAAgB8P,EAAS9P,EAAMY,OAAOxG,QAChDkT,WAAS,EACTpM,WAAS,EACT8M,WAAW,WACXT,UAAQ,IAEV,kBAACxM,GAAA,EAAD,CACEwF,MAAM,OACNrG,KAAK,OACLrK,KAAK,OACLuE,MAAO8F,EACPO,SAAU,SAACT,GAAD,OAAgBiQ,EAAQjQ,EAAMY,OAAOxG,QAC/C8G,WAAS,EACT8M,WAAW,WACXT,UAAQ,IAEV,kBAACxM,GAAA,EAAD,CACEwF,MAAM,QACNrG,KAAK,QACLrK,KAAK,QACLuE,MAAO2V,EACPtP,SAAU,SAACT,GAAD,OAAgBgQ,EAAShQ,EAAMY,OAAOxG,QAChD8G,WAAS,EACT8M,WAAW,WACXT,UAAQ,IAEV,kBAACxM,GAAA,EAAD,CACEwF,MAAM,UACNrG,KAAK,UACLrK,KAAK,OACLuE,MAAO8V,EACPzP,SAAU,SAACT,GAAD,OAAgBmQ,EAAWnQ,EAAMY,OAAOxG,QAClD8G,WAAS,IAEX,kBAACH,GAAA,EAAD,CACEwF,MAAM,QACNrG,KAAK,QACLrK,KAAK,OACLuE,MAAOgW,EACP3P,SAAU,SAACT,GAAD,OAAgBqQ,EAASrQ,EAAMY,OAAOxG,QAChDuU,WAAS,EACTC,QAAQ,KACR1N,WAAS,MAIf,kBAACgK,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,GAAIC,GAAI,GACE,WAAtBxJ,EAAWnH,QAAuB,aACZ,WAAtBmH,EAAWnH,QACVmH,EAAW7G,QAAQD,WAAWsG,OAAS,GACrC,kBAAC,GAAD,CAAWtG,WAAY8G,EAAW7G,QAAQD,WAAYsD,UAAQ,MAItE,kBAACkR,GACK,CAAEL,eAAcC,aAAYC,eAAcH,aAAYI,cAMlE,IAAMe,GAAgB9S,cAAW,SAAClG,GAAD,OAC/BmG,aAAa,CACX8S,iBAAkB,CAChB3S,OAAQ,OACR/D,QAAS,OACTC,eAAgB,SAChBC,WAAY,eAKlB,SAASyW,GACP3Z,GAIA,IAAMyH,EAAUgS,KACVvO,EAAapH,IAEjBuU,EAMErY,EANFqY,mBACAE,EAKEvY,EALFuY,aACAC,EAIExY,EAJFwY,WACAC,EAGEzY,EAHFyY,aACAH,EAEEtY,EAFFsY,WACAI,EACE1Y,EADF0Y,SAOF,OAJAtW,qBAAU,WACRiW,EAAmBnN,GAAoC,WAAtBA,EAAWnH,UAC3C,CAACsU,EAAoBnN,IAGtB,oCACE,kBAACkJ,GAAA,EAAD,CAAMC,WAAS,EAACC,QAAQ,SAASkF,UAAU,OACzC,kBAACpF,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,GAAIC,GAAI,GACE,WAAtBxJ,EAAWnH,QAAuB,aACZ,WAAtBmH,EAAWnH,QACVmH,EAAW7G,QAAQD,WAAWsG,OAAS,GACrC,kBAAC,GAAD,CACEtG,WAAY8G,EAAW7G,QAAQD,WAC/BsD,UAAQ,EACRC,SAAO,KAIf,kBAACyM,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,GAAIC,GAAI,GACrB,kBAACvM,GAAA,EAAD,CAAOC,UAAWX,EAAQiS,kBAA1B,0CAKJ,kBAACd,GACK,CAAEL,eAAcC,aAAYC,eAAcH,aAAYI,cAMlE,IAAMkB,GAAoBjT,cAAW,SAAClG,GAAD,OACnCmG,aAAa,CACXlG,KAAM,CACJsC,QAAS,OACTC,eAAgB,WAChBwS,UAAWhV,EAAMyG,QAAQ,IAE3B2S,OAAQ,CACNtI,WAAY9Q,EAAMyG,QAAQ,SAahC,SAAS0R,GAAY5Y,GACnB,IAAMyH,EAAUmS,KAERrB,EAAiEvY,EAAjEuY,aAAcC,EAAmDxY,EAAnDwY,WAAYC,EAAuCzY,EAAvCyY,aAAcH,EAAyBtY,EAAzBsY,WAAYI,EAAa1Y,EAAb0Y,SAC5D,OACE,yBAAKtQ,UAAWX,EAAQ/G,MACtB,kBAACmK,EAAA,EAAD,CACE6L,SAAU6B,EACV5V,QAAS6V,EACTpQ,UAAWX,EAAQoS,QAHrB,QAQA,kBAAChP,EAAA,EAAD,CACE6L,SAAU+B,EACV3N,QAAQ,YACRC,MAAM,UACNpI,QAAS2V,EACTlQ,UAAWX,EAAQoS,QAElBnB,IAMT,IAAMoB,GAAiBnT,cAAW,SAAClG,GAAD,OAChCmG,aAAa,CACXlG,KAAM,CACJmG,MAAO,OACPI,QAASxG,EAAMyG,QAAQ,IAEzB6S,aAAc,CACZtE,UAAWhV,EAAMyG,QAAQ,GACzB6P,aAActW,EAAMyG,QAAQ,IAE9B8S,SAAU,CACRhX,QAAS,OACTC,eAAgB,WAChBwS,UAAWhV,EAAMyG,QAAQ,IAE3B+S,SAAU,CACRlH,UAAW,QACXlM,MAAO,OACP7D,QAAS,OACTC,eAAgB,SAChBC,WAAY,eAsFHgX,OA7Ef,WACE,IAAMzS,EAAUqS,KADE,EAGkB7X,mBAAS,GAH3B,mBAGXkY,EAHW,KAGCC,EAHD,OAI4BnY,oBAAS,GAJrC,mBAIXoY,EAJW,KAIMhC,EAJN,KAKZiC,EARC,CAAC,sBAAuB,eAAgB,WAUzChC,EAAa,WACjB8B,GAAc,SAAAG,GAAc,OAAIA,EAAiB,MAG7C/B,EAAa,WACjB4B,GAAc,SAAAG,GAAc,OAAIA,EAAiB,MAGnD,OACE,oCACE,kBAAC,GAAD,CAAQhI,UAAU,IAClB,yBAAKnK,UAAWX,EAAQ/G,MACtB,kBAAC8Z,GAAA,EAAD,CAASL,WAAYA,GAClBG,EAAMzS,KAAI,SAAC4H,EAAO1J,GAGjB,OACE,kBAAC0U,GAAA,EAAD,eAAM5R,IAAK4G,GAH8B,IAIvC,kBAACiL,GAAA,EAH8C,GAGnBjL,QAKpC,6BACG0K,IAAeG,EAAM5P,OACpB,kBAACvC,GAAA,EAAD,CAAOC,UAAWX,EAAQwS,UACxB,kBAAC9J,EAAA,EAAD,CAAY/H,UAAWX,EAAQsS,cAA/B,eAKF,6BACkB,IAAfI,GACC,kBAAChC,GAAD,CACEG,WAAYA,EACZD,mBAAoBA,EACpBE,cAAc,EACdC,WAAYA,EACZC,cAAe4B,GAAkC,IAAfF,EAClCzB,SAAUyB,IAAeG,EAAM5P,OAAS,EAAI,SAAW,SAG3C,IAAfyP,GACC,kBAACpB,GAAD,CACEV,mBAAoBA,EACpBE,cAAc,EACdC,WAAYA,EACZC,cAAe4B,EACf/B,WAAYA,EACZI,SAAUyB,IAAeG,EAAM5P,OAAS,EAAI,SAAW,SAG3C,IAAfyP,GACC,kBAACR,GAAD,CACEtB,mBAAoBA,EACpBE,cAAc,EACdC,WAAYA,EACZC,cAAe4B,EACf/B,WAAYA,EACZI,SAAUyB,IAAeG,EAAM5P,OAAS,EAAI,SAAW,cC9XzE,IAMe9J,gBANS,SAACC,GACvB,MAAO,CACLC,mBAAoBD,EAAOnB,YAAYoB,sBAIH,GAAzBF,EA1CR,SAAaZ,GAAiC,IAC3Cc,EAAuBd,EAAvBc,mBACFL,EACJK,GACAA,EAAmBpB,aAC0B,SAA7CoB,EAAmBpB,YAAYF,UAC3BZ,EACAU,EACN,OACE,kBAACqb,EAAA,EAAD,CAAela,MAAOA,GACpB,kBAACma,EAAA,EAAD,MACA,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOC,KAAK,YAAYC,OAAK,EAAC1D,UAAW8C,KACzC,kBAAC,IAAD,CAAOW,KAAK,YAAYC,OAAK,EAAC1D,UAAW2D,KACzC,kBAAC,IAAD,CAAOF,KAAK,kBAAkBC,OAAK,EAAC1D,UAAW2D,KAC/C,kBAAC,IAAD,CAAOF,KAAK,yBAAyBzD,UAAW2D,KAChD,kBAAC,IAAD,CAAOF,KAAK,SAASC,OAAK,GACxB,oCACE,kBAAC,GAAD,MACA,kBAAC,GAAD,CAAOhF,WAAS,MAGpB,kBAAC,IAAD,CAAO+E,KAAK,YAAYC,OAAK,GAC3B,oCACE,kBAAC,GAAD,MACA,kBAAC,GAAD,CAAUhF,WAAS,MAGvB,kBAAC,IAAD,CAAO+E,KAAK,IAAIzD,UAAW4D,W,mBCbtBC,gBAAkC,CAC/CrF,YAnBkB,WAGD,IAFjBsF,EAEgB,uDAFK,CAAEvb,YAAY,GACnCwb,EACgB,uCAChB,OAAQA,EAAOpc,MACb,IAAK,MACH,OAAO,eAAKmc,EAAZ,CAAmBpG,KAAMqG,EAAOrG,KAAM3V,WAAOkE,IAC/C,IAAK,eACH,OAAO,eACF6X,EADL,CAEEvb,WAAYwb,EAAOxb,aAEvB,IAAK,YACH,OAAO,eAAKub,EAAZ,CAAmBpG,UAAMzR,EAAWlE,MAAOgc,EAAOhc,QAEtD,OAAO+b,KCGMD,gBAAyC,CACtDna,mBAnByB,WAGD,IAFxBoa,EAEuB,uDAFK,CAAEvb,YAAY,GAC1Cwb,EACuB,uCACvB,OAAQA,EAAOpc,MACb,IAAK,kBACH,OAAO,eAAKmc,EAAZ,CAAmBxb,YAAayb,EAAOzb,YAAaP,WAAOkE,IAC7D,IAAK,2BACH,OAAO,eACF6X,EADL,CAEEvb,WAAYwb,EAAOxb,aAEvB,IAAK,wBACH,OAAO,eAAKub,EAAZ,CAAmBxb,iBAAa2D,EAAWlE,MAAOgc,EAAOhc,QAE7D,OAAO+b,KCpBME,gBACbH,aAA2B,CACzBpF,WACAnW,iBAEF2b,aAAgBC,OCLlBC,IAAStM,OACP,kBAAC,IAAD,CAAUuM,MAAOA,IACf,kBAAC,GAAD,OAEFC,SAASC,cAAc,Y","file":"static/js/main.f6cf3a99.chunk.js","sourcesContent":["import red from '@material-ui/core/colors/red'\nimport { createMuiTheme } from '@material-ui/core/styles'\n\nconst darkTheme = createMuiTheme({\n  palette: {\n    type: 'dark',\n    primary: {\n      main: '#556cd6'\n    },\n    secondary: {\n      main: '#FF4081'\n    },\n    error: {\n      main: red.A400\n    }\n  }\n})\n\nconst lightTheme = createMuiTheme({\n  palette: {\n    type: 'light',\n    primary: {\n      main: '#556cd6'\n    },\n    secondary: {\n      main: '#FF4081'\n    },\n    error: {\n      main: red.A400\n    }\n  }\n})\nexport { darkTheme, lightTheme }\n","import { ThunkAction, ThunkDispatch } from 'redux-thunk'\nimport { AnyAction } from 'redux'\n\nimport { Preferences, PreferencesError } from '../../types/Preferences'\n\nconst DEFAULT_PREFERENCES: Preferences = {\n  dark_mode: 'false'\n}\n\nexport interface SetAction {\n  type: 'SET_PREFERENCES'\n  preferences: Preferences\n}\nexport interface SetFetcing {\n  type: 'SET_FETCHING_PREFERENCES'\n  isFetching: boolean\n}\nexport interface SetError {\n  type: 'SET_ERROR_PREFERENCES'\n  error: PreferencesError\n}\n\nexport type Action = SetAction | SetFetcing | SetError\n\nexport const set = (preferences: Preferences): SetAction => {\n  return { type: 'SET_PREFERENCES', preferences }\n}\nexport const setError = (error: PreferencesError): SetError => {\n  return { type: 'SET_ERROR_PREFERENCES', error }\n}\nexport const isFetching = (isFetching: boolean): SetFetcing => {\n  return { type: 'SET_FETCHING_PREFERENCES', isFetching }\n}\n\nexport const getPreferences = (): ThunkAction<\n  Promise<void>,\n  {},\n  {},\n  AnyAction\n> => {\n  return async (dispatch: ThunkDispatch<{}, {}, AnyAction>): Promise<void> => {\n    return new Promise<void>((resolve, rject) => {\n      dispatch(isFetching(true))\n\n      const preferences = localStorage && localStorage.getItem('preferences')\n      if (!preferences) {\n        dispatch(set(DEFAULT_PREFERENCES))\n      } else {\n        dispatch(set(JSON.parse(preferences)))\n      }\n      dispatch(isFetching(false))\n      resolve()\n    })\n  }\n}\n\nexport const setPreferences = (\n  preferences: Preferences\n): ThunkAction<Promise<void>, {}, {}, AnyAction> => {\n  return async (dispatch: ThunkDispatch<{}, {}, AnyAction>): Promise<void> => {\n    return new Promise<void>((resolve, rject) => {\n      dispatch(isFetching(true))\n\n      if (!preferences) {\n        dispatch(set(DEFAULT_PREFERENCES))\n      } else {\n        localStorage &&\n          localStorage.setItem('preferences', JSON.stringify(preferences))\n        dispatch(set(preferences))\n      }\n      dispatch(isFetching(false))\n      resolve()\n    })\n  }\n}\n","import React, { useState, useEffect } from 'react'\nimport { withRouter, RouteComponentProps } from 'react-router-dom'\nimport { connect } from 'react-redux'\nimport { ThunkDispatch } from 'redux-thunk'\nimport { withStyles } from '@material-ui/core/styles'\nimport Menu, { MenuProps } from '@material-ui/core/Menu'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport Switch from '@material-ui/core/Switch'\n\nimport { RootState } from '../redux'\nimport { PreferencesServiceProps } from '../redux/preferences/reducers'\nimport { getPreferences, setPreferences } from '../redux/preferences/actions'\nimport { Preferences } from '../types/Preferences'\n\ninterface DispatchProps {\n  getPreferences: () => void\n  setPreferences: (preferences: Preferences) => void\n}\n\nconst StyledMenu = withStyles({\n  paper: {\n    border: '1px solid #d3d4d5'\n  }\n})((props: MenuProps) => (\n  <Menu\n    elevation={0}\n    getContentAnchorEl={null}\n    anchorOrigin={{\n      vertical: 'bottom',\n      horizontal: 'center'\n    }}\n    transformOrigin={{\n      vertical: 'top',\n      horizontal: 'center'\n    }}\n    {...props}\n  />\n))\n\nconst StyledMenuItem = withStyles(theme => ({\n  root: {\n    // '&:focus': {\n    //   backgroundColor: theme.palette.primary.main,\n    //   '& .MuiListItemIcon-root, & .MuiListItemText-primary': {\n    //     color: theme.palette.common.white\n    //   }\n    // }\n  }\n}))(MenuItem)\n\ninterface UserMenuProps {\n  anchorEl: HTMLElement | null\n  setAnchorEl: React.Dispatch<React.SetStateAction<HTMLElement | null>>\n}\ntype Props = PreferencesServiceProps &\n  DispatchProps &\n  RouteComponentProps &\n  UserMenuProps\n\nfunction UserMenu(props: Props) {\n  // const [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null)\n  const {\n    anchorEl,\n    setAnchorEl,\n    preferencesService,\n    getPreferences,\n    setPreferences,\n    history\n  } = props\n\n  const [useDarkTheme, setUseDarkTheme] = useState<null | boolean>(null)\n\n  useEffect(() => {\n    getPreferences()\n  }, [getPreferences])\n\n  useEffect(() => {\n    if (!preferencesService.isFetching && preferencesService.preferences) {\n      if (useDarkTheme === null) {\n        setUseDarkTheme(\n          preferencesService.preferences.dark_mode === 'true' ? true : false\n        )\n      }\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [preferencesService])\n\n  useEffect(() => {\n    if (\n      preferencesService &&\n      preferencesService.preferences &&\n      useDarkTheme !== null &&\n      (preferencesService.preferences.dark_mode === 'true' ? true : false) !==\n        useDarkTheme\n    ) {\n      setPreferences({ dark_mode: useDarkTheme ? 'true' : 'false' })\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [useDarkTheme])\n\n  const handleClose = () => {\n    setAnchorEl(null)\n  }\n\n  return (\n    <>\n      <StyledMenu\n        id=\"user--menu\"\n        anchorEl={anchorEl}\n        keepMounted\n        open={Boolean(anchorEl)}\n        onClose={handleClose}\n      >\n        <StyledMenuItem\n          onClick={() => {\n            history.push('/login')\n            handleClose()\n          }}\n        >\n          <ListItemText primary=\"Sign in\" />\n        </StyledMenuItem>\n\n        <StyledMenuItem\n          onClick={() => {\n            history.push('/register')\n            handleClose()\n          }}\n        >\n          <ListItemText primary=\"Register\" />\n        </StyledMenuItem>\n\n        <StyledMenuItem onClick={() => setUseDarkTheme(prev => !prev)}>\n          <ListItemText>\n            <div\n              style={{\n                display: 'flex',\n                justifyContent: 'space-between',\n                alignItems: 'center'\n              }}\n            >\n              <span>Dark Theme</span>\n              <Switch\n                checked={\n                  useDarkTheme === null || useDarkTheme === undefined\n                    ? false\n                    : useDarkTheme\n                }\n                value=\"useDarkTheme\"\n                inputProps={{ 'aria-label': 'secondary checkbox' }}\n              />\n            </div>\n          </ListItemText>\n        </StyledMenuItem>\n      </StyledMenu>\n    </>\n  )\n}\n\nconst mapStateToProps = (states: RootState): PreferencesServiceProps => {\n  return {\n    preferencesService: states.preferences.preferencesService\n  }\n}\n\nconst mapDispatchToProps = (\n  dispatch: ThunkDispatch<{}, {}, any>\n): DispatchProps => {\n  return {\n    getPreferences: () => dispatch(getPreferences()),\n    setPreferences: (preferences: Preferences) =>\n      dispatch(setPreferences(preferences))\n  }\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(withRouter(UserMenu))\n","import { useEffect, useState } from 'react'\n\nimport { AppDatabase } from '../appDatabase'\nimport { Service } from '../types/Service'\nimport { Cart } from '../types/Cart'\nimport { LineItem, Product } from '../types/Product'\n\nconst db = new AppDatabase()\n\nconst useCartService = () => {\n  const [result, setResult] = useState<Service<Cart>>({\n    status: 'loading'\n  })\n  useEffect(() => {\n    db.cart\n      .toArray()\n      .then(line_items =>\n        setResult({ status: 'loaded', payload: { line_items: line_items } })\n      )\n      .catch(e => {\n        // console.warn('[useCartService] caught error:', e)\n        setResult({ status: 'error', error: e })\n      })\n\n    db.on('changes', changes => {\n      changes.find(change => change.table === 'cart') &&\n        db.cart\n          .toArray()\n          .then(line_items => {\n            console.log('[useCartService] db changes!! ')\n            setResult({ status: 'loaded', payload: { line_items: line_items } })\n          })\n          .catch(e => {\n            // console.warn('[useCartService] caught error:', e)\n            setResult({ status: 'error', error: e })\n          })\n    })\n  }, [])\n\n  return result\n}\n\nconst getCartItemCount = () => {\n  return db.cart.count().catch(e => {\n    console.warn('[useCartItemCount] caught error:', e)\n    return 0\n  })\n}\n\nconst useCartItemCount = () => {\n  const [itemCount, setItemCount] = useState(0)\n\n  useEffect(() => {\n    getCartItemCount().then(count => setItemCount(count))\n\n    db.on('changes', changes => {\n      changes.find(change => change.table === 'cart') &&\n        getCartItemCount().then(count => setItemCount(count))\n    })\n  }, [])\n\n  return itemCount\n}\n\nconst addToCart = (product: Product) => {\n  let line_item: LineItem = {\n    ...product,\n    product_id: product.id,\n    quantity: 1,\n    total: parseFloat(product.ws_price),\n    selected_unit: 'CS'\n  }\n  delete line_item.id // delete id field that moved to product_id so indexDB will auto-increment and so cart items will order correctly.\n\n  db.cart\n    .add(line_item)\n    .catch(error => console.warn('[addToCart] caught error:', error))\n}\n\nconst removeItemFromCart = (index: number) => {\n  db.cart\n    .delete(index)\n    .catch(error => console.warn('[removeItemFromCart] caught error:', error))\n}\n\nconst emptyCart = () => {\n  db.cart.clear().catch(function(err) {\n    console.warn('[emptyCart] caught error:', err)\n  })\n}\n\nconst updateLineItem = (line_item: LineItem) => {\n  db.cart\n    .update(line_item.id, line_item)\n    .catch(error => console.warn('[updateLineItem] caught error:', error))\n}\n\nexport {\n  useCartService,\n  useCartItemCount,\n  addToCart,\n  removeItemFromCart,\n  emptyCart,\n  updateLineItem\n}\n","import Dexie from 'dexie'\nimport 'dexie-observable'\n\nimport { LineItem } from './types/Product'\n\nexport class AppDatabase extends Dexie {\n  cart: Dexie.Table<LineItem, number>\n\n  constructor() {\n    super('SortaCartDatabase')\n    this.version(1).stores({\n      cart: '++id,&product_id'\n    })\n    this.cart = this.table('cart')\n  }\n}\n","import { Product } from './types/Product'\nimport { User } from './types//User'\nimport { Member } from './types/Member'\n\nexport type PaymentStatus =\n  | 'balance_due'\n  | 'credit_owed'\n  | 'failed'\n  | 'paid'\n  | 'void'\nexport type ShipmentStatus =\n  | 'backorder'\n  | 'canceled'\n  | 'partial'\n  | 'pending'\n  | 'ready'\n  | 'shipped'\nexport type OrderStatus =\n  | 'new'\n  | 'pending'\n  | 'needs_review'\n  | 'void'\n  | 'complete'\n  | 'archived'\n\nexport interface Order {\n  id: number | string\n  status: OrderStatus\n  payment_status: PaymentStatus\n  shipment_status: ShipmentStatus\n  total: number\n  name: string\n  email: string\n  phone: string\n  address?: string\n  notes?: string\n  subtotal?: number\n  item_count: number\n  email_sent?: boolean\n  history?: object\n  createdAt: string\n  updatedAt: string\n  OrderLineItems: LineItem[]\n  UserId?: string\n  User?: User\n  Member?: Member\n}\n\nexport type PartialOrder = Partial<Order>\n\nexport interface OrderRouterProps {\n  id: string\n}\n\nexport interface LineItem {\n  id?: string\n  description: string\n  quantity: number\n  selected_unit?: string\n  price: number\n  total: number\n  kind: string\n  vendor?: string\n  WholesaleOrderId?: number\n  OrderId?: number\n  data?: { product?: Product }\n}\n\nexport const API_HOST: string =\n  process.env.NODE_ENV === 'production'\n    ? 'https://api.marshcoop.org'\n    : 'http://localhost:3000'\n\nexport const TAX_RATE = 0.06175\nexport const TAX_RATE_STRING = `${(TAX_RATE * 100).toFixed(3)}%`\n","import React from 'react'\nimport { withRouter, RouteComponentProps } from 'react-router-dom'\nimport { createStyles, Theme, makeStyles } from '@material-ui/core/styles'\nimport Table from '@material-ui/core/Table'\nimport TableBody from '@material-ui/core/TableBody'\nimport TableCell from '@material-ui/core/TableCell'\nimport TableHead from '@material-ui/core/TableHead'\nimport TableRow from '@material-ui/core/TableRow'\nimport TableFooter from '@material-ui/core/TableFooter'\nimport Paper from '@material-ui/core/Paper'\nimport Tooltip from '@material-ui/core/Tooltip'\nimport Button from '@material-ui/core/Button'\nimport TextField from '@material-ui/core/TextField'\nimport Select from '@material-ui/core/Select'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport IconButton from '@material-ui/core/IconButton'\nimport ClearIcon from '@material-ui/icons/Clear'\n\nimport {\n  // useCartService,\n  // emptyCart,\n  updateLineItem,\n  removeItemFromCart\n} from '../services/useCartService'\nimport { LineItem } from '../types/Product'\nimport { TAX_RATE, TAX_RATE_STRING } from '../constants'\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      width: '100%',\n      overflowX: 'auto',\n      height: '100%'\n    },\n    table: {\n      maxWidth: '95vw',\n      padding: theme.spacing(1),\n      borderCollapse: 'separate',\n      '& td': {\n        border: 'none'\n      }\n    },\n    qtyinput: {\n      width: '50px'\n    }\n  })\n)\n\nfunction usdFormat(num: number | string) {\n  if (typeof num === 'string') {\n    return `$${parseFloat(num).toFixed(2)}`\n  } else {\n    return `$${num.toFixed(2)}`\n  }\n}\n\nfunction subtotal(items: LineItem[]) {\n  return items.map(({ total }) => total).reduce((sum, i) => sum + i, 0)\n}\n\nfunction liTotal(line_item: LineItem): number {\n  return line_item.selected_unit === 'EA' && line_item.u_price\n    ? line_item.quantity * parseFloat(line_item.u_price)\n    : line_item.quantity * parseFloat(line_item.ws_price)\n}\n\nfunction liPkSize(line_item: LineItem): string {\n  const pksize = []\n  line_item.pk && line_item.pk !== 1 && pksize.push(line_item.pk)\n  line_item.size && pksize.push(line_item.size)\n  return pksize.join(' / ')\n}\n\ninterface CartTableProps {\n  line_items: LineItem[]\n  emptyCartAndCloseDrawer?: (\n    event: React.MouseEvent<HTMLButtonElement, MouseEvent>\n  ) => void\n  checkout?: boolean\n  summary?: boolean\n}\n\nfunction CartTable(props: CartTableProps & RouteComponentProps) {\n  const classes = useStyles()\n\n  const { checkout, summary } = props\n  const invoiceSubtotal = subtotal(props.line_items)\n  const invoiceTaxes = TAX_RATE * invoiceSubtotal\n  const invoiceTotal = invoiceTaxes + invoiceSubtotal\n\n  const handleUnitChange = (line_item: LineItem, unit: string) => {\n    line_item.selected_unit = unit\n    line_item.total = liTotal(line_item)\n    updateLineItem(line_item)\n  }\n\n  const handleQtyChange = (line_item: LineItem, quantity: number) => {\n    line_item.quantity = quantity > 0 ? quantity : 1\n    line_item.total = liTotal(line_item)\n    updateLineItem(line_item)\n  }\n\n  const removeLineItem = (id: number) => {\n    removeItemFromCart(id)\n  }\n\n  return (\n    <Paper className={classes.root}>\n      <Table className={classes.table} aria-label=\"cart\">\n        <TableHead>\n          <TableRow>\n            <TableCell align=\"center\"></TableCell>\n            <TableCell>Description</TableCell>\n            <TableCell align=\"right\">Price</TableCell>\n            <TableCell align=\"center\">Unit</TableCell>\n            <TableCell align=\"right\">Qty.</TableCell>\n            <TableCell align=\"right\">Total</TableCell>\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {props.line_items.map((line_item, idx) => (\n            <TableRow key={`li${idx}`}>\n              <TableCell align=\"center\">\n                {!summary && (\n                  <Tooltip\n                    aria-label=\"remove line item\"\n                    title=\"REMOVE LINE ITEM\"\n                  >\n                    <IconButton\n                      aria-label=\"delete\"\n                      size=\"small\"\n                      onClick={(event: any) => removeLineItem(line_item.id)}\n                    >\n                      <ClearIcon fontSize=\"inherit\" />\n                    </IconButton>\n                  </Tooltip>\n                )}\n              </TableCell>\n              <TableCell>\n                {line_item.name} {line_item.description}\n              </TableCell>\n              <TableCell align=\"right\">\n                <div>\n                  {line_item.selected_unit === 'EA' && line_item.u_price\n                    ? usdFormat(line_item.u_price)\n                    : usdFormat(line_item.ws_price)}\n                </div>\n                <div>{liPkSize(line_item)}</div>\n              </TableCell>\n              <TableCell align=\"center\">\n                {!summary ? (\n                  line_item.u_price &&\n                  line_item.u_price !== line_item.ws_price ? (\n                    <Select\n                      value={line_item.selected_unit}\n                      onChange={(event: any) =>\n                        handleUnitChange(line_item, event.target.value)\n                      }\n                      margin=\"dense\"\n                    >\n                      <MenuItem value=\"CS\">Case</MenuItem>\n                      <MenuItem value=\"EA\">Each</MenuItem>\n                    </Select>\n                  ) : line_item.unit_type === 'CS' ? (\n                    'Case'\n                  ) : (\n                    'Each'\n                  )\n                ) : (\n                  line_item.selected_unit\n                )}\n              </TableCell>\n              <TableCell align=\"right\">\n                {!summary ? (\n                  <TextField\n                    className={classes.qtyinput}\n                    type=\"number\"\n                    InputLabelProps={{\n                      shrink: true\n                    }}\n                    margin=\"dense\"\n                    fullWidth\n                    value={line_item.quantity}\n                    onChange={(event: any) =>\n                      handleQtyChange(line_item, event.target.value)\n                    }\n                    inputProps={{ min: '1', step: '1' }}\n                  />\n                ) : (\n                  line_item.quantity\n                )}\n              </TableCell>\n              <TableCell align=\"right\">{usdFormat(line_item.total)}</TableCell>\n            </TableRow>\n          ))}\n          <TableRow>\n            <TableCell rowSpan={3} colSpan={3} />\n            <TableCell>Subtotal</TableCell>\n            <TableCell align=\"right\">\n              {props.line_items && props.line_items.length}\n            </TableCell>\n            <TableCell align=\"right\">{usdFormat(invoiceSubtotal)}</TableCell>\n          </TableRow>\n          <TableRow>\n            <TableCell>Tax</TableCell>\n            <TableCell align=\"right\">{TAX_RATE_STRING}</TableCell>\n            <TableCell align=\"right\">{usdFormat(invoiceTaxes)}</TableCell>\n          </TableRow>\n          <TableRow>\n            <TableCell>Total</TableCell>\n            <TableCell align=\"right\" colSpan={2}>\n              <b>{usdFormat(invoiceTotal)}</b>\n            </TableCell>\n          </TableRow>\n        </TableBody>\n        {!summary && !checkout && (\n          <TableFooter>\n            <TableRow>\n              <TableCell colSpan={3} align=\"left\">\n                {props.emptyCartAndCloseDrawer && (\n                  <Button\n                    variant=\"contained\"\n                    color=\"secondary\"\n                    onClick={props.emptyCartAndCloseDrawer}\n                  >\n                    Empty Cart\n                  </Button>\n                )}\n              </TableCell>\n              <TableCell colSpan={3} align=\"right\">\n                <Button\n                  variant=\"contained\"\n                  color=\"primary\"\n                  onClick={() => props.history.push('/checkout')}\n                >\n                  Checkout\n                </Button>\n              </TableCell>\n            </TableRow>\n          </TableFooter>\n        )}\n      </Table>\n    </Paper>\n  )\n}\n\nexport default withRouter(CartTable)\n","import React from 'react'\nimport Drawer from '@material-ui/core/Drawer'\n\nimport { useCartService, emptyCart } from '../services/useCartService'\nimport CartTable from './CartTable'\n\ninterface CartDrawerProps {\n  open: boolean\n  setOpen: React.Dispatch<React.SetStateAction<boolean>>\n}\n\nfunction CartDrawer(props: CartDrawerProps) {\n  const { open, setOpen } = props\n  const cartResult = useCartService()\n\n  const emptyCartAndCloseDrawer = (\n    event: React.MouseEvent<HTMLButtonElement, MouseEvent>\n  ) => {\n    if (window.confirm('Are you sure?')) {\n      emptyCart()\n      setOpen(false)\n    }\n  }\n\n  return (\n    <Drawer anchor=\"right\" open={open} onClose={() => setOpen(!open)}>\n      {cartResult.status !== 'loaded' && 'Loading...'}\n      {cartResult.status === 'loaded' &&\n        cartResult.payload.line_items.length > 0 && (\n          <CartTable\n            line_items={cartResult.payload.line_items}\n            emptyCartAndCloseDrawer={emptyCartAndCloseDrawer}\n          />\n        )}\n    </Drawer>\n  )\n}\n\nexport default CartDrawer\n","import { PaymentStatus, ShipmentStatus } from '../types/Order'\n\nexport const ORDER_PAYMENT_STATUSES: PaymentStatus[] = [\n  'balance_due',\n  'credit_owed',\n  'failed',\n  'paid',\n  'void'\n]\n\nexport const ORDER_SHIPMENT_STATUSES: ShipmentStatus[] = [\n  'backorder',\n  'canceled',\n  'partial',\n  'pending',\n  'ready',\n  'shipped'\n]\n\nexport function dateMinSec(): string {\n  const date = new Date()\n  return `${date.getMinutes()}${date.getSeconds()}`\n}\n\n// export function tryGetDateTime(id: string) {\n//   try {\n//     return new Date(parseInt(id)).toLocaleString()\n//   } catch (e) {\n//     console.warn('tryGetDateTime caught error:', e)\n//     return ''\n//   }\n// }\n\nexport const API_HOST: string =\n  process.env.NODE_ENV === 'production'\n    ? 'https://api.marshcoop.org'\n    : 'http://localhost:3000'\n","import React, { useState, useEffect, createRef } from 'react'\nimport { withRouter, RouteComponentProps } from 'react-router-dom'\nimport MaterialTable, { Action } from 'material-table'\nimport Chip from '@material-ui/core/Chip'\nimport Badge from '@material-ui/core/Badge'\nimport IconButton from '@material-ui/core/IconButton'\nimport Tooltip from '@material-ui/core/Tooltip'\nimport Typography from '@material-ui/core/Typography'\nimport Button from '@material-ui/core/Button'\nimport ShoppingCartIcon from '@material-ui/icons/ShoppingCart'\nimport AddShoppingCartIcon from '@material-ui/icons/AddShoppingCart'\nimport RemoveShoppingCartIcon from '@material-ui/icons/RemoveShoppingCart'\nimport TagFacesIcon from '@material-ui/icons/TagFaces'\n\nimport UserMenu from './UserMenu'\nimport CartDrawer from './CartDrawer'\nimport { useCartItemCount, addToCart } from '../services/useCartService'\nimport { API_HOST } from '../util/utilz'\n\nconst PROPERTY_MAP: { [index: string]: string } = {\n  a: 'Artificial ingredients',\n  c: 'Low carb',\n  d: 'Dairy free',\n  f: 'Food Service items',\n  g: 'Gluten free',\n  k: 'Kosher',\n  l: 'Low sodium/no salt',\n  m: 'Non-GMO Project Verified',\n  og: 'Organic',\n  r: 'Refined sugar',\n  v: 'Vegan',\n  w: 'Wheat free',\n  ft: 'Fair Trade',\n  n: 'Natural',\n  s: 'Specialty Only',\n  y: 'Yeast free',\n  1: '100% organic',\n  2: '95%+ organic',\n  3: '70%+ organic'\n}\n\nfunction renderCodes(codes: string) {\n  return codes\n    .split(', ')\n    .map((code, idx) =>\n      PROPERTY_MAP[code] ? (\n        <Chip\n          label={PROPERTY_MAP[code]}\n          style={{ margin: 5 }}\n          size=\"small\"\n          key={`pprop${idx}`}\n        />\n      ) : (\n        ''\n      )\n    )\n}\n\nfunction DataTable(\n  props: RouteComponentProps<{ cat?: string; subcat?: string }>\n) {\n  let tableRef = createRef<any>()\n\n  // useEffect(() => {\n  //   // tableRef.current && tableRef.current.onQueryChange()\n  //   // console.log('tableRef.current', tableRef && tableRef.current)\n  // }, [tableRef])\n  const itemCount = useCartItemCount()\n\n  const [cartDrawerOpen, setCartDrawerOpen] = useState(false)\n  const [\n    userMenuAnchorEl,\n    setUserMenuAnchorEl\n  ] = React.useState<null | HTMLElement>(null)\n\n  const handleUserMenuClick = (event: React.MouseEvent<HTMLElement>) => {\n    setUserMenuAnchorEl(event.currentTarget)\n  }\n\n  const cartAction = {\n    icon: () => (\n      <Badge badgeContent={itemCount} max={99} color=\"primary\">\n        <ShoppingCartIcon />\n      </Badge>\n    ),\n    tooltip: 'Cart',\n    isFreeAction: true,\n    onClick: () => setCartDrawerOpen(!cartDrawerOpen)\n  }\n\n  const userAction = {\n    icon: () => <TagFacesIcon />,\n    tooltip: 'User',\n    isFreeAction: true,\n    onClick: handleUserMenuClick\n  }\n\n  const [actions, setActions] = useState<Action<any>[]>([userAction])\n\n  useEffect(() => {\n    if (itemCount) {\n      setActions([cartAction, userAction])\n    } else {\n      setActions([userAction])\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [itemCount]) // note: adding 'cartAction' and 'userAction' to dep array is not pleasant :/\n\n  const [categoryLookup, setCategoryLookup] = useState<object>(() => {\n    fetch(`${API_HOST}/categories`)\n      .then(response => response.json())\n      .then(result => setCategoryLookup(result))\n      .catch(console.warn)\n  })\n\n  const [subCategoryLookup, setSubCategoryLookup] = useState<object>(() => {\n    fetch(`${API_HOST}/sub_categories`)\n      .then(response => response.json())\n      .then(result => setSubCategoryLookup(result))\n      .catch(console.warn)\n  })\n\n  const catDefaultFilter = props.match &&\n    props.match.params &&\n    props.match.params.cat && [props.match.params.cat]\n  const subCatDefaultFilter = props.match &&\n    props.match.params &&\n    props.match.params.subcat && [props.match.params.subcat]\n\n  return (\n    <>\n      <MaterialTable\n        tableRef={tableRef}\n        columns={[\n          {\n            title: 'category',\n            field: 'category',\n            type: 'string',\n            lookup: categoryLookup,\n            filterPlaceholder: 'filter',\n            defaultFilter: catDefaultFilter\n          },\n          {\n            title: 'sub category',\n            field: 'sub_category',\n            type: 'string',\n            lookup: subCategoryLookup,\n            editComponent: arg => {\n              console.log('editComponent arg:', arg)\n              return <>subcat</>\n            },\n            filterPlaceholder: 'filter',\n            defaultFilter: subCatDefaultFilter\n          },\n          {\n            title: 'description',\n            field: 'description',\n            type: 'string',\n            filtering: false,\n            render: row => {\n              if (row.name) {\n                return `${row.name} -- ${row.description}`\n              } else {\n                return row.description\n              }\n            }\n          },\n          {\n            title: 'pk',\n            field: 'pk',\n            type: 'numeric',\n            filtering: false\n          },\n          { title: 'size', field: 'size', type: 'string', filtering: false },\n          {\n            title: 'unit type',\n            field: 'unit_type',\n            type: 'string',\n            lookup: { CS: 'Case', EA: 'Each' },\n            filterPlaceholder: 'filter'\n          },\n          {\n            title: 'price',\n            field: 'ws_price',\n            type: 'currency',\n            filtering: false\n          },\n          {\n            title: 'unit price',\n            field: 'u_price',\n            type: 'currency',\n            filtering: false,\n            render: row =>\n              row.ws_price !== row.u_price ? `$${row.u_price}` : ''\n          },\n          {\n            title: 'properties',\n            field: 'codes',\n            type: 'string',\n            lookup: PROPERTY_MAP,\n            filterPlaceholder: 'filter',\n            render: row => renderCodes(row.codes)\n          },\n          {\n            title: undefined,\n            field: undefined,\n            type: 'string',\n            render: row => {\n              const inCart = true\n              const label = inCart\n                ? 'add to shopping cart'\n                : 'remove from shopping cart'\n              return (\n                <Tooltip aria-label={label} title={label}>\n                  <IconButton color=\"secondary\" onClick={() => addToCart(row)}>\n                    {inCart ? (\n                      <AddShoppingCartIcon />\n                    ) : (\n                      <RemoveShoppingCartIcon />\n                    )}\n                  </IconButton>\n                </Tooltip>\n              )\n            }\n          },\n          { title: 'upc', field: 'upc_code', type: 'string', hidden: true },\n          // { title: 'unf', field: 'unf', type: 'string' },\n          { title: 'id', field: 'id', type: 'string', hidden: true }\n        ]}\n        data={query =>\n          new Promise((resolve, reject) => {\n            console.log('query:', query)\n            fetch(`${API_HOST}/products`, {\n              method: 'post',\n              headers: {\n                'Content-Type': 'application/json'\n              },\n              body: JSON.stringify(query)\n            })\n              .then(response => response.json())\n              .then(result => {\n                console.log('result', result)\n                resolve(result)\n              })\n              .catch(err => {\n                console.warn('onoz, caught err:', err)\n                return resolve({ data: [], page: 0, totalCount: 0 })\n              })\n          })\n        }\n        title={\n          <Button\n            variant=\"text\"\n            size=\"large\"\n            onClick={() => props.history.push('/')}\n          >\n            <Typography variant=\"h6\">MARSH COOP</Typography>\n          </Button>\n        }\n        options={{\n          headerStyle: { position: 'sticky', top: 0 },\n          filterCellStyle: { maxWidth: '132px' },\n          maxBodyHeight: 'calc(100vh - 133px)',\n          pageSize: 50,\n          pageSizeOptions: [50, 100, 500],\n          debounceInterval: 750,\n          filtering: true,\n          search: true,\n          emptyRowsWhenPaging: false\n        }}\n        actions={actions}\n      />\n      <CartDrawer open={cartDrawerOpen} setOpen={setCartDrawerOpen} />\n      <UserMenu anchorEl={userMenuAnchorEl} setAnchorEl={setUserMenuAnchorEl} />\n    </>\n  )\n}\n\nexport default withRouter(DataTable)\n","import React, { useState } from 'react'\nimport { withRouter, RouteComponentProps } from 'react-router-dom'\nimport AppBar from '@material-ui/core/AppBar'\nimport Toolbar from '@material-ui/core/Toolbar'\nimport IconButton from '@material-ui/core/IconButton'\nimport Typography from '@material-ui/core/Typography'\nimport Button from '@material-ui/core/Button'\nimport Fade from '@material-ui/core/Fade'\nimport Badge from '@material-ui/core/Badge'\nimport { createStyles, fade, Theme, makeStyles } from '@material-ui/core/styles'\nimport TagFacesIcon from '@material-ui/icons/TagFaces'\n// import SearchIcon from '@material-ui/icons/Search'\nimport ShoppingCartIcon from '@material-ui/icons/ShoppingCart'\n\nimport UserMenu from './UserMenu'\nimport { useCartItemCount } from '../services/useCartService'\nimport CartDrawer from './CartDrawer'\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      flexGrow: 1,\n      boxShadow: 'none'\n    },\n    toolbar: {\n      backgroundColor: theme.palette.background.default,\n      color: theme.palette.text.primary\n    },\n    menuButton: {\n      marginLeft: theme.spacing(2)\n    },\n    grow: {\n      flexGrow: 1\n      // display: 'none',\n      // [theme.breakpoints.up('sm')]: {\n      //   display: 'block'\n      // }\n    },\n    search: {\n      position: 'relative',\n      borderRadius: theme.shape.borderRadius,\n      backgroundColor: fade(theme.palette.common.white, 0.15),\n      '&:hover': {\n        backgroundColor: fade(theme.palette.common.white, 0.25)\n      },\n      marginLeft: 0,\n      width: '100%',\n      [theme.breakpoints.up('sm')]: {\n        marginLeft: theme.spacing(1),\n        width: 'auto'\n      }\n    },\n    searchIcon: {\n      width: theme.spacing(7),\n      height: '100%',\n      position: 'absolute',\n      pointerEvents: 'none',\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center'\n    },\n    inputRoot: {\n      color: 'inherit'\n    },\n    inputInput: {\n      padding: theme.spacing(1, 1, 1, 7),\n      transition: theme.transitions.create('width'),\n      width: '100%',\n      [theme.breakpoints.up('sm')]: {\n        width: 120,\n        '&:focus': {\n          width: 200\n        }\n      }\n    }\n  })\n)\n\ninterface NavBarProps {\n  showCart?: boolean\n  children?: React.ReactNode\n}\n\nfunction NavBar(props: NavBarProps & RouteComponentProps) {\n  const classes = useStyles()\n  const itemCount = useCartItemCount()\n\n  const { showCart } = props\n  const [cartDrawerOpen, setCartDrawerOpen] = useState(false)\n  const [userMenuAnchorEl, setUserMenuAnchorEl] = useState<null | HTMLElement>(\n    null\n  )\n\n  const handleUserMenuClick = (event: React.MouseEvent<HTMLElement>) => {\n    setUserMenuAnchorEl(event.currentTarget)\n  }\n\n  return (\n    <AppBar position=\"static\" className={classes.root}>\n      <Toolbar className={classes.toolbar}>\n        <div>\n          <Fade in>\n            <Button\n              variant=\"text\"\n              size=\"large\"\n              onClick={() => props.history.push('/')}\n            >\n              <Typography variant=\"h6\">MARSH COOP</Typography>\n            </Button>\n          </Fade>\n        </div>\n\n        {props.children || <div className={classes.grow}>&nbsp;</div>}\n\n        {/* <div className={classes.search}>\n          <div className={classes.searchIcon}>\n            <SearchIcon />\n          </div>\n          <InputBase\n            placeholder=\"Search…\"\n            classes={{\n              root: classes.inputRoot,\n              input: classes.inputInput\n            }}\n            inputProps={{ 'aria-label': 'search' }}\n          />\n        </div> */}\n\n        {showCart && itemCount > 0 && (\n          <IconButton\n            edge=\"end\"\n            className={classes.menuButton}\n            color=\"inherit\"\n            aria-label=\"show cart\"\n            onClick={() => setCartDrawerOpen(prev => !prev)}\n          >\n            <Badge badgeContent={itemCount} max={99} color=\"secondary\">\n              <ShoppingCartIcon />\n            </Badge>\n          </IconButton>\n        )}\n\n        <IconButton\n          edge=\"end\"\n          className={classes.menuButton}\n          color=\"inherit\"\n          aria-label=\"user menu\"\n          onClick={handleUserMenuClick}\n        >\n          <TagFacesIcon />\n        </IconButton>\n      </Toolbar>\n      <UserMenu anchorEl={userMenuAnchorEl} setAnchorEl={setUserMenuAnchorEl} />\n      <CartDrawer open={cartDrawerOpen} setOpen={setCartDrawerOpen} />\n    </AppBar>\n  )\n}\n\nexport default withRouter(NavBar)\n","import React, { useState, useEffect } from 'react'\nimport { withRouter, RouteComponentProps } from 'react-router-dom'\n// import Paper from '@material-ui/core/Paper'\nimport Typography from '@material-ui/core/Typography'\nimport Button from '@material-ui/core/Button'\nimport Grid from '@material-ui/core/Grid'\nimport Fade from '@material-ui/core/Fade'\nimport Zoom from '@material-ui/core/Zoom'\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight'\nimport { createStyles, Theme, makeStyles } from '@material-ui/core/styles'\n\nimport NavBar from './NavBar'\nimport { API_HOST } from '../constants'\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    gridRoot: {\n      width: '100%',\n      overflowX: 'auto',\n      minHeight: 'calc(100vh - 64px)',\n      padding: theme.spacing(2),\n      display: 'flex'\n    },\n    crumbz: {\n      display: 'flex',\n      flexDirection: 'row',\n      justifyContent: 'flex-start',\n      alignItems: 'center',\n      flexGrow: 1\n    },\n    gridBtn: {\n      width: '100%',\n      height: '100%',\n      background: theme.palette.background.paper,\n      '&:hover': {\n        textDecoration: 'underline',\n        cursor: 'pointer'\n      }\n    },\n    catHover: {\n      '&:hover': {\n        textDecoration: 'underline',\n        cursor: 'pointer'\n      }\n    },\n    catBtn: {\n      overflow: 'hidden',\n      overflowWrap: 'break-word',\n      hyphens: 'auto'\n    }\n  })\n)\n\nfunction Landing(props: RouteComponentProps) {\n  const classes = useStyles()\n\n  const [categories, setCategories] = useState<string[]>([])\n  const [selectedCat, setSelectedCat] = useState('')\n  const [subCategories, setSubCategories] = useState<\n    { name: string; label: string }[]\n  >([])\n\n  useEffect(() => {\n    fetch(`${API_HOST}/categories`)\n      .then(response => response.json())\n      .then(result => {\n        console.log('result', result)\n        setCategories(Object.keys(result))\n      })\n      .catch(err => {\n        console.warn('onoz, caught err:', err)\n        setCategories([])\n      })\n  }, [setCategories])\n\n  useEffect(() => {\n    fetch(`${API_HOST}/sub_categories`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({ categories: [selectedCat] })\n    })\n      .then(response => response.json())\n      .then(result => {\n        console.log('result', result)\n        setSubCategories(\n          Object.keys(result).map(name => ({\n            name,\n            label: name\n              .split(':')\n              .join(': ')\n              .split(',')\n              .join(', ')\n              .split('/')\n              .join(' / ')\n              .split('-')\n              .join(' - ')\n          }))\n        )\n      })\n      .catch(err => {\n        console.warn('onoz, caught err:', err)\n        setSubCategories([])\n      })\n  }, [selectedCat, setSubCategories])\n\n  return (\n    <>\n      <NavBar showCart>\n        {selectedCat && (\n          <div className={classes.crumbz}>\n            <Fade in>\n              <ChevronRightIcon fontSize=\"large\" />\n            </Fade>\n            <Fade in style={{ transitionDelay: '50ms' }}>\n              <Button\n                variant=\"text\"\n                size=\"large\"\n                onClick={() => setSelectedCat('')}\n              >\n                <Typography\n                  variant=\"h6\"\n                  className={selectedCat && classes.catHover}\n                >\n                  CATEGORIES\n                </Typography>\n              </Button>\n            </Fade>\n\n            <Fade in style={{ transitionDelay: '100ms' }}>\n              <ChevronRightIcon fontSize=\"large\" />\n            </Fade>\n            <Fade in style={{ transitionDelay: '150ms' }}>\n              <Typography variant=\"h6\">{selectedCat.toUpperCase()}</Typography>\n            </Fade>\n          </div>\n        )}\n      </NavBar>\n      {/* <Paper className={classes.root}> */}\n      <Grid container spacing={4} justify=\"center\" className={classes.gridRoot}>\n        {categories &&\n          !selectedCat &&\n          categories.map((i, idx) => (\n            <Zoom\n              in\n              style={{ transitionDelay: `${idx * 50}ms` }}\n              key={`lb${idx}`}\n            >\n              <Grid item xs={12} sm={4} md={3} lg={2}>\n                <Button\n                  className={classes.gridBtn}\n                  variant=\"outlined\"\n                  size=\"large\"\n                  key={`lb${idx}`}\n                  onClick={() => setSelectedCat(i)}\n                >\n                  <Typography variant=\"h5\" className={classes.catBtn}>\n                    {i}\n                  </Typography>\n                </Button>\n              </Grid>\n            </Zoom>\n          ))}\n\n        {categories.length > 0 && !selectedCat && (\n          <Zoom\n            in\n            style={{\n              transitionDelay: `${categories.length * 50}ms`\n            }}\n          >\n            <Grid item xs={12} sm={4} md={3} lg={3}>\n              <Button\n                className={classes.gridBtn}\n                variant=\"outlined\"\n                size=\"large\"\n                onClick={() => props.history.push('/products')}\n              >\n                <Typography variant=\"h5\" className={classes.catBtn}>\n                  See Everything\n                </Typography>\n              </Button>\n            </Grid>\n          </Zoom>\n        )}\n\n        {subCategories &&\n          selectedCat &&\n          subCategories.map((subCat, idx) => (\n            <Zoom\n              in\n              style={{ transitionDelay: `${idx * 50}ms` }}\n              key={`lb${idx}`}\n            >\n              <Grid item xs={12} sm={4} md={3}>\n                <Button\n                  className={classes.gridBtn}\n                  variant=\"outlined\"\n                  size=\"large\"\n                  key={`lb${idx}`}\n                  onClick={() =>\n                    props.history.push(\n                      `/products/${selectedCat}/${subCat.name}`\n                    )\n                  }\n                >\n                  <Typography variant=\"h5\" className={classes.catBtn}>\n                    {subCat.label}\n                  </Typography>\n                </Button>\n              </Grid>\n            </Zoom>\n          ))}\n\n        {subCategories.length > 0 && selectedCat && (\n          <Zoom\n            in\n            style={{\n              transitionDelay: `${subCategories.length * 50}ms`\n            }}\n          >\n            <Grid item xs={12} sm={4} md={3}>\n              <Button\n                className={classes.gridBtn}\n                variant=\"outlined\"\n                size=\"large\"\n                onClick={() => props.history.push(`/products/${selectedCat}`)}\n              >\n                <Typography variant=\"h5\" className={classes.catBtn}>\n                  See Everything\n                </Typography>\n              </Button>\n            </Grid>\n          </Zoom>\n        )}\n      </Grid>\n      {/* </Paper> */}\n    </>\n  )\n}\n\nexport default withRouter(Landing)\n","import { ThunkAction, ThunkDispatch } from 'redux-thunk'\nimport { AnyAction } from 'redux'\n\nimport { User, LoginError } from '../../types/User'\nimport { API_HOST } from '../../constants'\n\nexport interface SetAction {\n  type: 'SET'\n  user: User\n}\nexport interface SetFetcing {\n  type: 'SET_FETCHING'\n  isFetching: boolean\n}\nexport interface SetError {\n  type: 'SET_ERROR'\n  error: LoginError\n}\n\nexport type Action = SetAction | SetFetcing | SetError\n\nexport const set = (user: User): SetAction => {\n  return { type: 'SET', user }\n}\nexport const setError = (error: LoginError): SetError => {\n  return { type: 'SET_ERROR', error }\n}\nexport const isFetching = (isFetching: boolean): SetFetcing => {\n  return { type: 'SET_FETCHING', isFetching }\n}\n\nconst NULL_USER: User = {\n  id: undefined,\n  email: undefined,\n  token: undefined\n}\n\nexport const checkSession = (): ThunkAction<\n  Promise<void>,\n  {},\n  {},\n  AnyAction\n> => {\n  return async (dispatch: ThunkDispatch<{}, {}, AnyAction>): Promise<void> => {\n    return new Promise<void>(resolve => {\n      dispatch(isFetching(true))\n\n      const token = localStorage && localStorage.getItem('token')\n\n      if (!token) {\n        // reject('no token')\n        dispatch(isFetching(false))\n        dispatch(set({ email: undefined, token: undefined }))\n        resolve()\n        return\n      }\n\n      fetch(`${API_HOST}/check_session`, {\n        headers: { Authorization: `Bearer ${token}` }\n      })\n        .then(response => response.json())\n        .then(response => {\n          // console.log('check_session', response)\n          if (response.msg === 'ok' && response.user) {\n            dispatch(set(response.user))\n          } else {\n            dispatch(set(NULL_USER))\n          }\n        })\n        .catch(err => {\n          console.warn('check_session caught err:', err)\n          // hmm, maybe the API is just down? ...is it really necessary to NULL the user?\n          dispatch(set(NULL_USER))\n        })\n        .finally(() => {\n          dispatch(isFetching(false))\n          resolve()\n        })\n    })\n  }\n}\n\nexport const register = (\n  regKey: string,\n  password: string\n): ThunkAction<Promise<void>, {}, {}, AnyAction> => {\n  return async (dispatch: ThunkDispatch<{}, {}, AnyAction>): Promise<void> => {\n    return new Promise<void>(resolve => {\n      dispatch(isFetching(true))\n\n      fetch(`${API_HOST}/register`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({ regKey, password })\n      })\n        .then(response => response.json())\n        .then(response => {\n          // console.log('[session/actions] user login', response)\n          if (response.msg === 'ok' && response.user && response.user.token) {\n            localStorage && localStorage.setItem('token', response.user.token)\n            dispatch(set(response.user))\n          } else {\n            dispatch(setError({ error: 'error', reason: response.message }))\n          }\n        })\n        .catch(e => {\n          console.log('register error:', e)\n          dispatch(\n            setError({\n              error: 'error',\n              reason: 'unable to register right now :('\n            })\n          )\n        })\n        .finally(() => {\n          dispatch(isFetching(false))\n          resolve()\n        })\n    })\n  }\n}\n\nexport const login = (\n  email: string,\n  password: string\n): ThunkAction<Promise<void>, {}, {}, AnyAction> => {\n  return async (dispatch: ThunkDispatch<{}, {}, AnyAction>): Promise<void> => {\n    return new Promise<void>(resolve => {\n      dispatch(isFetching(true))\n\n      fetch(`${API_HOST}/login`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({ email, password })\n      })\n        .then(response => response.json())\n        .then(response => {\n          // console.log('[session/actions] user login', response)\n          if (response.msg === 'ok' && response.user && response.user.token) {\n            localStorage && localStorage.setItem('token', response.user.token)\n            dispatch(set(response.user))\n          } else {\n            dispatch(setError({ error: 'error', reason: response.message }))\n          }\n        })\n        .catch(e => {\n          console.log('login error:', e)\n          dispatch(\n            setError({ error: 'error', reason: 'unable to login right now :(' })\n          )\n        })\n        .finally(() => {\n          dispatch(isFetching(false))\n          resolve()\n        })\n    })\n  }\n}\n\nexport const logout = (): ThunkAction<Promise<void>, {}, {}, AnyAction> => {\n  return async (dispatch: ThunkDispatch<{}, {}, AnyAction>): Promise<void> => {\n    return new Promise<void>(resolve => {\n      dispatch(isFetching(true))\n\n      const token = localStorage && localStorage.getItem('token')\n      fetch(`${API_HOST}/logout`, {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`\n        }\n      })\n        .catch(console.warn)\n        .finally(() => {\n          localStorage && localStorage.removeItem('token')\n          dispatch(set(NULL_USER))\n          dispatch(isFetching(false))\n          resolve()\n        })\n    })\n  }\n}\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport { ThunkDispatch } from 'redux-thunk'\nimport { withRouter, RouteComponentProps } from 'react-router-dom'\nimport { Container, Button, TextField } from '@material-ui/core'\nimport Box from '@material-ui/core/Box'\nimport Typography from '@material-ui/core/Typography'\nimport { makeStyles } from '@material-ui/core/styles'\n\nimport { RootState } from '../redux'\nimport { login } from '../redux/session/actions'\nimport { UserServiceProps } from '../redux/session/reducers'\n\ninterface OwnProps {\n  onLoginFn?: () => void\n  showTitle?: boolean\n}\n\ninterface DispatchProps {\n  login: (email: string, password: string) => void\n}\n\ntype Props = UserServiceProps & OwnProps & DispatchProps & RouteComponentProps\n\nconst useStyles = makeStyles(theme => ({\n  form: {\n    width: '100%',\n    // minHeight: '100vh',\n    marginTop: theme.spacing(1),\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center'\n  },\n  title: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'flex-end'\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2)\n  }\n}))\n\nfunction Login(props: Props) {\n  const doLogin = (event: React.FormEvent) => {\n    event.preventDefault()\n    setError('')\n    const target = event.currentTarget as HTMLFormElement\n    const emailEl = target.elements.namedItem('email') as HTMLInputElement\n    const passwordEl = target.elements.namedItem('password') as HTMLInputElement\n\n    if (\n      emailEl &&\n      emailEl.value.length > 0 &&\n      passwordEl &&\n      passwordEl.value.length > 0\n    ) {\n      props.login(emailEl.value, passwordEl.value)\n    }\n  }\n\n  const { userService, showTitle, onLoginFn, history } = props\n  const classes = useStyles()\n  const [error, setError] = useState('')\n\n  // when userService changes, figure out if the page should redirect if a user is already logged in.\n  useEffect(() => {\n    if (userService.user && !userService.isFetching && userService.user.role) {\n      console.log('we gotta user!', userService.user)\n      onLoginFn ? onLoginFn() : history.push('/')\n    }\n    // else if (userService.user && !userService.isFetching) {\n    //   setError('o noz! error! ...hmm??')\n    // }\n  }, [userService, onLoginFn, history])\n\n  return (\n    <Container maxWidth=\"sm\">\n      <form onSubmit={doLogin} className={classes.form}>\n        {showTitle && (\n          <div className={classes.title}>\n            <Typography variant=\"h2\" display=\"block\">\n              Sign In\n            </Typography>\n          </div>\n        )}\n        <TextField\n          label=\"email\"\n          name=\"email\"\n          type=\"text\"\n          autoFocus\n          fullWidth\n          required\n        />\n        <TextField\n          label=\"password\"\n          name=\"password\"\n          type=\"password\"\n          fullWidth\n          required\n        />\n\n        <div>\n          <Button\n            type=\"submit\"\n            fullWidth\n            variant=\"contained\"\n            color=\"primary\"\n            disabled={props.userService.isFetching}\n            className={classes.submit}\n          >\n            Login\n          </Button>\n        </div>\n\n        <Box color=\"error.main\">\n          {props.userService.error && (\n            <>\n              <Typography variant=\"overline\" display=\"block\">\n                onoz! an error!\n              </Typography>\n              <Typography variant=\"body1\" display=\"block\" gutterBottom>\n                {props.userService.error.reason}\n              </Typography>\n            </>\n          )}\n          {error && (\n            <>\n              <Typography variant=\"overline\" display=\"block\">\n                onoz! an error!\n              </Typography>\n              <Typography variant=\"body1\" display=\"block\" gutterBottom>\n                {error}\n              </Typography>\n            </>\n          )}\n        </Box>\n      </form>\n    </Container>\n  )\n}\n\nconst mapStateToProps = (\n  states: RootState,\n  ownProps: OwnProps\n): UserServiceProps => {\n  return {\n    userService: states.session.userService\n  }\n}\n\nconst mapDispatchToProps = (\n  dispatch: ThunkDispatch<{}, {}, any>,\n  ownProps: OwnProps\n): DispatchProps => {\n  return {\n    login: (email, password) => dispatch(login(email, password))\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(Login))\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport { ThunkDispatch } from 'redux-thunk'\nimport { withRouter, RouteComponentProps } from 'react-router-dom'\nimport Container from '@material-ui/core/Container'\nimport Button from '@material-ui/core/Button'\nimport Box from '@material-ui/core/Box'\nimport Typography from '@material-ui/core/Typography'\nimport Radio from '@material-ui/core/Radio'\nimport RadioGroup from '@material-ui/core/RadioGroup'\nimport FormHelperText from '@material-ui/core/FormHelperText'\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\nimport FormControl from '@material-ui/core/FormControl'\nimport FormLabel from '@material-ui/core/FormLabel'\nimport FormGroup from '@material-ui/core/FormGroup'\nimport Checkbox from '@material-ui/core/Checkbox'\nimport TextField from '@material-ui/core/TextField'\nimport { makeStyles } from '@material-ui/core/styles'\n\nimport { RootState } from '../redux'\nimport { login } from '../redux/session/actions'\nimport { UserServiceProps } from '../redux/session/reducers'\n\ninterface OwnProps {\n  onRegisterFn?: () => void\n  showTitle?: boolean\n}\n\ninterface DispatchProps {\n  login: (email: string, password: string) => void\n}\n\ntype Props = UserServiceProps & OwnProps & DispatchProps & RouteComponentProps\n\nconst useStyles = makeStyles(theme => ({\n  form: {\n    width: '100%',\n    // minHeight: '100vh',\n    marginTop: theme.spacing(1),\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    '& .MuiFormHelperText-root': {\n      color: theme.palette.error.main,\n      textAlign: 'right'\n    }\n  },\n  title: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'flex-end'\n  },\n  notice: {\n    marginTop: theme.spacing(4),\n    marginBottom: theme.spacing(1)\n  },\n  formControl: {\n    margin: `${theme.spacing(2)}px 0`,\n    '& legend': {\n      fontSize: '1.25rem',\n      marginTop: theme.spacing(2),\n      marginBottom: theme.spacing(1)\n    }\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2)\n  }\n}))\n\nfunction Register(props: Props) {\n  const doLogin = (event: React.FormEvent) => {\n    event.preventDefault()\n    setError('')\n    const target = event.currentTarget as HTMLFormElement\n    const emailEl = target.elements.namedItem('email') as HTMLInputElement\n    const passwordEl = target.elements.namedItem('password') as HTMLInputElement\n\n    if (\n      emailEl &&\n      emailEl.value.length > 0 &&\n      passwordEl &&\n      passwordEl.value.length > 0\n    ) {\n      props.login(emailEl.value, passwordEl.value)\n    }\n  }\n\n  const { userService, showTitle, onRegisterFn, history } = props\n  const classes = useStyles()\n  const [error, setError] = useState('')\n\n  // when userService changes, figure out if the page should redirect if a user is already logged in.\n  useEffect(() => {\n    if (userService.user && !userService.isFetching && userService.user.role) {\n      console.log('we gotta user!', userService.user)\n      onRegisterFn ? onRegisterFn() : history.push('/')\n    }\n    // else if (userService.user && !userService.isFetching) {\n    //   setError('o noz! error! ...hmm??')\n    // }\n  }, [userService, onRegisterFn, history])\n\n  return (\n    <Container maxWidth=\"sm\">\n      <form onSubmit={doLogin} className={classes.form}>\n        {showTitle && (\n          <div className={classes.title}>\n            <Typography variant=\"h2\" display=\"block\">\n              Register\n            </Typography>\n          </div>\n        )}\n        <TextField\n          label=\"email\"\n          name=\"email\"\n          type=\"text\"\n          helperText=\"Required\"\n          autoFocus\n          fullWidth\n          required\n        />\n        <TextField\n          label=\"name\"\n          name=\"name\"\n          type=\"text\"\n          helperText=\"Required\"\n          fullWidth\n          required\n        />\n        <TextField\n          label=\"phone\"\n          name=\"phone\"\n          type=\"phone\"\n          helperText=\"Required\"\n          fullWidth\n          required\n        />\n        <TextField label=\"address\" name=\"address\" type=\"text\" fullWidth />\n\n        <p className={classes.notice}>\n          <i>\n            By purchasing a share in the co-op, I understand that I am an equal\n            owner in the enterprise and am eligible to vote on co-op matters and\n            in board elections and to make proposals for the use of the kitchen\n            and event space. I agree to pay for and pick up my groceries in a\n            timely manner and to collaborate with others for the benefit of my\n            co-members and the community at large. I understand that Member\n            shares cost $100 and I can request a subsidy or contribute to\n            subsidies for others.\n          </i>\n        </p>\n\n        <FormControl component=\"fieldset\" className={classes.formControl}>\n          <FormLabel component=\"legend\">Purchase Share:</FormLabel>\n          <RadioGroup\n            aria-label=\"freq\"\n            name=\"freq\"\n            // value={value}\n            // onChange={handleChange}\n          >\n            <FormControlLabel\n              value=\"whole\"\n              control={<Radio />}\n              label=\"I am purchasing a share for $100.\"\n            />\n            <FormControlLabel\n              value=\"requestsubsidy\"\n              control={<Radio />}\n              label=\"I can pay some for my share and am requesting a subsidy.\"\n            />\n            <FormControlLabel\n              value=\"requestsubsidy\"\n              control={<Radio />}\n              label=\"I can pay $100 and would like to pay an additional amount to\n              subsidize others.\"\n            />\n          </RadioGroup>\n          <FormHelperText>Required</FormHelperText>\n        </FormControl>\n\n        <FormControl component=\"fieldset\" className={classes.formControl}>\n          <FormLabel component=\"legend\">\n            I am interested in ordering groceries:\n          </FormLabel>\n          <RadioGroup\n            aria-label=\"freq\"\n            name=\"freq\"\n            // value=\"freq\"\n            // onChange={handleChange}\n          >\n            <FormControlLabel\n              value=\"1week\"\n              control={<Radio />}\n              label=\"Once a week\"\n            />\n            <FormControlLabel\n              value=\"2month\"\n              control={<Radio />}\n              label=\"Twice a month\"\n            />\n            <FormControlLabel\n              value=\"1month\"\n              control={<Radio />}\n              label=\"Once a month\"\n            />\n          </RadioGroup>\n          <FormHelperText>Required</FormHelperText>\n        </FormControl>\n\n        <FormControl component=\"fieldset\" className={classes.formControl}>\n          <FormLabel component=\"legend\">Check your preference below:</FormLabel>\n          <RadioGroup\n            aria-label=\"freq\"\n            name=\"freq\"\n            // value={value}\n            // onChange={handleChange}\n          >\n            <FormControlLabel\n              value=\"online\"\n              control={<Radio />}\n              label=\" I have Internet access and would like to order directly from the\n            grocery catalog online.\"\n            />\n            <FormControlLabel\n              value=\"inperson\"\n              control={<Radio />}\n              label=\"I would like to work with Co-op staff to develop my order in person.\"\n            />\n          </RadioGroup>\n          <FormHelperText>Required</FormHelperText>\n        </FormControl>\n\n        <FormControl component=\"fieldset\" className={classes.formControl}>\n          <FormLabel component=\"legend\">Check any that apply:</FormLabel>\n          <FormGroup>\n            <FormControlLabel\n              control={\n                <Checkbox\n                  // checked={false}\n                  onChange={console.log}\n                  value=\"worker-owner\"\n                />\n              }\n              label=\"I may be interested in participating in the co-op as a worker-owner.\"\n            />\n            <FormControlLabel\n              control={\n                <Checkbox\n                  // checked={false}\n                  onChange={console.log}\n                  value=\"producer-owner\"\n                />\n              }\n              label=\"I may be interested in participating in the co-op as a producer.\"\n            />\n            <FormControlLabel\n              control={\n                <Checkbox\n                  // checked={false}\n                  onChange={console.log}\n                  value=\"kitchenexp\"\n                />\n              }\n              label=\"I have kitchen experience.\"\n            />\n            <FormControlLabel\n              control={\n                <Checkbox\n                  // checked={false}\n                  onChange={console.log}\n                  value=\"farminggardeningexp\"\n                />\n              }\n              label=\"I have farming/gardening experience.\"\n            />\n            <FormControlLabel\n              control={\n                <Checkbox\n                  // checked={false}\n                  onChange={console.log}\n                  value=\"otherexp\"\n                />\n              }\n              label=\"I have other relevant experience.\"\n            />\n            <TextField\n              label=\"explain\"\n              name=\"otherexpexplain\"\n              type=\"text\"\n              multiline\n              rowsMax=\"10\"\n              fullWidth\n            />\n          </FormGroup>\n        </FormControl>\n\n        <FormControl component=\"fieldset\" className={classes.formControl}>\n          <FormLabel component=\"legend\">\n            MARSH Cooperative Bylaws and principles\n          </FormLabel>\n          <FormGroup>\n            <FormControlLabel\n              control={\n                <Checkbox\n                  // checked={false}\n                  onChange={console.log}\n                  value=\"agree\"\n                />\n              }\n              label=\"I understand that the MARSH Cooperative Bylaws and principles are\n            available online or upon request and that these documents guide the\n            co-op and its members.\"\n            />\n          </FormGroup>\n          <FormHelperText>Required</FormHelperText>\n        </FormControl>\n\n        <div>\n          <Button\n            type=\"submit\"\n            fullWidth\n            variant=\"contained\"\n            color=\"primary\"\n            disabled={props.userService.isFetching}\n            className={classes.submit}\n          >\n            Register\n          </Button>\n        </div>\n\n        <Box color=\"error.main\">\n          {props.userService.error && (\n            <>\n              <Typography variant=\"overline\" display=\"block\">\n                onoz! an error!\n              </Typography>\n              <Typography variant=\"body1\" display=\"block\" gutterBottom>\n                {props.userService.error.reason}\n              </Typography>\n            </>\n          )}\n          {error && (\n            <>\n              <Typography variant=\"overline\" display=\"block\">\n                onoz! an error!\n              </Typography>\n              <Typography variant=\"body1\" display=\"block\" gutterBottom>\n                {error}\n              </Typography>\n            </>\n          )}\n        </Box>\n      </form>\n    </Container>\n  )\n}\n\nconst mapStateToProps = (\n  states: RootState,\n  ownProps: OwnProps\n): UserServiceProps => {\n  return {\n    userService: states.session.userService\n  }\n}\n\nconst mapDispatchToProps = (\n  dispatch: ThunkDispatch<{}, {}, any>,\n  ownProps: OwnProps\n): DispatchProps => {\n  return {\n    login: (email, password) => dispatch(login(email, password))\n  }\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(withRouter(Register))\n","import React, { useState, useEffect } from 'react'\nimport { makeStyles, Theme, createStyles } from '@material-ui/core/styles'\nimport Stepper from '@material-ui/core/Stepper'\nimport Step from '@material-ui/core/Step'\nimport StepLabel from '@material-ui/core/StepLabel'\nimport Button from '@material-ui/core/Button'\nimport Tooltip from '@material-ui/core/Tooltip'\nimport IconButton from '@material-ui/core/IconButton'\nimport Typography from '@material-ui/core/Typography'\nimport Grid from '@material-ui/core/Grid'\nimport Paper from '@material-ui/core/Paper'\nimport TextField from '@material-ui/core/TextField'\nimport BackIcon from '@material-ui/icons/ArrowBack'\n\nimport NavBar from './NavBar'\nimport { useCartService } from '../services/useCartService'\nimport CartTable from './CartTable'\nimport Login from './Login'\nimport Register from './Register'\n\nconst registrationStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    opt: {\n      display: 'flex',\n      flexDirection: 'column',\n      padding: `${theme.spacing(4)}px 0`,\n      alignItems: 'center'\n    },\n    optItem: {\n      display: 'flex',\n      justifyContent: 'space-between',\n      alignItems: 'center',\n      marginBottom: theme.spacing(2),\n      maxWidth: '350px',\n      width: '50%',\n      [theme.breakpoints.down('xs')]: {\n        width: '100%',\n        maxWidth: 'unset'\n      }\n    }\n  })\n)\n\nfunction Registration(\n  props: {\n    handleNext: () => void\n    setCanGoToNextStep: React.Dispatch<React.SetStateAction<boolean>>\n  } & StepButtonsProps\n) {\n  const classes = registrationStyles()\n  const [opt, setOpt] = useState<'login' | 'register' | 'guest' | undefined>()\n\n  const {\n    setCanGoToNextStep,\n    handleNext,\n    backDisabled,\n    handleBack,\n    nextDisabled,\n    nextText\n  } = props\n\n  useEffect(() => {\n    setCanGoToNextStep(false)\n  }, [setCanGoToNextStep])\n\n  const onCanContinue = () => {\n    setCanGoToNextStep(true)\n    handleNext()\n  }\n\n  return (\n    <>\n      <Paper>\n        {opt && (\n          <Tooltip aria-label=\"back\" title=\"back\">\n            <IconButton onClick={() => setOpt(undefined)}>\n              <BackIcon />\n            </IconButton>\n          </Tooltip>\n        )}\n        {!opt && (\n          <div className={classes.opt}>\n            <div className={classes.optItem}>\n              <Typography variant=\"body1\" gutterBottom>\n                Already a member?\n              </Typography>\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={() => setOpt('login')}\n              >\n                Sign In\n              </Button>\n            </div>\n            <div className={classes.optItem}>\n              <Typography variant=\"body1\" gutterBottom>\n                Want to become a member?\n              </Typography>\n              <Button color=\"secondary\" onClick={() => setOpt('register')}>\n                Register\n              </Button>\n            </div>\n            <div className={classes.optItem}>\n              <Typography variant=\"body1\" gutterBottom>\n                ...or continue as a\n              </Typography>\n              <Button onClick={() => onCanContinue()}>Guest</Button>\n            </div>\n          </div>\n        )}\n\n        {opt === 'login' && <Login onLoginFn={onCanContinue} />}\n        {opt === 'register' && <Register onRegisterFn={onCanContinue} />}\n      </Paper>\n      <StepButtons\n        {...{ backDisabled, handleBack, nextDisabled, handleNext, nextText }}\n      />\n    </>\n  )\n}\n\nconst reviewStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    infoContainer: {\n      padding: theme.spacing(2),\n      height: '100%',\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n      '& .MuiFormHelperText-root': {\n        color: theme.palette.error.main,\n        textAlign: 'right'\n      }\n    }\n  })\n)\n\nfunction ReviewCart(\n  props: {\n    setCanGoToNextStep: React.Dispatch<React.SetStateAction<boolean>>\n  } & StepButtonsProps\n) {\n  const classes = reviewStyles()\n  const cartResult = useCartService()\n  const {\n    setCanGoToNextStep,\n    backDisabled,\n    handleBack,\n    nextDisabled,\n    handleNext,\n    nextText\n  } = props\n\n  const [email, setEmail] = useState('')\n  const [phone, setPhone] = useState('')\n  const [name, setName] = useState('')\n  const [address, setAddress] = useState('')\n  const [notes, setNotes] = useState('')\n\n  useEffect(() => {\n    setCanGoToNextStep && setCanGoToNextStep(!!(email && phone && name))\n  }, [setCanGoToNextStep, email, phone, name])\n\n  return (\n    <>\n      <Grid container justify=\"center\" direction=\"row\">\n        <Grid item xs={12} sm={6}>\n          <Paper className={classes.infoContainer}>\n            <TextField\n              label=\"email\"\n              name=\"email\"\n              type=\"text\"\n              value={email}\n              onChange={(event: any) => setEmail(event.target.value)}\n              autoFocus\n              fullWidth\n              helperText=\"Required\"\n              required\n            />\n            <TextField\n              label=\"name\"\n              name=\"name\"\n              type=\"text\"\n              value={name}\n              onChange={(event: any) => setName(event.target.value)}\n              fullWidth\n              helperText=\"Required\"\n              required\n            />\n            <TextField\n              label=\"phone\"\n              name=\"phone\"\n              type=\"phone\"\n              value={phone}\n              onChange={(event: any) => setPhone(event.target.value)}\n              fullWidth\n              helperText=\"Required\"\n              required\n            />\n            <TextField\n              label=\"address\"\n              name=\"address\"\n              type=\"text\"\n              value={address}\n              onChange={(event: any) => setAddress(event.target.value)}\n              fullWidth\n            />\n            <TextField\n              label=\"notes\"\n              name=\"notes\"\n              type=\"text\"\n              value={notes}\n              onChange={(event: any) => setNotes(event.target.value)}\n              multiline\n              rowsMax=\"10\"\n              fullWidth\n            />\n          </Paper>\n        </Grid>\n        <Grid item xs={12} sm={6}>\n          {cartResult.status !== 'loaded' && 'Loading...'}\n          {cartResult.status === 'loaded' &&\n            cartResult.payload.line_items.length > 0 && (\n              <CartTable line_items={cartResult.payload.line_items} checkout />\n            )}\n        </Grid>\n      </Grid>\n      <StepButtons\n        {...{ backDisabled, handleBack, nextDisabled, handleNext, nextText }}\n      />\n    </>\n  )\n}\n\nconst paymentStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    paymentContainer: {\n      height: '100%',\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center'\n    }\n  })\n)\n\nfunction Payment(\n  props: {\n    setCanGoToNextStep: React.Dispatch<React.SetStateAction<boolean>>\n  } & StepButtonsProps\n) {\n  const classes = paymentStyles()\n  const cartResult = useCartService()\n  const {\n    setCanGoToNextStep,\n    backDisabled,\n    handleBack,\n    nextDisabled,\n    handleNext,\n    nextText\n  } = props\n\n  useEffect(() => {\n    setCanGoToNextStep(cartResult && cartResult.status === 'loaded')\n  }, [setCanGoToNextStep, cartResult])\n\n  return (\n    <>\n      <Grid container justify=\"center\" direction=\"row\">\n        <Grid item xs={12} sm={6}>\n          {cartResult.status !== 'loaded' && 'Loading...'}\n          {cartResult.status === 'loaded' &&\n            cartResult.payload.line_items.length > 0 && (\n              <CartTable\n                line_items={cartResult.payload.line_items}\n                checkout\n                summary\n              />\n            )}\n        </Grid>\n        <Grid item xs={12} sm={6}>\n          <Paper className={classes.paymentContainer}>\n            Square Payment stuff will go here...\n          </Paper>\n        </Grid>\n      </Grid>\n      <StepButtons\n        {...{ backDisabled, handleBack, nextDisabled, handleNext, nextText }}\n      />\n    </>\n  )\n}\n\nconst stepButtonsStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      display: 'flex',\n      justifyContent: 'flex-end',\n      marginTop: theme.spacing(2)\n    },\n    button: {\n      marginLeft: theme.spacing(2)\n    }\n  })\n)\n\ninterface StepButtonsProps {\n  backDisabled: boolean\n  handleBack: () => void\n  nextDisabled: boolean\n  handleNext: () => void\n  nextText: string\n}\n\nfunction StepButtons(props: StepButtonsProps) {\n  const classes = stepButtonsStyles()\n\n  const { backDisabled, handleBack, nextDisabled, handleNext, nextText } = props\n  return (\n    <div className={classes.root}>\n      <Button\n        disabled={backDisabled}\n        onClick={handleBack}\n        className={classes.button}\n      >\n        Back\n      </Button>\n\n      <Button\n        disabled={nextDisabled}\n        variant=\"contained\"\n        color=\"primary\"\n        onClick={handleNext}\n        className={classes.button}\n      >\n        {nextText}\n      </Button>\n    </div>\n  )\n}\n\nconst checkoutStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      width: '100%',\n      padding: theme.spacing(2)\n    },\n    instructions: {\n      marginTop: theme.spacing(2),\n      marginBottom: theme.spacing(2)\n    },\n    stepBtnz: {\n      display: 'flex',\n      justifyContent: 'flex-end',\n      marginTop: theme.spacing(2)\n    },\n    finished: {\n      minHeight: '300px',\n      width: '100%',\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center'\n    }\n  })\n)\n\nfunction getSteps() {\n  return ['Member Registration', 'Review Order', 'Payment']\n}\n\nfunction Checkout() {\n  const classes = checkoutStyles()\n\n  const [activeStep, setActiveStep] = useState(0)\n  const [canGoToNextStep, setCanGoToNextStep] = useState(false)\n  const steps = getSteps()\n\n  const handleNext = () => {\n    setActiveStep(prevActiveStep => prevActiveStep + 1)\n  }\n\n  const handleBack = () => {\n    setActiveStep(prevActiveStep => prevActiveStep - 1)\n  }\n\n  return (\n    <>\n      <NavBar showCart={false} />\n      <div className={classes.root}>\n        <Stepper activeStep={activeStep}>\n          {steps.map((label, index) => {\n            const stepProps: { completed?: boolean } = {}\n            const labelProps: { optional?: React.ReactNode } = {}\n            return (\n              <Step key={label} {...stepProps}>\n                <StepLabel {...labelProps}>{label}</StepLabel>\n              </Step>\n            )\n          })}\n        </Stepper>\n        <div>\n          {activeStep === steps.length ? (\n            <Paper className={classes.finished}>\n              <Typography className={classes.instructions}>\n                THANK YOU!\n              </Typography>\n            </Paper>\n          ) : (\n            <div>\n              {activeStep === 0 && (\n                <Registration\n                  handleNext={handleNext}\n                  setCanGoToNextStep={setCanGoToNextStep}\n                  backDisabled={true}\n                  handleBack={handleBack}\n                  nextDisabled={!canGoToNextStep || activeStep === 0}\n                  nextText={activeStep === steps.length - 1 ? 'Finish' : 'Next'}\n                />\n              )}\n              {activeStep === 1 && (\n                <ReviewCart\n                  setCanGoToNextStep={setCanGoToNextStep}\n                  backDisabled={true}\n                  handleBack={handleBack}\n                  nextDisabled={!canGoToNextStep}\n                  handleNext={handleNext}\n                  nextText={activeStep === steps.length - 1 ? 'Finish' : 'Next'}\n                />\n              )}\n              {activeStep === 2 && (\n                <Payment\n                  setCanGoToNextStep={setCanGoToNextStep}\n                  backDisabled={false}\n                  handleBack={handleBack}\n                  nextDisabled={!canGoToNextStep}\n                  handleNext={handleNext}\n                  nextText={activeStep === steps.length - 1 ? 'Finish' : 'Next'}\n                />\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n    </>\n  )\n}\n\nexport default Checkout\n","import React from 'react'\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom'\nimport { connect } from 'react-redux'\nimport CssBaseline from '@material-ui/core/CssBaseline'\nimport { ThemeProvider } from '@material-ui/core/styles'\n\nimport { darkTheme, lightTheme } from './theme'\nimport { RootState } from './redux'\nimport { PreferencesServiceProps } from './redux/preferences/reducers'\n\nimport DataTable from './components/DataTable'\nimport Landing from './components/Landing'\nimport Checkout from './components/Checkout'\nimport Login from './components/Login'\nimport Register from './components/Register'\nimport NavBar from './components/NavBar'\n\nexport function App(props: PreferencesServiceProps) {\n  const { preferencesService } = props\n  const theme =\n    preferencesService &&\n    preferencesService.preferences &&\n    preferencesService.preferences.dark_mode === 'true'\n      ? darkTheme\n      : lightTheme\n  return (\n    <ThemeProvider theme={theme}>\n      <CssBaseline />\n      <Router>\n        <Switch>\n          <Route path=\"/checkout\" exact component={Checkout} />\n          <Route path=\"/products\" exact component={DataTable} />\n          <Route path=\"/products/:cat/\" exact component={DataTable} />\n          <Route path=\"/products/:cat/:subcat\" component={DataTable} />\n          <Route path=\"/login\" exact>\n            <>\n              <NavBar />\n              <Login showTitle />\n            </>\n          </Route>\n          <Route path=\"/register\" exact>\n            <>\n              <NavBar />\n              <Register showTitle />\n            </>\n          </Route>\n          <Route path=\"/\" component={Landing} />\n        </Switch>\n      </Router>\n    </ThemeProvider>\n  )\n}\n\nconst mapStateToProps = (states: RootState): PreferencesServiceProps => {\n  return {\n    preferencesService: states.preferences.preferencesService\n  }\n}\n\nexport default connect(mapStateToProps, {})(App)\n","import { combineReducers } from 'redux'\n\nimport { Action } from './actions'\nimport { User, LoginError } from '../../types/User'\n\nexport interface UserService {\n  isFetching: boolean\n  user?: User\n  error?: LoginError\n}\n\nexport interface UserServiceProps {\n  userService: UserService\n}\n\nconst userService = (\n  state: UserService = { isFetching: false },\n  action: Action\n): UserService => {\n  switch (action.type) {\n    case 'SET':\n      return { ...state, user: action.user, error: undefined }\n    case 'SET_FETCHING':\n      return {\n        ...state,\n        isFetching: action.isFetching\n      }\n    case 'SET_ERROR':\n      return { ...state, user: undefined, error: action.error }\n  }\n  return state\n}\n\nexport default combineReducers<UserServiceProps>({\n  userService\n})\n","import { combineReducers } from 'redux'\n\nimport { Action } from './actions'\nimport { Preferences, PreferencesError } from '../../types/Preferences'\n\nexport interface PreferencesService {\n  isFetching: boolean\n  preferences?: Preferences\n  error?: PreferencesError\n}\n\nexport interface PreferencesServiceProps {\n  preferencesService: PreferencesService\n}\n\nconst preferencesService = (\n  state: PreferencesService = { isFetching: false },\n  action: Action\n): PreferencesService => {\n  switch (action.type) {\n    case 'SET_PREFERENCES':\n      return { ...state, preferences: action.preferences, error: undefined }\n    case 'SET_FETCHING_PREFERENCES':\n      return {\n        ...state,\n        isFetching: action.isFetching\n      }\n    case 'SET_ERROR_PREFERENCES':\n      return { ...state, preferences: undefined, error: action.error }\n  }\n  return state\n}\n\nexport default combineReducers<PreferencesServiceProps>({\n  preferencesService\n})\n","import { createStore, combineReducers, applyMiddleware } from 'redux'\nimport thunk from 'redux-thunk'\nimport session, { UserServiceProps } from './session/reducers'\nimport preferences, { PreferencesServiceProps } from './preferences/reducers'\n\nexport interface RootState {\n  session: UserServiceProps\n  preferences: PreferencesServiceProps\n}\n\nexport default createStore(\n  combineReducers<RootState>({\n    session,\n    preferences\n  }),\n  applyMiddleware(thunk)\n)\n","import React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport { Provider } from 'react-redux'\n\nimport './index.css'\nimport App from './App'\n\nimport store from './redux'\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.querySelector('#root')\n)\n\n// import * as serviceWorker from './serviceWorker'\n// // If you want your app to work offline and load faster, you can change\n// // unregister() to register() below. Note this comes with some pitfalls.\n// // Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.unregister()\n"],"sourceRoot":""}