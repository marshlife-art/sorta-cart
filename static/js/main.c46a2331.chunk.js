(this["webpackJsonpsorta-cart"]=this["webpackJsonpsorta-cart"]||[]).push([[0],{256:function(e,t,a){e.exports=a(356)},265:function(e,t,a){},356:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(17),l=a.n(c),o=a(42),i=(a(265),a(73)),s=a(81),u=a(414),m=a(406),d=a(124),p=a.n(d),f=a(235),h=Object(f.a)({palette:{type:"dark",primary:{main:"#556cd6"},secondary:{main:"#FF4081"},error:{main:p.a.A400}}}),g=Object(f.a)({palette:{type:"light",primary:{main:"#556cd6"},secondary:{main:"#FF4081"},error:{main:p.a.A400}}}),E=a(15),b=a(218),y=a.n(b),v=a(214),x=a(408),O=a(156),j=a(215),k=a(82),C=a(197),w=a(137),S=a.n(w),N=a(231),T=a.n(N),_=(a(232),a(138)),F=a.n(_),I=a(6),R=a(122),D=a(216),q=a(201),B=a(407),z=a(83),A=a.n(z),P={dark_mode:"false"},W=function(e){return{type:"SET_PREFERENCES",preferences:e}},G=function(e){return{type:"SET_FETCHING_PREFERENCES",isFetching:e}},L=Object(I.a)({paper:{border:"1px solid #d3d4d5"}})((function(e){return r.a.createElement(R.a,Object.assign({elevation:0,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},e))})),H=Object(I.a)((function(e){return{root:{}}}))(D.a);var M=Object(o.b)((function(e){return{preferencesService:e.preferences.preferencesService}}),(function(e){return{getPreferences:function(){return e((function(e){return A.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,a){e(G(!0));var n=localStorage&&localStorage.getItem("preferences");e(W(n?JSON.parse(n):P)),e(G(!1)),t()})));case 1:case"end":return t.stop()}}))}))},setPreferences:function(t){return e(function(e){return function(t){return A.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",new Promise((function(a,n){t(G(!0)),e?(localStorage&&localStorage.setItem("preferences",JSON.stringify(e)),t(W(e))):t(W(P)),t(G(!1)),a()})));case 1:case"end":return a.stop()}}))}}(t))}}}))(Object(s.f)((function(e){var t=e.anchorEl,a=e.setAnchorEl,c=e.preferencesService,l=e.getPreferences,o=e.setPreferences,i=e.history,s=Object(n.useState)(null),u=Object(E.a)(s,2),m=u[0],d=u[1];Object(n.useEffect)((function(){l()}),[l]),Object(n.useEffect)((function(){!c.isFetching&&c.preferences&&null===m&&d("true"===c.preferences.dark_mode)}),[c]),Object(n.useEffect)((function(){c&&c.preferences&&null!==m&&"true"===c.preferences.dark_mode!==m&&o({dark_mode:m?"true":"false"})}),[m]);var p=function(){a(null)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(L,{id:"user--menu",anchorEl:t,keepMounted:!0,open:Boolean(t),onClose:p},r.a.createElement(H,{onClick:function(){i.push("/login"),p()}},r.a.createElement(q.a,{primary:"Sign in"})),r.a.createElement(H,{onClick:function(){i.push("/register"),p()}},r.a.createElement(q.a,{primary:"Register"})),r.a.createElement(H,{onClick:function(){return d((function(e){return!e}))}},r.a.createElement(q.a,null,r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},r.a.createElement("span",null,"Dark Theme"),r.a.createElement(B.a,{checked:null!==m&&void 0!==m&&m,value:"useDarkTheme",inputProps:{"aria-label":"secondary checkbox"}}))))))}))),J=a(419),$=a(50),U=a(228),V=a(236),K=a(229),X=a(237),Y=a(16),Q=(a(355),new(function(e){function t(){var e;return Object(U.a)(this,t),(e=Object(V.a)(this,Object(K.a)(t).call(this,"SortaCartDatabase"))).cart=void 0,e.version(1).stores({cart:"++id,&product_id"}),e.cart=e.table("cart"),e}return Object(X.a)(t,e),t}(Y.a))),Z=function(){var e=Object(n.useState)({status:"loading"}),t=Object(E.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){Q.cart.toArray().then((function(e){return r({status:"loaded",payload:{line_items:e}})})).catch((function(e){r({status:"error",error:e})})),Q.on("changes",(function(e){e.find((function(e){return"cart"===e.table}))&&Q.cart.toArray().then((function(e){console.log("[useCartService] db changes!! "),r({status:"loaded",payload:{line_items:e}})})).catch((function(e){r({status:"error",error:e})}))}))}),[]),a},ee=function(){return Q.cart.count().catch((function(e){return console.warn("[useCartItemCount] caught error:",e),0}))},te=function(){var e=Object(n.useState)(0),t=Object(E.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){ee().then((function(e){return r(e)})),Q.on("changes",(function(e){e.find((function(e){return"cart"===e.table}))&&ee().then((function(e){return r(e)}))}))}),[]),a},ae=function(e){var t=Object($.a)({},e,{product_id:e.id,quantity:1,total:parseFloat(e.ws_price),selected_unit:"CS"});delete t.id,Q.cart.add(t).catch((function(e){return console.warn("[addToCart] caught error:",e)}))},ne=function(e){Q.cart.delete(e).catch((function(e){return console.warn("[removeItemFromCart] caught error:",e)}))},re=function(){Q.cart.clear().catch((function(e){console.warn("[emptyCart] caught error:",e)}))},ce=function(e){Q.cart.update(e.id,e).catch((function(e){return console.warn("[updateLineItem] caught error:",e)}))},le=a(226),oe=a(402),ie=a(208),se=a(182),ue=a(179),me=a(203),de=a(183),pe=a(210),fe=a(127),he=a(196),ge=a(160),Ee=a(230),be=a.n(Ee),ye="https://api.marshcoop.org",ve=.06175,xe="".concat((100*ve).toFixed(3),"%"),Oe={id:"new",status:"new",payment_status:"balance_due",shipment_status:"backorder",total:0,item_count:0,subtotal:0,name:"",email:"",phone:"",address:"",notes:"",createdAt:"",updatedAt:"",OrderLineItems:[]},je=Object(le.a)((function(e){return Object(oe.a)({root:{width:"100%",overflowX:"auto",height:"100%"},table:{maxWidth:"95vw",padding:e.spacing(1),borderCollapse:"separate","& td":{border:"none"}},qtyinput:{width:"50px"}})}));function ke(e){return"$".concat("string"===typeof e?parseFloat(e).toFixed(2):e.toFixed(2))}function Ce(e){return"EA"===e.selected_unit&&e.u_price?e.quantity*parseFloat(e.u_price):e.quantity*parseFloat(e.ws_price)}var we=Object(s.f)((function(e){var t=je(),a=e.checkout,n=e.summary,c=e.line_items.map((function(e){return e.total})).reduce((function(e,t){return e+t}),0),l=ve*c,o=l+c;return r.a.createElement(fe.a,{className:t.root},r.a.createElement(ie.a,{className:t.table,"aria-label":"cart"},r.a.createElement(me.a,null,r.a.createElement(de.a,null,r.a.createElement(ue.a,{align:"center"}),r.a.createElement(ue.a,null,"Description"),r.a.createElement(ue.a,{align:"right"},"Price"),r.a.createElement(ue.a,{align:"center"},"Unit"),r.a.createElement(ue.a,{align:"right"},"Qty."),r.a.createElement(ue.a,{align:"right"},"Total"))),r.a.createElement(se.a,null,e.line_items.map((function(e,a){return r.a.createElement(de.a,{key:"li".concat(a)},r.a.createElement(ue.a,{align:"center"},!n&&r.a.createElement(j.a,{"aria-label":"remove line item",title:"REMOVE LINE ITEM"},r.a.createElement(O.a,{"aria-label":"delete",size:"small",onClick:function(t){return a=e.id,void ne(a);var a}},r.a.createElement(be.a,{fontSize:"inherit"})))),r.a.createElement(ue.a,null,e.name," ",e.description),r.a.createElement(ue.a,{align:"right"},r.a.createElement("div",null,"EA"===e.selected_unit&&e.u_price?ke(e.u_price):ke(e.ws_price)),r.a.createElement("div",null,function(e){var t=[];return e.pk&&1!==e.pk&&t.push(e.pk),e.size&&t.push(e.size),t.join(" / ")}(e))),r.a.createElement(ue.a,{align:"center"},n?e.selected_unit:e.u_price&&e.u_price!==e.ws_price?r.a.createElement(ge.a,{value:e.selected_unit,onChange:function(t){return function(e,t){e.selected_unit=t,e.total=Ce(e),ce(e)}(e,t.target.value)},margin:"dense"},r.a.createElement(D.a,{value:"CS"},"Case"),r.a.createElement(D.a,{value:"EA"},"Each")):"CS"===e.unit_type?"Case":"Each"),r.a.createElement(ue.a,{align:"right"},n?e.quantity:r.a.createElement(he.a,{className:t.qtyinput,type:"number",InputLabelProps:{shrink:!0},margin:"dense",fullWidth:!0,value:e.quantity,onChange:function(t){return function(e,t){e.quantity=t>0?t:1,e.total=Ce(e),ce(e)}(e,t.target.value)},inputProps:{min:"1",step:"1"}})),r.a.createElement(ue.a,{align:"right"},ke(e.total)))})),r.a.createElement(de.a,null,r.a.createElement(ue.a,{rowSpan:3,colSpan:3}),r.a.createElement(ue.a,null,"Subtotal"),r.a.createElement(ue.a,{align:"right"},e.line_items&&e.line_items.length),r.a.createElement(ue.a,{align:"right"},ke(c))),r.a.createElement(de.a,null,r.a.createElement(ue.a,null,"Tax"),r.a.createElement(ue.a,{align:"right"},xe),r.a.createElement(ue.a,{align:"right"},ke(l))),r.a.createElement(de.a,null,r.a.createElement(ue.a,null,"Total"),r.a.createElement(ue.a,{align:"right",colSpan:2},r.a.createElement("b",null,ke(o))))),!n&&!a&&r.a.createElement(pe.a,null,r.a.createElement(de.a,null,r.a.createElement(ue.a,{colSpan:3,align:"left"},e.emptyCartAndCloseDrawer&&r.a.createElement(C.a,{variant:"contained",color:"secondary",onClick:e.emptyCartAndCloseDrawer},"Empty Cart")),r.a.createElement(ue.a,{colSpan:3,align:"right"},r.a.createElement(C.a,{variant:"contained",color:"primary",onClick:function(){return e.history.push("/checkout")}},"Checkout"))))))}));var Se=function(e){var t=e.open,a=e.setOpen,n=Z();return r.a.createElement(J.a,{anchor:"right",open:t,onClose:function(){return a(!t)}},"loaded"!==n.status&&"Loading...","loaded"===n.status&&n.payload.line_items.length>0&&r.a.createElement(we,{line_items:n.payload.line_items,emptyCartAndCloseDrawer:function(e){window.confirm("Are you sure?")&&(re(),a(!1))}}))};var Ne="https://api.marshcoop.org",Te={a:"Artificial ingredients",c:"Low carb",d:"Dairy free",f:"Food Service items",g:"Gluten free",k:"Kosher",l:"Low sodium/no salt",m:"Non-GMO Project Verified",og:"Organic",r:"Refined sugar",v:"Vegan",w:"Wheat free",ft:"Fair Trade",n:"Natural",s:"Specialty Only",y:"Yeast free",1:"100% organic",2:"95%+ organic",3:"70%+ organic"};var _e=Object(s.f)((function(e){var t=Object(n.createRef)(),a=te(),c=Object(n.useState)(!1),l=Object(E.a)(c,2),o=l[0],i=l[1],s=r.a.useState(null),u=Object(E.a)(s,2),m=u[0],d=u[1],p={icon:function(){return r.a.createElement(x.a,{badgeContent:a,max:99,color:"primary"},r.a.createElement(S.a,null))},tooltip:"Cart",isFreeAction:!0,onClick:function(){return i(!o)}},f={icon:function(){return r.a.createElement(F.a,null)},tooltip:"User",isFreeAction:!0,onClick:function(e){d(e.currentTarget)}},h=Object(n.useState)([f]),g=Object(E.a)(h,2),b=g[0],w=g[1];Object(n.useEffect)((function(){w(a?[p,f]:[f])}),[a]);var N=Object(n.useState)((function(){fetch("".concat(Ne,"/categories")).then((function(e){return e.json()})).then((function(e){return R(e)})).catch(console.warn)})),_=Object(E.a)(N,2),I=_[0],R=_[1],D=Object(n.useState)((function(){fetch("".concat(Ne,"/sub_categories")).then((function(e){return e.json()})).then((function(e){return z(e)})).catch(console.warn)})),q=Object(E.a)(D,2),B=q[0],z=q[1],A=e.match&&e.match.params&&e.match.params.cat&&[e.match.params.cat],P=e.match&&e.match.params&&e.match.params.subcat&&[e.match.params.subcat];return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{tableRef:t,columns:[{title:"category",field:"category",type:"string",lookup:I,filterPlaceholder:"filter",defaultFilter:A},{title:"sub category",field:"sub_category",type:"string",lookup:B,editComponent:function(e){return console.log("editComponent arg:",e),r.a.createElement(r.a.Fragment,null,"subcat")},filterPlaceholder:"filter",defaultFilter:P},{title:"description",field:"description",type:"string",filtering:!1,render:function(e){return e.name?"".concat(e.name," -- ").concat(e.description):e.description}},{title:"pk",field:"pk",type:"numeric",filtering:!1},{title:"size",field:"size",type:"string",filtering:!1},{title:"unit type",field:"unit_type",type:"string",lookup:{CS:"Case",EA:"Each"},filterPlaceholder:"filter"},{title:"price",field:"ws_price",type:"currency",filtering:!1},{title:"unit price",field:"u_price",type:"currency",filtering:!1,render:function(e){return e.ws_price!==e.u_price?"$".concat(e.u_price):""}},{title:"properties",field:"codes",type:"string",lookup:Te,filterPlaceholder:"filter",render:function(e){return e.codes.split(", ").map((function(e,t){return Te[e]?r.a.createElement(v.a,{label:Te[e],style:{margin:5},size:"small",key:"pprop".concat(t)}):""}))}},{title:void 0,field:void 0,type:"string",render:function(e){var t="add to shopping cart";return r.a.createElement(j.a,{"aria-label":t,title:t},r.a.createElement(O.a,{color:"secondary",onClick:function(){return ae(e)}},r.a.createElement(T.a,null)))}},{title:"upc",field:"upc_code",type:"string",hidden:!0},{title:"id",field:"id",type:"string",hidden:!0}],data:function(e){return new Promise((function(t,a){console.log("query:",e),fetch("".concat(Ne,"/products"),{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){console.log("result",e),t(e)})).catch((function(e){return console.warn("onoz, caught err:",e),t({data:[],page:0,totalCount:0})}))}))},title:r.a.createElement(C.a,{variant:"text",size:"large",onClick:function(){return e.history.push("/")}},r.a.createElement(k.a,{variant:"h6"},"MARSH COOP")),options:{headerStyle:{position:"sticky",top:0},filterCellStyle:{maxWidth:"132px"},maxBodyHeight:"calc(100vh - 133px)",pageSize:50,pageSizeOptions:[50,100,500],debounceInterval:750,filtering:!0,search:!0,emptyRowsWhenPaging:!1},actions:b}),r.a.createElement(Se,{open:o,setOpen:i}),r.a.createElement(M,{anchorEl:m,setAnchorEl:d}))})),Fe=a(404),Ie=a(369),Re=a(410),De=a(166),qe=a.n(De),Be=a(87),ze=a(409),Ae=a(180),Pe=a(11),We=Object(le.a)((function(e){return Object(oe.a)({root:{flexGrow:1,boxShadow:"none"},toolbar:{backgroundColor:e.palette.background.default,color:e.palette.text.primary},menuButton:{marginLeft:e.spacing(2)},grow:{flexGrow:1},search:Object(Be.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(Pe.c)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(Pe.c)(e.palette.common.white,.25)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"}),searchIcon:{width:e.spacing(7),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(Be.a)({padding:e.spacing(1,1,1,7),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:120,"&:focus":{width:200}})})}));var Ge=Object(s.f)((function(e){var t=We(),a=te(),c=e.showCart,l=Object(n.useState)(!1),o=Object(E.a)(l,2),i=o[0],s=o[1],u=Object(n.useState)(null),m=Object(E.a)(u,2),d=m[0],p=m[1];return r.a.createElement(ze.a,{position:"static",className:t.root},r.a.createElement(Ae.a,{className:t.toolbar},r.a.createElement("div",null,r.a.createElement(Ie.a,{in:!0},r.a.createElement(C.a,{variant:"text",size:"large",onClick:function(){return e.history.push("/")}},r.a.createElement(k.a,{variant:"h6"},"MARSH COOP")))),e.children||r.a.createElement("div",{className:t.grow},"\xa0"),c&&a>0&&r.a.createElement(O.a,{edge:"end",className:t.menuButton,color:"inherit","aria-label":"show cart",onClick:function(){return s((function(e){return!e}))}},r.a.createElement(x.a,{badgeContent:a,max:99,color:"secondary"},r.a.createElement(S.a,null))),r.a.createElement(O.a,{edge:"end",className:t.menuButton,color:"inherit","aria-label":"user menu",onClick:function(e){p(e.currentTarget)}},r.a.createElement(F.a,null))),r.a.createElement(M,{anchorEl:d,setAnchorEl:p}),r.a.createElement(Se,{open:i,setOpen:s}))})),Le=Object(le.a)((function(e){return Object(oe.a)({gridRoot:{width:"100%",overflowX:"auto",minHeight:"calc(100vh - 64px)",padding:e.spacing(2),display:"flex"},crumbz:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",flexGrow:1},gridBtn:{width:"100%",height:"100%",background:e.palette.background.paper,"&:hover":{textDecoration:"underline",cursor:"pointer"}},catHover:{"&:hover":{textDecoration:"underline",cursor:"pointer"}},catBtn:{overflow:"hidden",overflowWrap:"break-word",hyphens:"auto"}})}));var He=Object(s.f)((function(e){var t=Le(),a=Object(n.useState)([]),c=Object(E.a)(a,2),l=c[0],o=c[1],i=Object(n.useState)(""),s=Object(E.a)(i,2),u=s[0],m=s[1],d=Object(n.useState)([]),p=Object(E.a)(d,2),f=p[0],h=p[1];return Object(n.useEffect)((function(){fetch("".concat(ye,"/categories")).then((function(e){return e.json()})).then((function(e){console.log("result",e),o(Object.keys(e))})).catch((function(e){console.warn("onoz, caught err:",e),o([])}))}),[o]),Object(n.useEffect)((function(){fetch("".concat(ye,"/sub_categories"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({categories:[u]})}).then((function(e){return e.json()})).then((function(e){console.log("result",e),h(Object.keys(e).map((function(e){return{name:e,label:e.split(":").join(": ").split(",").join(", ").split("/").join(" / ").split("-").join(" - ")}})))})).catch((function(e){console.warn("onoz, caught err:",e),h([])}))}),[u,h]),r.a.createElement(r.a.Fragment,null,r.a.createElement(Ge,{showCart:!0},u&&r.a.createElement("div",{className:t.crumbz},r.a.createElement(Ie.a,{in:!0},r.a.createElement(qe.a,{fontSize:"large"})),r.a.createElement(Ie.a,{in:!0,style:{transitionDelay:"50ms"}},r.a.createElement(C.a,{variant:"text",size:"large",onClick:function(){return m("")}},r.a.createElement(k.a,{variant:"h6",className:u&&t.catHover},"CATEGORIES"))),r.a.createElement(Ie.a,{in:!0,style:{transitionDelay:"100ms"}},r.a.createElement(qe.a,{fontSize:"large"})),r.a.createElement(Ie.a,{in:!0,style:{transitionDelay:"150ms"}},r.a.createElement(k.a,{variant:"h6"},u.toUpperCase())))),r.a.createElement(Fe.a,{container:!0,spacing:4,justify:"center",className:t.gridRoot},l&&!u&&l.map((function(e,a){return r.a.createElement(Re.a,{in:!0,style:{transitionDelay:"".concat(50*a,"ms")},key:"lb".concat(a)},r.a.createElement(Fe.a,{item:!0,xs:12,sm:4,md:3,lg:2},r.a.createElement(C.a,{className:t.gridBtn,variant:"outlined",size:"large",key:"lb".concat(a),onClick:function(){return m(e)}},r.a.createElement(k.a,{variant:"h5",className:t.catBtn},e))))})),l.length>0&&!u&&r.a.createElement(Re.a,{in:!0,style:{transitionDelay:"".concat(50*l.length,"ms")}},r.a.createElement(Fe.a,{item:!0,xs:12,sm:4,md:3,lg:3},r.a.createElement(C.a,{className:t.gridBtn,variant:"outlined",size:"large",onClick:function(){return e.history.push("/products")}},r.a.createElement(k.a,{variant:"h5",className:t.catBtn},"See Everything")))),f&&u&&f.map((function(a,n){return r.a.createElement(Re.a,{in:!0,style:{transitionDelay:"".concat(50*n,"ms")},key:"lb".concat(n)},r.a.createElement(Fe.a,{item:!0,xs:12,sm:4,md:3},r.a.createElement(C.a,{className:t.gridBtn,variant:"outlined",size:"large",key:"lb".concat(n),onClick:function(){return e.history.push("/products/".concat(u,"/").concat(a.name))}},r.a.createElement(k.a,{variant:"h5",className:t.catBtn},a.label))))})),f.length>0&&u&&r.a.createElement(Re.a,{in:!0,style:{transitionDelay:"".concat(50*f.length,"ms")}},r.a.createElement(Fe.a,{item:!0,xs:12,sm:4,md:3},r.a.createElement(C.a,{className:t.gridBtn,variant:"outlined",size:"large",onClick:function(){return e.history.push("/products/".concat(u))}},r.a.createElement(k.a,{variant:"h5",className:t.catBtn},"See Everything"))))))})),Me=a(418),Je=a(413),$e=a(417),Ue=a(233),Ve=a.n(Ue),Ke=a(411),Xe=a(415),Ye=function(e){return{type:"SET",user:e}},Qe=function(e){return{type:"SET_ERROR",error:e}},Ze=function(e){return{type:"SET_FETCHING",isFetching:e}},et=function(e,t){return function(a){return A.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n){a(Ze(!0)),fetch("".concat(ye,"/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then((function(e){return e.json()})).then((function(e){"ok"===e.msg&&e.user&&e.user.token?(localStorage&&localStorage.setItem("token",e.user.token),a(Ye(e.user))):a(Qe({error:"error",reason:e.message}))})).catch((function(e){console.log("login error:",e),a(Qe({error:"error",reason:"unable to login right now :("}))})).finally((function(){a(Ze(!1)),n()}))})));case 1:case"end":return n.stop()}}))}},tt=Object(le.a)((function(e){return{form:{width:"100%",marginTop:e.spacing(1),display:"flex",flexDirection:"column",justifyContent:"center"},title:{display:"flex",justifyContent:"space-between",alignItems:"flex-end"},submit:{margin:e.spacing(3,0,2)}}}));var at=Object(o.b)((function(e,t){return{userService:e.session.userService}}),(function(e,t){return{login:function(t,a){return e(et(t,a))}}}))(Object(s.f)((function(e){var t=e.userService,a=e.showTitle,c=e.onLoginFn,l=e.history,o=tt(),i=Object(n.useState)(""),s=Object(E.a)(i,2),u=s[0],m=s[1];return Object(n.useEffect)((function(){t.user&&!t.isFetching&&t.user.role&&(console.log("we gotta user!",t.user),c?c():l.push("/"))}),[t,c,l]),r.a.createElement(Ke.a,{maxWidth:"sm"},r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),m("");var a=t.currentTarget,n=a.elements.namedItem("email"),r=a.elements.namedItem("password");n&&n.value.length>0&&r&&r.value.length>0&&e.login(n.value,r.value)},className:o.form},a&&r.a.createElement("div",{className:o.title},r.a.createElement(k.a,{variant:"h2",display:"block"},"Sign In")),r.a.createElement(he.a,{label:"email",name:"email",type:"text",autoFocus:!0,fullWidth:!0,required:!0}),r.a.createElement(he.a,{label:"password",name:"password",type:"password",fullWidth:!0,required:!0}),r.a.createElement("div",null,r.a.createElement(C.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",disabled:e.userService.isFetching,className:o.submit},"Login")),r.a.createElement(Xe.a,{color:"error.main"},e.userService.error&&r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,{variant:"overline",display:"block"},"onoz! an error!"),r.a.createElement(k.a,{variant:"body1",display:"block",gutterBottom:!0},e.userService.error.reason)),u&&r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,{variant:"overline",display:"block"},"onoz! an error!"),r.a.createElement(k.a,{variant:"body1",display:"block",gutterBottom:!0},u)))))}))),nt=a(416),rt=a(412),ct=a(367),lt=a(205),ot=a(158),it=a(366),st=a(370),ut=a(213),mt=Object(le.a)((function(e){return{form:{width:"100%",marginTop:e.spacing(1),display:"flex",flexDirection:"column",justifyContent:"center","& .MuiFormHelperText-root":{color:e.palette.error.main,textAlign:"right"}},title:{display:"flex",justifyContent:"space-between",alignItems:"flex-end"},notice:{marginTop:e.spacing(4),marginBottom:e.spacing(1)},formControl:{margin:"".concat(e.spacing(2),"px 0"),"& legend":{fontSize:"1.25rem",marginTop:e.spacing(2),marginBottom:e.spacing(1)}},submit:{margin:e.spacing(3,0,2)}}}));var dt=Object(o.b)((function(e,t){return{userService:e.session.userService}}),(function(e,t){return{login:function(t,a){return e(et(t,a))}}}))(Object(s.f)((function(e){var t=e.userService,a=e.showTitle,c=e.onRegisterFn,l=e.history,o=mt(),i=Object(n.useState)(""),s=Object(E.a)(i,2),u=s[0],m=s[1];return Object(n.useEffect)((function(){t.user&&!t.isFetching&&t.user.role&&(console.log("we gotta user!",t.user),c?c():l.push("/"))}),[t,c,l]),r.a.createElement(Ke.a,{maxWidth:"sm"},r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),m("");var a=t.currentTarget,n=a.elements.namedItem("email"),r=a.elements.namedItem("password");n&&n.value.length>0&&r&&r.value.length>0&&e.login(n.value,r.value)},className:o.form},a&&r.a.createElement("div",{className:o.title},r.a.createElement(k.a,{variant:"h2",display:"block"},"Register")),r.a.createElement(he.a,{label:"email",name:"email",type:"text",helperText:"Required",autoFocus:!0,fullWidth:!0,required:!0}),r.a.createElement(he.a,{label:"name",name:"name",type:"text",helperText:"Required",fullWidth:!0,required:!0}),r.a.createElement(he.a,{label:"phone",name:"phone",type:"phone",helperText:"Required",fullWidth:!0,required:!0}),r.a.createElement(he.a,{label:"address",name:"address",type:"text",fullWidth:!0}),r.a.createElement("p",{className:o.notice},r.a.createElement("i",null,"By purchasing a share in the co-op, I understand that I am an equal owner in the enterprise and am eligible to vote on co-op matters and in board elections and to make proposals for the use of the kitchen and event space. I agree to pay for and pick up my groceries in a timely manner and to collaborate with others for the benefit of my co-members and the community at large. I understand that Member shares cost $100 and I can request a subsidy or contribute to subsidies for others.")),r.a.createElement(ot.a,{component:"fieldset",className:o.formControl},r.a.createElement(it.a,{component:"legend"},"Purchase Share:"),r.a.createElement(rt.a,{"aria-label":"freq",name:"freq"},r.a.createElement(lt.a,{value:"whole",control:r.a.createElement(nt.a,null),label:"I am purchasing a share for $100."}),r.a.createElement(lt.a,{value:"requestsubsidy",control:r.a.createElement(nt.a,null),label:"I can pay some for my share and am requesting a subsidy."}),r.a.createElement(lt.a,{value:"requestsubsidy",control:r.a.createElement(nt.a,null),label:"I can pay $100 and would like to pay an additional amount to subsidize others."})),r.a.createElement(ct.a,null,"Required")),r.a.createElement(ot.a,{component:"fieldset",className:o.formControl},r.a.createElement(it.a,{component:"legend"},"I am interested in ordering groceries:"),r.a.createElement(rt.a,{"aria-label":"freq",name:"freq"},r.a.createElement(lt.a,{value:"1week",control:r.a.createElement(nt.a,null),label:"Once a week"}),r.a.createElement(lt.a,{value:"2month",control:r.a.createElement(nt.a,null),label:"Twice a month"}),r.a.createElement(lt.a,{value:"1month",control:r.a.createElement(nt.a,null),label:"Once a month"})),r.a.createElement(ct.a,null,"Required")),r.a.createElement(ot.a,{component:"fieldset",className:o.formControl},r.a.createElement(it.a,{component:"legend"},"Check your preference below:"),r.a.createElement(rt.a,{"aria-label":"freq",name:"freq"},r.a.createElement(lt.a,{value:"online",control:r.a.createElement(nt.a,null),label:" I have Internet access and would like to order directly from the grocery catalog online."}),r.a.createElement(lt.a,{value:"inperson",control:r.a.createElement(nt.a,null),label:"I would like to work with Co-op staff to develop my order in person."})),r.a.createElement(ct.a,null,"Required")),r.a.createElement(ot.a,{component:"fieldset",className:o.formControl},r.a.createElement(it.a,{component:"legend"},"Check any that apply:"),r.a.createElement(st.a,null,r.a.createElement(lt.a,{control:r.a.createElement(ut.a,{onChange:console.log,value:"worker-owner"}),label:"I may be interested in participating in the co-op as a worker-owner."}),r.a.createElement(lt.a,{control:r.a.createElement(ut.a,{onChange:console.log,value:"producer-owner"}),label:"I may be interested in participating in the co-op as a producer."}),r.a.createElement(lt.a,{control:r.a.createElement(ut.a,{onChange:console.log,value:"kitchenexp"}),label:"I have kitchen experience."}),r.a.createElement(lt.a,{control:r.a.createElement(ut.a,{onChange:console.log,value:"farminggardeningexp"}),label:"I have farming/gardening experience."}),r.a.createElement(lt.a,{control:r.a.createElement(ut.a,{onChange:console.log,value:"otherexp"}),label:"I have other relevant experience."}),r.a.createElement(he.a,{label:"explain",name:"otherexpexplain",type:"text",multiline:!0,rowsMax:"10",fullWidth:!0}))),r.a.createElement(ot.a,{component:"fieldset",className:o.formControl},r.a.createElement(it.a,{component:"legend"},"MARSH Cooperative Bylaws and principles"),r.a.createElement(st.a,null,r.a.createElement(lt.a,{control:r.a.createElement(ut.a,{onChange:console.log,value:"agree"}),label:"I understand that the MARSH Cooperative Bylaws and principles are available online or upon request and that these documents guide the co-op and its members."})),r.a.createElement(ct.a,null,"Required")),r.a.createElement("div",null,r.a.createElement(C.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",disabled:e.userService.isFetching,className:o.submit},"Register")),r.a.createElement(Xe.a,{color:"error.main"},e.userService.error&&r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,{variant:"overline",display:"block"},"onoz! an error!"),r.a.createElement(k.a,{variant:"body1",display:"block",gutterBottom:!0},e.userService.error.reason)),u&&r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,{variant:"overline",display:"block"},"onoz! an error!"),r.a.createElement(k.a,{variant:"body1",display:"block",gutterBottom:!0},u)))))}))),pt=Object(le.a)((function(e){return Object(oe.a)({opt:{display:"flex",flexDirection:"column",padding:"".concat(e.spacing(4),"px 0"),alignItems:"center"},optItem:Object(Be.a)({display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:e.spacing(2),maxWidth:"350px",width:"50%"},e.breakpoints.down("xs"),{width:"100%",maxWidth:"unset"})})}));function ft(e){var t=pt(),a=Object(n.useState)(),c=Object(E.a)(a,2),l=c[0],o=c[1],i=e.setCanGoToNextStep,s=e.handleNext,u=e.backDisabled,m=e.handleBack,d=e.nextDisabled,p=e.nextText;Object(n.useEffect)((function(){i(!1)}),[i]);var f=function(){i(!0),s()};return r.a.createElement(r.a.Fragment,null,r.a.createElement(fe.a,null,l&&r.a.createElement(j.a,{"aria-label":"back",title:"back"},r.a.createElement(O.a,{onClick:function(){return o(void 0)}},r.a.createElement(Ve.a,null))),!l&&r.a.createElement("div",{className:t.opt},r.a.createElement("div",{className:t.optItem},r.a.createElement(k.a,{variant:"body1",gutterBottom:!0},"Already a member?"),r.a.createElement(C.a,{variant:"contained",color:"primary",onClick:function(){return o("login")}},"Sign In")),r.a.createElement("div",{className:t.optItem},r.a.createElement(k.a,{variant:"body1",gutterBottom:!0},"Want to become a member?"),r.a.createElement(C.a,{color:"secondary",onClick:function(){return o("register")}},"Register")),r.a.createElement("div",{className:t.optItem},r.a.createElement(k.a,{variant:"body1",gutterBottom:!0},"...or continue as a"),r.a.createElement(C.a,{onClick:function(){return f()}},"Guest"))),"login"===l&&r.a.createElement(at,{onLoginFn:f}),"register"===l&&r.a.createElement(dt,{onRegisterFn:f})),r.a.createElement(vt,{backDisabled:u,handleBack:m,nextDisabled:d,handleNext:s,nextText:p}))}var ht=Object(le.a)((function(e){return Object(oe.a)({infoContainer:{padding:e.spacing(2),height:"100%",display:"flex",flexDirection:"column",alignItems:"center","& .MuiFormHelperText-root":{color:e.palette.error.main,textAlign:"right"}}})}));function gt(e){var t=ht(),a=Z(),c=e.setCanGoToNextStep,l=e.backDisabled,o=e.handleBack,i=e.nextDisabled,s=e.nextText,u=e.setOrder,m=Object(n.useState)(""),d=Object(E.a)(m,2),p=d[0],f=d[1],h=Object(n.useState)(""),g=Object(E.a)(h,2),b=g[0],y=g[1],v=Object(n.useState)(""),x=Object(E.a)(v,2),O=x[0],j=x[1],k=Object(n.useState)(""),C=Object(E.a)(k,2),w=C[0],S=C[1],N=Object(n.useState)(""),T=Object(E.a)(N,2),_=T[0],F=T[1];return Object(n.useEffect)((function(){c&&c(!!(p&&b&&O))}),[c,p,b,O]),r.a.createElement(r.a.Fragment,null,r.a.createElement(Fe.a,{container:!0,justify:"center",direction:"row"},r.a.createElement(Fe.a,{item:!0,xs:12,sm:6},r.a.createElement(fe.a,{className:t.infoContainer},r.a.createElement(he.a,{label:"email",name:"email",type:"text",value:p,onChange:function(e){return f(e.target.value)},autoFocus:!0,fullWidth:!0,helperText:"Required",required:!0}),r.a.createElement(he.a,{label:"name",name:"name",type:"text",value:O,onChange:function(e){return j(e.target.value)},fullWidth:!0,helperText:"Required",required:!0}),r.a.createElement(he.a,{label:"phone",name:"phone",type:"phone",value:b,onChange:function(e){return y(e.target.value)},fullWidth:!0,helperText:"Required",required:!0}),r.a.createElement(he.a,{label:"address",name:"address",type:"text",value:w,onChange:function(e){return S(e.target.value)},fullWidth:!0}),r.a.createElement(he.a,{label:"notes",name:"notes",type:"text",value:_,onChange:function(e){return F(e.target.value)},multiline:!0,rowsMax:"10",fullWidth:!0}))),r.a.createElement(Fe.a,{item:!0,xs:12,sm:6},"loaded"!==a.status&&"Loading...","loaded"===a.status&&a.payload.line_items.length>0&&r.a.createElement(we,{line_items:a.payload.line_items,checkout:!0}))),r.a.createElement(vt,{backDisabled:l,handleBack:o,nextDisabled:i,handleNext:function(){var t="loaded"===a.status&&a.payload.line_items?a.payload.line_items:[];u((function(e){return Object($.a)({},e,{email:p,phone:b,name:O,address:w,notes:_,OrderLineItems:t})})),e.handleNext()},nextText:s}))}var Et=Object(le.a)((function(e){return Object(oe.a)({paymentContainer:{height:"100%",display:"flex",justifyContent:"center",alignItems:"center"}})}));function bt(e){var t=Et(),a=Z(),c=e.setCanGoToNextStep,l=e.backDisabled,o=e.handleBack,i=e.nextDisabled,s=e.nextText,u=e.order;return Object(n.useEffect)((function(){c(a&&"loaded"===a.status)}),[c,a]),r.a.createElement(r.a.Fragment,null,r.a.createElement(Fe.a,{container:!0,justify:"center",direction:"row"},r.a.createElement(Fe.a,{item:!0,xs:12,sm:6},"loaded"!==a.status&&"Loading...","loaded"===a.status&&a.payload.line_items.length>0&&r.a.createElement(we,{line_items:a.payload.line_items,checkout:!0,summary:!0})),r.a.createElement(Fe.a,{item:!0,xs:12,sm:6},r.a.createElement(fe.a,{className:t.paymentContainer},"Square Payment stuff will go here..."))),r.a.createElement(vt,{backDisabled:l,handleBack:o,nextDisabled:i,handleNext:function(){console.log("on handleNext should submit order:",u)},nextText:s}))}var yt=Object(le.a)((function(e){return Object(oe.a)({root:{display:"flex",justifyContent:"flex-end",marginTop:e.spacing(2)},button:{marginLeft:e.spacing(2)}})}));function vt(e){var t=yt(),a=e.backDisabled,n=e.handleBack,c=e.nextDisabled,l=e.handleNext,o=e.nextText;return r.a.createElement("div",{className:t.root},r.a.createElement(C.a,{disabled:a,onClick:n,className:t.button},"Back"),r.a.createElement(C.a,{disabled:c,variant:"contained",color:"primary",onClick:l,className:t.button},o))}var xt=Object(le.a)((function(e){return Object(oe.a)({root:{width:"100%",padding:e.spacing(2)},instructions:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},stepBtnz:{display:"flex",justifyContent:"flex-end",marginTop:e.spacing(2)},finished:{minHeight:"300px",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"}})}));var Ot=function(){var e=xt(),t=Object(n.useState)(0),a=Object(E.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(!1),i=Object(E.a)(o,2),s=i[0],u=i[1],m=Object(n.useState)(Oe),d=Object(E.a)(m,2),p=d[0],f=d[1],h=["Member Registration","Review Order","Payment"],g=function(){l((function(e){return e+1}))},b=function(){l((function(e){return e-1}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ge,{showCart:!1}),r.a.createElement("div",{className:e.root},r.a.createElement(Me.a,{activeStep:c},h.map((function(e,t){return r.a.createElement(Je.a,Object.assign({key:e},{}),r.a.createElement($e.a,{},e))}))),r.a.createElement("div",null,c===h.length?r.a.createElement(fe.a,{className:e.finished},r.a.createElement(k.a,{className:e.instructions},"THANK YOU!")):r.a.createElement("div",null,0===c&&r.a.createElement(ft,{handleNext:g,setCanGoToNextStep:u,backDisabled:!0,handleBack:b,nextDisabled:!s||0===c,nextText:c===h.length-1?"Finish":"Next"}),1===c&&r.a.createElement(gt,{setCanGoToNextStep:u,backDisabled:!0,handleBack:b,nextDisabled:!s,handleNext:g,nextText:c===h.length-1?"Finish":"Next",setOrder:f}),2===c&&r.a.createElement(bt,{setCanGoToNextStep:u,backDisabled:!1,handleBack:b,nextDisabled:!s,handleNext:g,nextText:c===h.length-1?"Finish":"Next",order:p})))))};var jt=Object(o.b)((function(e){return{preferencesService:e.preferences.preferencesService}}),{})((function(e){var t=e.preferencesService,a=t&&t.preferences&&"true"===t.preferences.dark_mode?h:g;return r.a.createElement(m.a,{theme:a},r.a.createElement(u.a,null),r.a.createElement(i.a,null,r.a.createElement(s.c,null,r.a.createElement(s.a,{path:"/checkout",exact:!0,component:Ot}),r.a.createElement(s.a,{path:"/products",exact:!0,component:_e}),r.a.createElement(s.a,{path:"/products/:cat/",exact:!0,component:_e}),r.a.createElement(s.a,{path:"/products/:cat/:subcat",component:_e}),r.a.createElement(s.a,{path:"/login",exact:!0},r.a.createElement(r.a.Fragment,null,r.a.createElement(Ge,null),r.a.createElement(at,{showTitle:!0}))),r.a.createElement(s.a,{path:"/register",exact:!0},r.a.createElement(r.a.Fragment,null,r.a.createElement(Ge,null),r.a.createElement(dt,{showTitle:!0}))),r.a.createElement(s.a,{path:"/",component:He}))))})),kt=a(31),Ct=a(234),wt=Object(kt.c)({userService:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET":return Object($.a)({},e,{user:t.user,error:void 0});case"SET_FETCHING":return Object($.a)({},e,{isFetching:t.isFetching});case"SET_ERROR":return Object($.a)({},e,{user:void 0,error:t.error})}return e}}),St=Object(kt.c)({preferencesService:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PREFERENCES":return Object($.a)({},e,{preferences:t.preferences,error:void 0});case"SET_FETCHING_PREFERENCES":return Object($.a)({},e,{isFetching:t.isFetching});case"SET_ERROR_PREFERENCES":return Object($.a)({},e,{preferences:void 0,error:t.error})}return e}}),Nt=Object(kt.e)(Object(kt.c)({session:wt,preferences:St}),Object(kt.a)(Ct.a));l.a.render(r.a.createElement(o.a,{store:Nt},r.a.createElement(jt,null)),document.querySelector("#root"))}},[[256,1,2]]]);
//# sourceMappingURL=main.c46a2331.chunk.js.map