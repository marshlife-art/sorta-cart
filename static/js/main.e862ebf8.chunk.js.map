{"version":3,"sources":["theme.tsx","constants.ts","redux/session/actions.ts","redux/preferences/actions.ts","components/UserMenu.tsx","services/useCartService.ts","appDatabase.ts","components/CartTable.tsx","components/Login.tsx","components/UserLoginPrompt.tsx","components/CartDrawer.tsx","components/DataTable.tsx","components/NavBar.tsx","components/Landing.tsx","components/Loading.tsx","components/SquarePayment.tsx","components/Register.tsx","components/Checkout.tsx","App.tsx","redux/session/reducers.ts","redux/preferences/reducers.ts","redux/index.ts","index.tsx"],"names":["darkTheme","createMuiTheme","palette","type","primary","main","secondary","error","red","A400","lightTheme","API_HOST","TAX_RATE","TAX_RATE_STRING","toFixed","BLANK_ORDER","id","status","payment_status","shipment_status","total","item_count","subtotal","name","email","phone","address","notes","createdAt","updatedAt","OrderLineItems","SQUARE_PAYMENT_JS","SQUARE_APP_ID","SQUARE_LOCATION_ID","set","user","setError","isFetching","NULL_USER","undefined","token","role","login","password","dispatch","a","async","Promise","resolve","fetch","method","headers","body","JSON","stringify","then","response","json","msg","localStorage","setItem","reason","message","catch","e","console","log","finally","DEFAULT_PREFERENCES","dark_mode","preferences","StyledMenu","withStyles","paper","border","props","Menu","elevation","getContentAnchorEl","anchorOrigin","vertical","horizontal","transformOrigin","StyledMenuItem","theme","root","MenuItem","connect","states","preferencesService","userService","session","setPreferences","rject","logout","getItem","Authorization","warn","removeItem","withRouter","anchorEl","setAnchorEl","history","useState","useDarkTheme","setUseDarkTheme","useEffect","handleClose","hasUser","isAdmin","keepMounted","open","Boolean","onClose","ListItemText","style","padding","borderBottom","onClick","window","location","assign","push","prev","display","justifyContent","alignItems","Switch","checked","value","inputProps","db","cart","version","stores","table","Dexie","useCartService","result","setResult","toArray","line_items","payload","on","changes","find","change","getCartItemCount","count","useCartItemCount","itemCount","setItemCount","subscriber","unsubscribe","addToCart","product","line_item","quantity","ws_price","selected_unit","price","description","trim","kind","vendor","data","add","removeItemFromCart","index","delete","emptyCart","clear","err","updateLineItem","update","useStyles","makeStyles","createStyles","maxWidth","spacing","borderCollapse","qtyinput","width","usdFormat","num","parseFloat","liTotal","u_price","classes","checkout","summary","setOrder","invoiceSubtotal","map","reduce","sum","i","invoiceTaxes","invoiceTotal","order","newOrder","filter","li","length","Table","className","aria-label","TableHead","TableRow","TableCell","align","TableBody","idx","key","Tooltip","title","IconButton","size","event","fontSize","pksize","pk","join","liPkSize","Select","onChange","unit","handleUnitChange","target","margin","unit_type","TextField","InputLabelProps","shrink","fullWidth","handleQtyChange","parseInt","min","step","rowSpan","colSpan","TableFooter","emptyCartAndCloseDrawer","Button","variant","color","form","marginTop","flexDirection","submit","ownProps","showTitle","onLoginFn","Container","onSubmit","preventDefault","currentTarget","emailEl","elements","namedItem","passwordEl","Typography","label","autoFocus","required","disabled","Box","gutterBottom","styles","height","breakpoints","down","optItem","marginBottom","doLogin","setDoLogin","setOpen","cartResult","Drawer","anchor","confirm","PROPERTY_MAP","c","d","f","g","k","l","m","og","r","v","w","ft","n","s","y","1","2","3","tableRef","createRef","cartDrawerOpen","setCartDrawerOpen","React","userMenuAnchorEl","setUserMenuAnchorEl","cartAction","icon","Badge","badgeContent","max","tooltip","isFreeAction","userAction","actions","setActions","setCategoryLookup","categoryLookup","setSubCategoryLookup","subCategoryLookup","catDefaultFilter","match","params","cat","decodeURIComponent","subCatDefaultFilter","subcat","columns","field","lookup","filterPlaceholder","defaultFilter","editComponent","arg","filtering","render","row","CS","EA","codes","split","code","Chip","hidden","query","reject","page","totalCount","options","headerStyle","position","top","filterCellStyle","maxBodyHeight","pageSize","pageSizeOptions","debounceInterval","search","emptyRowsWhenPaging","flexGrow","boxShadow","toolbar","backgroundColor","background","default","text","menuButton","marginLeft","grow","borderRadius","shape","fade","common","white","up","searchIcon","pointerEvents","inputRoot","inputInput","transition","transitions","create","showCart","AppBar","Toolbar","Fade","in","children","edge","gridRoot","overflowX","minHeight","crumbz","gridBtn","textDecoration","cursor","catHover","catBtn","overflow","overflowWrap","hyphens","categories","setCategories","selectedCat","setSelectedCat","subCategories","setSubCategories","Object","keys","transitionDelay","toUpperCase","Grid","container","justify","Zoom","item","xs","sm","md","lg","subCat","encodeURIComponent","Loading","fixed","pt","textAlign","verticalAlign","fontFamily","lineHeight","leftCenter","float","blockRight","center","fontWeight","whiteSpace","SquarePaymentForm","cardBrand","setCardBrand","nonce","setNonce","googlePay","setGooglePay","applePay","setApplePay","masterpass","setMasterpass","loading","setLoading","config","applicationId","locationId","inputClass","autoBuild","inputStyles","elementId","cardNumber","placeholder","cvv","expirationDate","postalCode","callbacks","methodsSupported","methods","createPaymentRequest","requestShippingAddress","requestBillingInfo","currencyCode","countryCode","amount","pending","lineItems","cardNonceResponseReceived","errors","cardData","forEach","handleNext","unsupportedBrowserDetected","inputEventReceived","inputEvent","eventType","paymentFormLoaded","paymentFormRef","useRef","paymentForm","current","build","requestCardNonce","SquarePayment","jsloaded","setJsloaded","sqPaymentScript","document","createElement","src","onload","getElementsByTagName","appendChild","SqPaymentForm","notice","formControl","slider","paymentContainer","onRegisterFn","purchaseshare","setPurchaseshare","understandBylaws","setUnderstandBylaws","registrationFee","setRegistrationFee","subsityAmount","setSubsityAmount","otherexpexplain","setOtherexpexplain","doRegister","valuetext","helperText","FormControl","component","FormLabel","RadioGroup","FormControlLabel","control","Radio","Slider","getAriaValueText","_","amt","Array","isArray","marks","valueLabelDisplay","FormHelperText","FormGroup","Checkbox","multiline","rowsMax","registrationStyles","opt","Registration","setOpt","setCanGoToNextStep","backDisabled","handleBack","nextDisabled","nextText","onCanContinue","Paper","StepButtons","reviewStyles","infoContainer","ReviewCart","setEmail","setPhone","setName","setAddress","setNotes","member","prevOrder","UserId","MemberId","direction","cartItems","paymentStyles","Payment","stepButtonsStyles","button","checkoutStyles","instructions","stepBtnz","finished","activeStep","setActiveStep","canGoToNextStep","steps","prevActiveStep","Stepper","Step","StepLabel","checkSession","getPreferences","parse","ThemeProvider","CssBaseline","path","exact","Checkout","DataTable","Landing","combineReducers","state","action","createStore","applyMiddleware","thunk","ReactDOM","store","querySelector"],"mappings":"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","file":"static/js/main.e862ebf8.chunk.js","sourcesContent":["import red from '@material-ui/core/colors/red'\nimport { createMuiTheme } from '@material-ui/core/styles'\n\nconst darkTheme = createMuiTheme({\n  palette: {\n    type: 'dark',\n    primary: {\n      main: '#556cd6'\n    },\n    secondary: {\n      main: '#FF4081'\n    },\n    error: {\n      main: red.A400\n    }\n  }\n})\n\nconst lightTheme = createMuiTheme({\n  palette: {\n    type: 'light',\n    primary: {\n      main: '#556cd6'\n    },\n    secondary: {\n      main: '#FF4081'\n    },\n    error: {\n      main: red.A400\n    }\n  }\n})\nexport { darkTheme, lightTheme }\n","import { Order } from './types/Order'\n\nexport const API_HOST: string =\n  process.env.NODE_ENV === 'production'\n    ? 'https://api.marshcoop.org'\n    : 'http://localhost:3000'\n\nexport const TAX_RATE = 0.06175\nexport const TAX_RATE_STRING = `${(TAX_RATE * 100).toFixed(3)}%`\n\nexport const BLANK_ORDER: Order = {\n  id: 'new',\n  status: 'new',\n  payment_status: 'balance_due',\n  shipment_status: 'backorder',\n  total: 0.0,\n  item_count: 0,\n  subtotal: 0,\n  name: '',\n  email: '',\n  phone: '',\n  address: '',\n  notes: '',\n  createdAt: '',\n  updatedAt: '',\n  OrderLineItems: []\n}\n\nexport const SQUARE_PAYMENT_JS = 'https://js.squareupsandbox.com/v2/paymentform'\n// process.env.NODE_ENV === 'production'\n//   ? 'https://js.squareup.com/v2/paymentform'\n//   : 'https://js.squareupsandbox.com/v2/paymentform'\nexport const SQUARE_APP_ID: string = 'sandbox-sq0idb-JHHiCIhNvJdJH4pJxLaDzA'\nexport const SQUARE_LOCATION_ID: string = 'D2MV0BZC6EV9Y'\n\n// export const ORDER_PAYMENT_STATUSES: PaymentStatus[] = [\n//   'balance_due',\n//   'credit_owed',\n//   'failed',\n//   'paid',\n//   'void'\n// ]\n\n// export const ORDER_SHIPMENT_STATUSES: ShipmentStatus[] = [\n//   'backorder',\n//   'canceled',\n//   'partial',\n//   'pending',\n//   'ready',\n//   'shipped'\n// ]\n","import { ThunkAction, ThunkDispatch } from 'redux-thunk'\nimport { AnyAction } from 'redux'\n\nimport { User, LoginError } from '../../types/User'\nimport { API_HOST } from '../../constants'\n\nexport interface SetAction {\n  type: 'SET'\n  user: User\n}\nexport interface SetFetcing {\n  type: 'SET_FETCHING'\n  isFetching: boolean\n}\nexport interface SetError {\n  type: 'SET_ERROR'\n  error: LoginError\n}\n\nexport type Action = SetAction | SetFetcing | SetError\n\nexport const set = (user: User): SetAction => {\n  return { type: 'SET', user }\n}\nexport const setError = (error: LoginError): SetError => {\n  return { type: 'SET_ERROR', error }\n}\nexport const isFetching = (isFetching: boolean): SetFetcing => {\n  return { type: 'SET_FETCHING', isFetching }\n}\n\nconst NULL_USER: User = {\n  id: undefined,\n  email: undefined,\n  token: undefined,\n  role: undefined\n}\n\nexport const checkSession = (): ThunkAction<\n  Promise<void>,\n  {},\n  {},\n  AnyAction\n> => {\n  return async (dispatch: ThunkDispatch<{}, {}, AnyAction>): Promise<void> => {\n    return new Promise<void>(resolve => {\n      dispatch(isFetching(true))\n\n      // gonna get weird when there's no localStorage :/\n      const token = localStorage && localStorage.getItem('token')\n\n      if (!token) {\n        // reject('no token')\n        dispatch(isFetching(false))\n        dispatch(set(NULL_USER))\n        resolve()\n        return\n      }\n\n      fetch(`${API_HOST}/check_session`, {\n        headers: { Authorization: `Bearer ${token}` }\n      })\n        .then(response => response.json())\n        .then(response => {\n          console.log('check_session', response)\n          if (response.msg === 'ok' && response.user) {\n            dispatch(set({ ...response.user, token }))\n          } else {\n            dispatch(set(NULL_USER))\n          }\n        })\n        .catch(err => {\n          console.warn('check_session caught err:', err)\n          // hmm, maybe the API is just down? ...is it really necessary to NULL the user?\n          dispatch(set(NULL_USER))\n        })\n        .finally(() => {\n          dispatch(isFetching(false))\n          resolve()\n        })\n    })\n  }\n}\n\nexport const register = (\n  regKey: string,\n  password: string\n): ThunkAction<Promise<void>, {}, {}, AnyAction> => {\n  return async (dispatch: ThunkDispatch<{}, {}, AnyAction>): Promise<void> => {\n    return new Promise<void>(resolve => {\n      dispatch(isFetching(true))\n\n      fetch(`${API_HOST}/register`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({ regKey, password })\n      })\n        .then(response => response.json())\n        .then(response => {\n          // console.log('[session/actions] user login', response)\n          if (response.msg === 'ok' && response.user && response.user.token) {\n            localStorage && localStorage.setItem('token', response.user.token)\n            dispatch(set(response.user))\n          } else {\n            dispatch(setError({ error: 'error', reason: response.message }))\n          }\n        })\n        .catch(e => {\n          console.log('register error:', e)\n          dispatch(\n            setError({\n              error: 'error',\n              reason: 'unable to register right now :('\n            })\n          )\n        })\n        .finally(() => {\n          dispatch(isFetching(false))\n          resolve()\n        })\n    })\n  }\n}\n\nexport const login = (\n  email: string,\n  password: string\n): ThunkAction<Promise<void>, {}, {}, AnyAction> => {\n  return async (dispatch: ThunkDispatch<{}, {}, AnyAction>): Promise<void> => {\n    return new Promise<void>(resolve => {\n      dispatch(isFetching(true))\n\n      fetch(`${API_HOST}/login`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({ email, password })\n      })\n        .then(response => response.json())\n        .then(response => {\n          // console.log('[session/actions] user login', response)\n          if (response.msg === 'ok' && response.user && response.user.token) {\n            localStorage && localStorage.setItem('token', response.user.token)\n            dispatch(set(response.user))\n          } else {\n            dispatch(setError({ error: 'error', reason: response.message }))\n          }\n        })\n        .catch(e => {\n          console.log('login error:', e)\n          dispatch(\n            setError({ error: 'error', reason: 'unable to login right now :(' })\n          )\n        })\n        .finally(() => {\n          dispatch(isFetching(false))\n          resolve()\n        })\n    })\n  }\n}\n\nexport const logout = (): ThunkAction<Promise<void>, {}, {}, AnyAction> => {\n  return async (dispatch: ThunkDispatch<{}, {}, AnyAction>): Promise<void> => {\n    return new Promise<void>(resolve => {\n      dispatch(isFetching(true))\n\n      const token = localStorage && localStorage.getItem('token')\n      fetch(`${API_HOST}/logout`, {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`\n        }\n      })\n        .catch(console.warn)\n        .finally(() => {\n          localStorage && localStorage.removeItem('token')\n          dispatch(set(NULL_USER))\n          dispatch(isFetching(false))\n          resolve()\n        })\n    })\n  }\n}\n","import { ThunkAction, ThunkDispatch } from 'redux-thunk'\nimport { AnyAction } from 'redux'\n\nimport { Preferences, PreferencesError } from '../../types/Preferences'\n\nconst DEFAULT_PREFERENCES: Preferences = {\n  dark_mode: 'false'\n}\n\nexport interface SetAction {\n  type: 'SET_PREFERENCES'\n  preferences: Preferences\n}\nexport interface SetFetcing {\n  type: 'SET_FETCHING_PREFERENCES'\n  isFetching: boolean\n}\nexport interface SetError {\n  type: 'SET_ERROR_PREFERENCES'\n  error: PreferencesError\n}\n\nexport type Action = SetAction | SetFetcing | SetError\n\nexport const set = (preferences: Preferences): SetAction => {\n  return { type: 'SET_PREFERENCES', preferences }\n}\nexport const setError = (error: PreferencesError): SetError => {\n  return { type: 'SET_ERROR_PREFERENCES', error }\n}\nexport const isFetching = (isFetching: boolean): SetFetcing => {\n  return { type: 'SET_FETCHING_PREFERENCES', isFetching }\n}\n\nexport const getPreferences = (): ThunkAction<\n  Promise<void>,\n  {},\n  {},\n  AnyAction\n> => {\n  return async (dispatch: ThunkDispatch<{}, {}, AnyAction>): Promise<void> => {\n    return new Promise<void>((resolve, rject) => {\n      dispatch(isFetching(true))\n\n      const preferences = localStorage && localStorage.getItem('preferences')\n      if (!preferences) {\n        dispatch(set(DEFAULT_PREFERENCES))\n      } else {\n        dispatch(set(JSON.parse(preferences)))\n      }\n      dispatch(isFetching(false))\n      resolve()\n    })\n  }\n}\n\nexport const setPreferences = (\n  preferences: Preferences\n): ThunkAction<Promise<void>, {}, {}, AnyAction> => {\n  return async (dispatch: ThunkDispatch<{}, {}, AnyAction>): Promise<void> => {\n    return new Promise<void>((resolve, rject) => {\n      dispatch(isFetching(true))\n\n      if (!preferences) {\n        dispatch(set(DEFAULT_PREFERENCES))\n      } else {\n        localStorage &&\n          localStorage.setItem('preferences', JSON.stringify(preferences))\n        dispatch(set(preferences))\n      }\n      dispatch(isFetching(false))\n      resolve()\n    })\n  }\n}\n","import React, { useState, useEffect } from 'react'\nimport { withRouter, RouteComponentProps } from 'react-router-dom'\nimport { connect } from 'react-redux'\nimport { ThunkDispatch } from 'redux-thunk'\nimport { withStyles } from '@material-ui/core/styles'\nimport Menu, { MenuProps } from '@material-ui/core/Menu'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport Switch from '@material-ui/core/Switch'\n\nimport { RootState } from '../redux'\nimport { PreferencesServiceProps } from '../redux/preferences/reducers'\nimport { setPreferences } from '../redux/preferences/actions'\nimport { Preferences } from '../types/Preferences'\nimport { logout } from '../redux/session/actions'\nimport { UserServiceProps } from '../redux/session/reducers'\n\ninterface DispatchProps {\n  setPreferences: (preferences: Preferences) => void\n  logout: () => void\n}\n\nconst StyledMenu = withStyles({\n  paper: {\n    border: '1px solid #d3d4d5'\n  }\n})((props: MenuProps) => (\n  <Menu\n    elevation={0}\n    getContentAnchorEl={null}\n    anchorOrigin={{\n      vertical: 'bottom',\n      horizontal: 'center'\n    }}\n    transformOrigin={{\n      vertical: 'top',\n      horizontal: 'center'\n    }}\n    {...props}\n  />\n))\n\nconst StyledMenuItem = withStyles(theme => ({\n  root: {\n    // '&:focus': {\n    //   backgroundColor: theme.palette.primary.main,\n    //   '& .MuiListItemIcon-root, & .MuiListItemText-primary': {\n    //     color: theme.palette.common.white\n    //   }\n    // }\n  }\n}))(MenuItem)\n\ninterface UserMenuProps {\n  anchorEl: HTMLElement | null\n  setAnchorEl: React.Dispatch<React.SetStateAction<HTMLElement | null>>\n}\ntype Props = PreferencesServiceProps &\n  DispatchProps &\n  RouteComponentProps &\n  UserMenuProps &\n  UserServiceProps\n\nfunction UserMenu(props: Props) {\n  // const [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null)\n  const {\n    anchorEl,\n    setAnchorEl,\n    preferencesService,\n    setPreferences,\n    userService,\n    logout,\n    history\n  } = props\n\n  const [useDarkTheme, setUseDarkTheme] = useState<null | boolean>(null)\n\n  useEffect(() => {\n    if (!preferencesService.isFetching && preferencesService.preferences) {\n      if (useDarkTheme === null) {\n        setUseDarkTheme(\n          preferencesService.preferences.dark_mode === 'true' ? true : false\n        )\n      }\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [preferencesService])\n\n  useEffect(() => {\n    if (\n      preferencesService &&\n      preferencesService.preferences &&\n      useDarkTheme !== null &&\n      (preferencesService.preferences.dark_mode === 'true' ? true : false) !==\n        useDarkTheme\n    ) {\n      setPreferences({ dark_mode: useDarkTheme ? 'true' : 'false' })\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [useDarkTheme])\n\n  const handleClose = () => {\n    setAnchorEl(null)\n  }\n\n  const hasUser = !!(userService && userService.user && userService.user.id)\n  const isAdmin = !!(\n    userService &&\n    userService.user &&\n    userService.user.role === 'admin'\n  )\n  return (\n    <>\n      <StyledMenu\n        id=\"user-menu\"\n        anchorEl={anchorEl}\n        keepMounted\n        open={Boolean(anchorEl)}\n        onClose={handleClose}\n      >\n        {hasUser && (\n          <ListItemText\n            primary={userService.user && userService.user.email}\n            secondary={userService.user && userService.user.role}\n            style={{ padding: '0 16px 6px', borderBottom: 'thin solid #f60' }}\n          />\n        )}\n        {isAdmin && (\n          <StyledMenuItem\n            onClick={() => {\n              handleClose()\n              window.location.assign('https://admin.marshcoop.org/')\n            }}\n          >\n            <ListItemText primary=\"ADMIN\" />\n          </StyledMenuItem>\n        )}\n\n        {hasUser && (\n          <StyledMenuItem\n            onClick={() => {\n              logout()\n              handleClose()\n            }}\n          >\n            <ListItemText primary=\"Log out\" />\n          </StyledMenuItem>\n        )}\n\n        {!hasUser && (\n          <StyledMenuItem\n            onClick={() => {\n              history.push('/login')\n              handleClose()\n            }}\n          >\n            <ListItemText primary=\"Sign in\" />\n          </StyledMenuItem>\n        )}\n\n        {!hasUser && (\n          <StyledMenuItem\n            onClick={() => {\n              history.push('/register')\n              handleClose()\n            }}\n          >\n            <ListItemText primary=\"Register\" />\n          </StyledMenuItem>\n        )}\n\n        <StyledMenuItem onClick={() => setUseDarkTheme(prev => !prev)}>\n          <ListItemText>\n            <div\n              style={{\n                display: 'flex',\n                justifyContent: 'space-between',\n                alignItems: 'center'\n              }}\n            >\n              <span>Dark Theme</span>\n              <Switch\n                checked={\n                  useDarkTheme === null || useDarkTheme === undefined\n                    ? false\n                    : useDarkTheme\n                }\n                value=\"useDarkTheme\"\n                inputProps={{ 'aria-label': 'secondary checkbox' }}\n              />\n            </div>\n          </ListItemText>\n        </StyledMenuItem>\n      </StyledMenu>\n    </>\n  )\n}\n\nconst mapStateToProps = (\n  states: RootState\n): PreferencesServiceProps & UserServiceProps => {\n  return {\n    preferencesService: states.preferences.preferencesService,\n    userService: states.session.userService\n  }\n}\n\nconst mapDispatchToProps = (\n  dispatch: ThunkDispatch<{}, {}, any>\n): DispatchProps => {\n  return {\n    setPreferences: (preferences: Preferences) =>\n      dispatch(setPreferences(preferences)),\n    logout: () => dispatch(logout())\n  }\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(withRouter(UserMenu))\n","import { useEffect, useState } from 'react'\n\nimport { AppDatabase } from '../appDatabase'\nimport { Service } from '../types/Service'\nimport { Cart } from '../types/Cart'\nimport { Product } from '../types/Product'\nimport { OrderLineItem } from '../types/Order'\nimport { IDatabaseChange } from 'dexie-observable/api'\n\nconst db = new AppDatabase()\n\nconst useCartService = () => {\n  const [result, setResult] = useState<Service<Cart>>({\n    status: 'loading'\n  })\n  useEffect(() => {\n    db.cart\n      .toArray()\n      .then(line_items =>\n        setResult({ status: 'loaded', payload: { line_items: line_items } })\n      )\n      .catch(e => {\n        // console.warn('[useCartService] caught error:', e)\n        setResult({ status: 'error', error: e })\n      })\n\n    db.on('changes', changes => {\n      changes.find(change => change.table === 'cart') &&\n        db.cart\n          .toArray()\n          .then(line_items => {\n            console.log('[useCartService] db changes!! ')\n            setResult({ status: 'loaded', payload: { line_items: line_items } })\n          })\n          .catch(e => {\n            // console.warn('[useCartService] caught error:', e)\n            setResult({ status: 'error', error: e })\n          })\n    })\n  }, [])\n\n  return result\n}\n\nconst getCartItemCount = () => {\n  return db.cart.count().catch(e => {\n    console.warn('[useCartItemCount] caught error:', e)\n    return 0\n  })\n}\n\nconst useCartItemCount = () => {\n  const [itemCount, setItemCount] = useState(0)\n\n  const subscriber = (changes: IDatabaseChange[]) => {\n    changes.find(change => change.table === 'cart') &&\n      getCartItemCount().then(count => setItemCount(count))\n  }\n\n  useEffect(() => {\n    getCartItemCount().then(count => setItemCount(count))\n\n    db.on('changes', subscriber)\n\n    return () => db.on('changes').unsubscribe(subscriber)\n  }, [])\n\n  return itemCount\n}\n\nconst addToCart = (product: Product) => {\n  let line_item: OrderLineItem = {\n    quantity: 1,\n    total: +product.ws_price,\n    selected_unit: 'CS',\n    price: +product.ws_price,\n    description: `${product.name} ${product.description}`.trim(),\n    kind: 'product',\n    vendor: product.vendor,\n    data: { product }\n  }\n\n  db.cart\n    .add(line_item)\n    .catch(error => console.warn('[addToCart] caught error:', error))\n}\n\nconst removeItemFromCart = (index: number) => {\n  db.cart\n    .delete(index)\n    .catch(error => console.warn('[removeItemFromCart] caught error:', error))\n}\n\nconst emptyCart = () => {\n  db.cart.clear().catch(function(err) {\n    console.warn('[emptyCart] caught error:', err)\n  })\n}\n\nconst updateLineItem = (line_item: OrderLineItem) => {\n  line_item &&\n    line_item.id &&\n    db.cart\n      .update(line_item.id, line_item)\n      .catch(error => console.warn('[updateLineItem] caught error:', error))\n}\n\nexport {\n  useCartService,\n  useCartItemCount,\n  addToCart,\n  removeItemFromCart,\n  emptyCart,\n  updateLineItem\n}\n","import Dexie from 'dexie'\nimport 'dexie-observable'\n\nimport { OrderLineItem } from './types/Order'\n\nexport class AppDatabase extends Dexie {\n  cart: Dexie.Table<OrderLineItem, number>\n\n  constructor() {\n    super('SortaCartDatabase')\n    this.version(1).stores({\n      cart: '++id'\n    })\n    this.cart = this.table('cart')\n  }\n}\n","import React, { useEffect } from 'react'\nimport { withRouter, RouteComponentProps } from 'react-router-dom'\nimport { createStyles, Theme, makeStyles } from '@material-ui/core/styles'\nimport Table from '@material-ui/core/Table'\nimport TableBody from '@material-ui/core/TableBody'\nimport TableCell from '@material-ui/core/TableCell'\nimport TableHead from '@material-ui/core/TableHead'\nimport TableRow from '@material-ui/core/TableRow'\nimport TableFooter from '@material-ui/core/TableFooter'\nimport Tooltip from '@material-ui/core/Tooltip'\nimport Button from '@material-ui/core/Button'\nimport TextField from '@material-ui/core/TextField'\nimport Select from '@material-ui/core/Select'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport IconButton from '@material-ui/core/IconButton'\nimport ClearIcon from '@material-ui/icons/Clear'\n\nimport {\n  // useCartService,\n  // emptyCart,\n  updateLineItem,\n  removeItemFromCart\n  // addToCart\n} from '../services/useCartService'\nimport { Order, OrderLineItem } from '../types/Order'\nimport { TAX_RATE, TAX_RATE_STRING } from '../constants'\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      maxWidth: '95vw',\n      padding: theme.spacing(1),\n      borderCollapse: 'separate',\n      '& td': {\n        border: 'none'\n      }\n    },\n    qtyinput: {\n      width: '50px'\n    }\n  })\n)\n\nfunction usdFormat(num?: number | string) {\n  if (num === undefined) {\n    return '$0.00'\n  } else if (typeof num === 'string') {\n    return `$${parseFloat(num).toFixed(2)}`\n  } else {\n    return `$${num.toFixed(2)}`\n  }\n}\n\nfunction subtotal(items: OrderLineItem[]) {\n  return items.map(({ total }) => total).reduce((sum, i) => sum + i, 0)\n}\n\nfunction liTotal(line_item: OrderLineItem): number {\n  const product = line_item.data && line_item.data.product\n  if (product) {\n    return line_item.selected_unit === 'EA' && product.u_price\n      ? line_item.quantity * parseFloat(product.u_price)\n      : line_item.quantity * parseFloat(product.ws_price)\n  } else {\n    return line_item.quantity * (line_item.price || 0)\n  }\n}\n\nfunction liPkSize(line_item: OrderLineItem): string {\n  const product = line_item.data && line_item.data.product\n  if (product) {\n    const pksize = []\n    product.pk && product.pk !== 1 && pksize.push(product.pk)\n    product.size && pksize.push(product.size)\n    return pksize.join(' / ')\n  } else {\n    return ''\n  }\n}\n\ninterface CartTableProps {\n  line_items: OrderLineItem[]\n  emptyCartAndCloseDrawer?: (\n    event: React.MouseEvent<HTMLButtonElement, MouseEvent>\n  ) => void\n  setOrder?: React.Dispatch<React.SetStateAction<Order>>\n  checkout?: boolean\n  summary?: boolean\n}\n\nfunction CartTable(props: CartTableProps & RouteComponentProps) {\n  const classes = useStyles()\n\n  const { checkout, summary, setOrder } = props\n  const invoiceSubtotal = subtotal(props.line_items)\n  const invoiceTaxes = TAX_RATE * invoiceSubtotal\n  const invoiceTotal = invoiceTaxes + invoiceSubtotal\n\n  useEffect(() => {\n    if (setOrder) {\n      setOrder(order => {\n        const newOrder = {\n          ...order,\n          subtotal: +invoiceSubtotal.toFixed(2),\n          total: +invoiceTotal.toFixed(2),\n          item_count: order.OrderLineItems.filter(li => li.kind === 'product')\n            .length,\n          OrderLineItems: [\n            ...order.OrderLineItems.filter(li => li.kind !== 'tax'),\n            {\n              kind: 'tax',\n              description: TAX_RATE_STRING,\n              quantity: 1,\n              total: +invoiceTaxes.toFixed(2)\n            }\n          ]\n        }\n        console.log('cartTable fx newOrder:', newOrder)\n        return newOrder\n      })\n    }\n  }, [setOrder, invoiceSubtotal, invoiceTaxes, invoiceTotal])\n\n  const handleUnitChange = (line_item: OrderLineItem, unit: string) => {\n    line_item.selected_unit = unit\n    line_item.total = liTotal(line_item)\n    updateLineItem(line_item)\n  }\n\n  const handleQtyChange = (line_item: OrderLineItem, quantity: number) => {\n    line_item.quantity = quantity > 0 ? quantity : 1\n    line_item.total = liTotal(line_item)\n    updateLineItem(line_item)\n  }\n\n  const removeLineItem = (id?: number) => {\n    id && removeItemFromCart(id)\n  }\n\n  // NOTE: this is useful for debugging line item validtion\n  // const setInvalidPrice = () => {\n  //   const someLi = props.line_items.filter(li => li.kind === 'product')[0]\n  //   someLi.total = 0\n  //   someLi.price = 0\n  //   updateLineItem(someLi)\n  // }\n  // const addInvalidItem = () => {\n  //   addToCart({\n  //     id: 666,\n  //     pk: 666,\n  //     ws_price: '0',\n  //     u_price: '0',\n  //     name: 'invalid',\n  //     description: 'product',\n  //     category: 'invalid',\n  //     sub_category: 'invalid',\n  //     size: '6',\n  //     unit_type: 'EA',\n  //     vendor: 'invalid'\n  //   })\n  // }\n\n  return (\n    <Table className={classes.root} aria-label=\"cart\">\n      <TableHead>\n        <TableRow>\n          <TableCell align=\"center\"></TableCell>\n          <TableCell>Description</TableCell>\n          <TableCell align=\"right\">Price</TableCell>\n          <TableCell align=\"center\">Unit</TableCell>\n          <TableCell align=\"right\">Qty.</TableCell>\n          <TableCell align=\"right\">Total</TableCell>\n        </TableRow>\n      </TableHead>\n      <TableBody>\n        {props.line_items.map((line_item, idx) => (\n          <TableRow key={`li${idx}`}>\n            <TableCell align=\"center\">\n              {!summary && (\n                <Tooltip aria-label=\"remove line item\" title=\"REMOVE LINE ITEM\">\n                  <IconButton\n                    aria-label=\"delete\"\n                    size=\"small\"\n                    onClick={(event: any) => removeLineItem(line_item.id)}\n                  >\n                    <ClearIcon fontSize=\"inherit\" />\n                  </IconButton>\n                </Tooltip>\n              )}\n            </TableCell>\n            <TableCell>{line_item.description}</TableCell>\n            <TableCell align=\"right\">\n              <div>\n                {/* {line_item.selected_unit === 'EA' && line_item.u_price\n                    ? usdFormat(line_item.u_price)\n                    : usdFormat(line_item.ws_price)} */}\n                {usdFormat(line_item.price)}\n              </div>\n              <div>{liPkSize(line_item)}</div>\n            </TableCell>\n            <TableCell align=\"center\">\n              {!summary ? (\n                line_item.data &&\n                line_item.data.product &&\n                line_item.data.product.u_price &&\n                line_item.data.product.u_price !==\n                  line_item.data.product.ws_price ? (\n                  <Select\n                    value={line_item.selected_unit}\n                    onChange={(event: any) =>\n                      handleUnitChange(line_item, event.target.value)\n                    }\n                    margin=\"dense\"\n                  >\n                    <MenuItem value=\"CS\">Case</MenuItem>\n                    <MenuItem value=\"EA\">Each</MenuItem>\n                  </Select>\n                ) : line_item.data &&\n                  line_item.data.product &&\n                  line_item.data.product.unit_type === 'CS' ? (\n                  'Case'\n                ) : (\n                  'Each'\n                )\n              ) : (\n                line_item.selected_unit\n              )}\n            </TableCell>\n            <TableCell align=\"right\">\n              {!summary ? (\n                <TextField\n                  className={classes.qtyinput}\n                  type=\"number\"\n                  InputLabelProps={{\n                    shrink: true\n                  }}\n                  margin=\"dense\"\n                  fullWidth\n                  value={line_item.quantity}\n                  onChange={(event: any) =>\n                    handleQtyChange(line_item, parseInt(event.target.value))\n                  }\n                  inputProps={{ min: '1', step: '1' }}\n                />\n              ) : (\n                line_item.quantity\n              )}\n            </TableCell>\n            <TableCell align=\"right\">{usdFormat(line_item.total)}</TableCell>\n          </TableRow>\n        ))}\n        <TableRow>\n          <TableCell rowSpan={3} colSpan={3} />\n          <TableCell>Subtotal</TableCell>\n          <TableCell align=\"right\">\n            {props.line_items && props.line_items.length}\n          </TableCell>\n          <TableCell align=\"right\">{usdFormat(invoiceSubtotal)}</TableCell>\n        </TableRow>\n        <TableRow>\n          <TableCell>Tax</TableCell>\n          <TableCell align=\"right\">{TAX_RATE_STRING}</TableCell>\n          <TableCell align=\"right\">{usdFormat(invoiceTaxes)}</TableCell>\n        </TableRow>\n        <TableRow>\n          <TableCell>Total</TableCell>\n          <TableCell align=\"right\" colSpan={2}>\n            <b>{usdFormat(invoiceTotal)}</b>\n          </TableCell>\n        </TableRow>\n        {/* #NOTE: this is tempporary */}\n        {/* <TableRow>\n          <TableCell colSpan={3} align=\"center\">\n            <Button\n              variant=\"contained\"\n              color=\"secondary\"\n              onClick={() => setInvalidPrice()}\n            >\n              set invalid price\n            </Button>\n          </TableCell>\n          <TableCell colSpan={3} align=\"center\">\n            <Button\n              variant=\"contained\"\n              color=\"primary\"\n              onClick={() => addInvalidItem()}\n            >\n              add invalid item\n            </Button>\n          </TableCell>\n        </TableRow> */}\n      </TableBody>\n      {!summary && !checkout && (\n        <TableFooter>\n          <TableRow>\n            <TableCell colSpan={3} align=\"left\">\n              {props.emptyCartAndCloseDrawer && (\n                <Button\n                  variant=\"contained\"\n                  color=\"secondary\"\n                  onClick={props.emptyCartAndCloseDrawer}\n                >\n                  Empty Cart\n                </Button>\n              )}\n            </TableCell>\n            <TableCell colSpan={3} align=\"right\">\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={() => props.history.push('/checkout')}\n              >\n                Checkout\n              </Button>\n            </TableCell>\n          </TableRow>\n        </TableFooter>\n      )}\n    </Table>\n  )\n}\n\nexport default withRouter(CartTable)\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport { ThunkDispatch } from 'redux-thunk'\nimport { withRouter, RouteComponentProps } from 'react-router-dom'\nimport { Container, Button, TextField } from '@material-ui/core'\nimport Box from '@material-ui/core/Box'\nimport Typography from '@material-ui/core/Typography'\nimport { makeStyles } from '@material-ui/core/styles'\n\nimport { RootState } from '../redux'\nimport { login } from '../redux/session/actions'\nimport { UserServiceProps } from '../redux/session/reducers'\n\ninterface OwnProps {\n  onLoginFn?: () => void\n  showTitle?: boolean\n}\n\ninterface DispatchProps {\n  login: (email: string, password: string) => void\n}\n\ntype Props = UserServiceProps & OwnProps & DispatchProps & RouteComponentProps\n\nconst useStyles = makeStyles(theme => ({\n  form: {\n    width: '100%',\n    // minHeight: '100vh',\n    marginTop: theme.spacing(1),\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center'\n  },\n  title: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'flex-end'\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2)\n  }\n}))\n\nfunction Login(props: Props) {\n  const doLogin = (event: React.FormEvent) => {\n    event.preventDefault()\n    setError('')\n    const target = event.currentTarget as HTMLFormElement\n    const emailEl = target.elements.namedItem('email') as HTMLInputElement\n    const passwordEl = target.elements.namedItem('password') as HTMLInputElement\n\n    if (\n      emailEl &&\n      emailEl.value.length > 0 &&\n      passwordEl &&\n      passwordEl.value.length > 0\n    ) {\n      props.login(emailEl.value, passwordEl.value)\n    }\n  }\n\n  const { userService, showTitle, onLoginFn, history } = props\n  const classes = useStyles()\n  const [error, setError] = useState('')\n\n  // when userService changes, figure out if the page should redirect if a user is already logged in.\n  useEffect(() => {\n    if (userService.user && !userService.isFetching && userService.user.role) {\n      console.log('we gotta user!', userService.user)\n      onLoginFn ? onLoginFn() : history.push('/')\n    }\n    // else if (userService.user && !userService.isFetching) {\n    //   setError('o noz! error! ...hmm??')\n    // }\n  }, [userService, onLoginFn, history])\n\n  return (\n    <Container maxWidth=\"sm\">\n      <form onSubmit={doLogin} className={classes.form}>\n        {showTitle && (\n          <div className={classes.title}>\n            <Typography variant=\"h2\" display=\"block\">\n              Sign In\n            </Typography>\n          </div>\n        )}\n        <TextField\n          label=\"email\"\n          name=\"email\"\n          type=\"text\"\n          autoFocus\n          fullWidth\n          required\n        />\n        <TextField\n          label=\"password\"\n          name=\"password\"\n          type=\"password\"\n          fullWidth\n          required\n        />\n\n        <div>\n          <Button\n            type=\"submit\"\n            fullWidth\n            variant=\"contained\"\n            color=\"primary\"\n            disabled={props.userService.isFetching}\n            className={classes.submit}\n          >\n            Login\n          </Button>\n        </div>\n\n        <Box color=\"error.main\">\n          {props.userService.error && (\n            <>\n              <Typography variant=\"overline\" display=\"block\">\n                onoz! an error!\n              </Typography>\n              <Typography variant=\"body1\" display=\"block\" gutterBottom>\n                {props.userService.error.reason}\n              </Typography>\n            </>\n          )}\n          {error && (\n            <>\n              <Typography variant=\"overline\" display=\"block\">\n                onoz! an error!\n              </Typography>\n              <Typography variant=\"body1\" display=\"block\" gutterBottom>\n                {error}\n              </Typography>\n            </>\n          )}\n        </Box>\n      </form>\n    </Container>\n  )\n}\n\nconst mapStateToProps = (\n  states: RootState,\n  ownProps: OwnProps\n): UserServiceProps => {\n  return {\n    userService: states.session.userService\n  }\n}\n\nconst mapDispatchToProps = (\n  dispatch: ThunkDispatch<{}, {}, any>,\n  ownProps: OwnProps\n): DispatchProps => {\n  return {\n    login: (email, password) => dispatch(login(email, password))\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(Login))\n","import React, { useState } from 'react'\nimport { RouteComponentProps, withRouter } from 'react-router-dom'\nimport {\n  makeStyles,\n  Theme,\n  createStyles,\n  Typography,\n  Button,\n  IconButton,\n  Tooltip\n} from '@material-ui/core'\nimport BackIcon from '@material-ui/icons/ArrowBack'\n\nimport Login from './Login'\n\nconst styles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      display: 'flex',\n      flexDirection: 'column',\n      padding: theme.spacing(2),\n      alignItems: 'center',\n      justifyContent: 'center',\n      height: '100%',\n      width: '350px',\n      [theme.breakpoints.down('xs')]: {\n        width: '100%',\n        padding: theme.spacing(1)\n      }\n    },\n    optItem: {\n      display: 'flex',\n      justifyContent: 'space-between',\n      alignItems: 'center',\n      marginBottom: theme.spacing(2),\n      width: '100%'\n    }\n  })\n)\n\nfunction UserLoginPrompt(props: RouteComponentProps) {\n  const classes = styles()\n  const [doLogin, setDoLogin] = useState(false)\n\n  return (\n    <div className={classes.root}>\n      {doLogin && (\n        <Tooltip aria-label=\"back\" title=\"back\">\n          <IconButton onClick={() => setDoLogin(false)}>\n            <BackIcon />\n          </IconButton>\n        </Tooltip>\n      )}\n      {!doLogin && (\n        <>\n          <div className={classes.optItem}>\n            <Typography variant=\"body1\" gutterBottom>\n              Already a member?\n            </Typography>\n            <Button\n              variant=\"contained\"\n              color=\"primary\"\n              onClick={() => setDoLogin(true)}\n            >\n              Sign In\n            </Button>\n          </div>\n          <div className={classes.optItem}>\n            <Typography variant=\"body1\" gutterBottom>\n              Want to become a member?\n            </Typography>\n            <Button\n              color=\"secondary\"\n              onClick={() => props.history.push('/register')}\n            >\n              Register\n            </Button>\n          </div>\n          {/* <div className={classes.optItem}>\n              <Typography variant=\"body1\" gutterBottom>\n                ...or continue as a\n              </Typography>\n              <Button onClick={() => onCanContinue()}>Guest</Button>\n            </div> */}\n        </>\n      )}\n\n      {doLogin && <Login />}\n      {/* {opt === 'register' && <Register onRegisterFn={onCanContinue} />} */}\n    </div>\n  )\n}\n\nexport default withRouter(UserLoginPrompt)\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport Drawer from '@material-ui/core/Drawer'\n\nimport { RootState } from '../redux'\nimport { UserServiceProps } from '../redux/session/reducers'\nimport { useCartService, emptyCart } from '../services/useCartService'\nimport CartTable from './CartTable'\nimport UserLoginPrompt from './UserLoginPrompt'\n\ninterface CartDrawerProps {\n  open: boolean\n  setOpen: React.Dispatch<React.SetStateAction<boolean>>\n}\n\nfunction CartDrawer(props: CartDrawerProps & UserServiceProps) {\n  const { open, setOpen, userService } = props\n  const cartResult = useCartService()\n\n  const emptyCartAndCloseDrawer = (\n    event: React.MouseEvent<HTMLButtonElement, MouseEvent>\n  ) => {\n    if (window.confirm('Are you sure?')) {\n      emptyCart()\n      setOpen(false)\n    }\n  }\n\n  const hasUser = !!(userService && userService.user && userService.user.id)\n\n  return (\n    <Drawer anchor=\"right\" open={open} onClose={() => setOpen(!open)}>\n      {cartResult.status !== 'loaded' && 'Loading...'}\n      {hasUser ? (\n        cartResult.status === 'loaded' &&\n        cartResult.payload.line_items.length > 0 && (\n          <CartTable\n            line_items={cartResult.payload.line_items}\n            emptyCartAndCloseDrawer={emptyCartAndCloseDrawer}\n          />\n        )\n      ) : (\n        <UserLoginPrompt />\n      )}\n    </Drawer>\n  )\n}\n\nconst mapStateToProps = (states: RootState): UserServiceProps => {\n  return {\n    userService: states.session.userService\n  }\n}\nexport default connect(mapStateToProps, {})(CartDrawer)\n","import React, { useState, useEffect, createRef } from 'react'\nimport { withRouter, RouteComponentProps } from 'react-router-dom'\nimport MaterialTable, { Action } from 'material-table'\nimport Chip from '@material-ui/core/Chip'\nimport Badge from '@material-ui/core/Badge'\nimport IconButton from '@material-ui/core/IconButton'\nimport Tooltip from '@material-ui/core/Tooltip'\nimport Typography from '@material-ui/core/Typography'\nimport Button from '@material-ui/core/Button'\nimport ShoppingCartIcon from '@material-ui/icons/ShoppingCart'\nimport AddShoppingCartIcon from '@material-ui/icons/AddShoppingCart'\nimport RemoveShoppingCartIcon from '@material-ui/icons/RemoveShoppingCart'\nimport TagFacesIcon from '@material-ui/icons/TagFaces'\n\nimport UserMenu from './UserMenu'\nimport CartDrawer from './CartDrawer'\nimport { useCartItemCount, addToCart } from '../services/useCartService'\nimport { API_HOST } from '../constants'\n\nconst PROPERTY_MAP: { [index: string]: string } = {\n  a: 'Artificial ingredients',\n  c: 'Low carb',\n  d: 'Dairy free',\n  f: 'Food Service items',\n  g: 'Gluten free',\n  k: 'Kosher',\n  l: 'Low sodium/no salt',\n  m: 'Non-GMO Project Verified',\n  og: 'Organic',\n  r: 'Refined sugar',\n  v: 'Vegan',\n  w: 'Wheat free',\n  ft: 'Fair Trade',\n  n: 'Natural',\n  s: 'Specialty Only',\n  y: 'Yeast free',\n  1: '100% organic',\n  2: '95%+ organic',\n  3: '70%+ organic'\n}\n\nfunction renderCodes(codes: string) {\n  return codes\n    .split(', ')\n    .map((code, idx) =>\n      PROPERTY_MAP[code] ? (\n        <Chip\n          label={PROPERTY_MAP[code]}\n          style={{ margin: 5 }}\n          size=\"small\"\n          key={`pprop${idx}`}\n        />\n      ) : (\n        ''\n      )\n    )\n}\n\nfunction DataTable(\n  props: RouteComponentProps<{ cat?: string; subcat?: string }>\n) {\n  let tableRef = createRef<any>()\n\n  // useEffect(() => {\n  //   // tableRef.current && tableRef.current.onQueryChange()\n  //   // console.log('tableRef.current', tableRef && tableRef.current)\n  // }, [tableRef])\n  const itemCount = useCartItemCount()\n\n  const [cartDrawerOpen, setCartDrawerOpen] = useState(false)\n  const [\n    userMenuAnchorEl,\n    setUserMenuAnchorEl\n  ] = React.useState<null | HTMLElement>(null)\n\n  const handleUserMenuClick = (event: React.MouseEvent<HTMLElement>) => {\n    setUserMenuAnchorEl(event.currentTarget)\n  }\n\n  const cartAction = {\n    icon: () => (\n      <Badge badgeContent={itemCount} max={99} color=\"primary\">\n        <ShoppingCartIcon />\n      </Badge>\n    ),\n    tooltip: 'Cart',\n    isFreeAction: true,\n    onClick: () => setCartDrawerOpen(!cartDrawerOpen)\n  }\n\n  const userAction = {\n    icon: () => <TagFacesIcon />,\n    tooltip: 'User',\n    isFreeAction: true,\n    onClick: handleUserMenuClick\n  }\n\n  const [actions, setActions] = useState<Action<any>[]>([userAction])\n\n  useEffect(() => {\n    if (itemCount) {\n      setActions([cartAction, userAction])\n    } else {\n      setActions([userAction])\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [itemCount]) // note: adding 'cartAction' and 'userAction' to dep array is not pleasant :/\n\n  const [categoryLookup, setCategoryLookup] = useState<object>(() => {\n    fetch(`${API_HOST}/categories`)\n      .then(response => response.json())\n      .then(result => setCategoryLookup(result))\n      .catch(console.warn)\n  })\n\n  const [subCategoryLookup, setSubCategoryLookup] = useState<object>(() => {\n    fetch(`${API_HOST}/sub_categories`)\n      .then(response => response.json())\n      .then(result => setSubCategoryLookup(result))\n      .catch(console.warn)\n  })\n\n  const catDefaultFilter = props.match &&\n    props.match.params &&\n    props.match.params.cat && [decodeURIComponent(props.match.params.cat)]\n  const subCatDefaultFilter = props.match &&\n    props.match.params &&\n    props.match.params.subcat && [decodeURIComponent(props.match.params.subcat)]\n\n  return (\n    <>\n      <MaterialTable\n        tableRef={tableRef}\n        columns={[\n          {\n            title: 'category',\n            field: 'category',\n            type: 'string',\n            lookup: categoryLookup,\n            filterPlaceholder: 'filter',\n            defaultFilter: catDefaultFilter\n          },\n          {\n            title: 'sub category',\n            field: 'sub_category',\n            type: 'string',\n            lookup: subCategoryLookup,\n            editComponent: arg => {\n              console.log('editComponent arg:', arg)\n              return <>subcat</>\n            },\n            filterPlaceholder: 'filter',\n            defaultFilter: subCatDefaultFilter\n          },\n          {\n            title: 'description',\n            field: 'description',\n            type: 'string',\n            filtering: false,\n            render: row => {\n              if (row.name) {\n                return `${row.name} -- ${row.description}`\n              } else {\n                return row.description\n              }\n            }\n          },\n          {\n            title: 'pk',\n            field: 'pk',\n            type: 'numeric',\n            filtering: false\n          },\n          { title: 'size', field: 'size', type: 'string', filtering: false },\n          {\n            title: 'unit type',\n            field: 'unit_type',\n            type: 'string',\n            lookup: { CS: 'Case', EA: 'Each' },\n            filterPlaceholder: 'filter'\n          },\n          {\n            title: 'price',\n            field: 'ws_price',\n            type: 'currency',\n            filtering: false\n          },\n          {\n            title: 'unit price',\n            field: 'u_price',\n            type: 'currency',\n            filtering: false,\n            render: row =>\n              row.ws_price !== row.u_price ? `$${row.u_price}` : ''\n          },\n          {\n            title: 'properties',\n            field: 'codes',\n            type: 'string',\n            lookup: PROPERTY_MAP,\n            filterPlaceholder: 'filter',\n            render: row => renderCodes(row.codes)\n          },\n          {\n            title: undefined,\n            field: undefined,\n            type: 'string',\n            render: row => {\n              const inCart = true\n              const label = inCart\n                ? 'add to shopping cart'\n                : 'remove from shopping cart'\n              return (\n                <Tooltip aria-label={label} title={label}>\n                  <IconButton\n                    color=\"secondary\"\n                    onClick={() => {\n                      addToCart(row)\n                      setCartDrawerOpen(true)\n                    }}\n                  >\n                    {inCart ? (\n                      <AddShoppingCartIcon />\n                    ) : (\n                      <RemoveShoppingCartIcon />\n                    )}\n                  </IconButton>\n                </Tooltip>\n              )\n            }\n          },\n          { title: 'upc', field: 'upc_code', type: 'string', hidden: true },\n          // { title: 'unf', field: 'unf', type: 'string' },\n          { title: 'id', field: 'id', type: 'string', hidden: true }\n        ]}\n        data={query =>\n          new Promise((resolve, reject) => {\n            console.log('query:', query)\n            fetch(`${API_HOST}/products`, {\n              method: 'post',\n              headers: {\n                'Content-Type': 'application/json'\n              },\n              body: JSON.stringify(query)\n            })\n              .then(response => response.json())\n              .then(result => {\n                console.log('result', result)\n                resolve(result)\n              })\n              .catch(err => {\n                console.warn('onoz, caught err:', err)\n                return resolve({ data: [], page: 0, totalCount: 0 })\n              })\n          })\n        }\n        title={\n          <Button\n            variant=\"text\"\n            size=\"large\"\n            onClick={() => props.history.push('/')}\n          >\n            <Typography variant=\"h6\">MARSH COOP</Typography>\n          </Button>\n        }\n        options={{\n          headerStyle: { position: 'sticky', top: 0 },\n          filterCellStyle: { maxWidth: '132px' },\n          maxBodyHeight: 'calc(100vh - 133px)',\n          pageSize: 50,\n          pageSizeOptions: [50, 100, 500],\n          debounceInterval: 750,\n          filtering: true,\n          search: true,\n          emptyRowsWhenPaging: false\n        }}\n        actions={actions}\n      />\n      <CartDrawer open={cartDrawerOpen} setOpen={setCartDrawerOpen} />\n      <UserMenu anchorEl={userMenuAnchorEl} setAnchorEl={setUserMenuAnchorEl} />\n    </>\n  )\n}\n\nexport default withRouter(DataTable)\n","import React, { useState } from 'react'\nimport { withRouter, RouteComponentProps } from 'react-router-dom'\nimport AppBar from '@material-ui/core/AppBar'\nimport Toolbar from '@material-ui/core/Toolbar'\nimport IconButton from '@material-ui/core/IconButton'\nimport Typography from '@material-ui/core/Typography'\nimport Button from '@material-ui/core/Button'\nimport Fade from '@material-ui/core/Fade'\nimport Badge from '@material-ui/core/Badge'\nimport { createStyles, fade, Theme, makeStyles } from '@material-ui/core/styles'\nimport TagFacesIcon from '@material-ui/icons/TagFaces'\n// import SearchIcon from '@material-ui/icons/Search'\nimport ShoppingCartIcon from '@material-ui/icons/ShoppingCart'\n\nimport UserMenu from './UserMenu'\nimport { useCartItemCount } from '../services/useCartService'\nimport CartDrawer from './CartDrawer'\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      flexGrow: 1,\n      boxShadow: 'none'\n    },\n    toolbar: {\n      backgroundColor: theme.palette.background.default,\n      color: theme.palette.text.primary\n    },\n    menuButton: {\n      marginLeft: theme.spacing(2)\n    },\n    grow: {\n      flexGrow: 1\n      // display: 'none',\n      // [theme.breakpoints.up('sm')]: {\n      //   display: 'block'\n      // }\n    },\n    search: {\n      position: 'relative',\n      borderRadius: theme.shape.borderRadius,\n      backgroundColor: fade(theme.palette.common.white, 0.15),\n      '&:hover': {\n        backgroundColor: fade(theme.palette.common.white, 0.25)\n      },\n      marginLeft: 0,\n      width: '100%',\n      [theme.breakpoints.up('sm')]: {\n        marginLeft: theme.spacing(1),\n        width: 'auto'\n      }\n    },\n    searchIcon: {\n      width: theme.spacing(7),\n      height: '100%',\n      position: 'absolute',\n      pointerEvents: 'none',\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center'\n    },\n    inputRoot: {\n      color: 'inherit'\n    },\n    inputInput: {\n      padding: theme.spacing(1, 1, 1, 7),\n      transition: theme.transitions.create('width'),\n      width: '100%',\n      [theme.breakpoints.up('sm')]: {\n        width: 120,\n        '&:focus': {\n          width: 200\n        }\n      }\n    }\n  })\n)\n\ninterface NavBarProps {\n  showCart?: boolean\n  children?: React.ReactNode\n}\n\nfunction NavBar(props: NavBarProps & RouteComponentProps) {\n  const classes = useStyles()\n  const itemCount = useCartItemCount()\n\n  const { showCart } = props\n  const [cartDrawerOpen, setCartDrawerOpen] = useState(false)\n  const [userMenuAnchorEl, setUserMenuAnchorEl] = useState<null | HTMLElement>(\n    null\n  )\n\n  const handleUserMenuClick = (event: React.MouseEvent<HTMLElement>) => {\n    setUserMenuAnchorEl(event.currentTarget)\n  }\n\n  return (\n    <AppBar position=\"static\" className={classes.root}>\n      <Toolbar className={classes.toolbar}>\n        <div>\n          <Fade in>\n            <Button\n              variant=\"text\"\n              size=\"large\"\n              onClick={() => props.history.push('/')}\n            >\n              <Typography variant=\"h6\">MARSH COOP</Typography>\n            </Button>\n          </Fade>\n        </div>\n\n        {props.children || <div className={classes.grow}>&nbsp;</div>}\n\n        {/* <div className={classes.search}>\n          <div className={classes.searchIcon}>\n            <SearchIcon />\n          </div>\n          <InputBase\n            placeholder=\"Search\"\n            classes={{\n              root: classes.inputRoot,\n              input: classes.inputInput\n            }}\n            inputProps={{ 'aria-label': 'search' }}\n          />\n        </div> */}\n\n        {showCart && itemCount > 0 && (\n          <IconButton\n            edge=\"end\"\n            className={classes.menuButton}\n            color=\"inherit\"\n            aria-label=\"show cart\"\n            onClick={() => setCartDrawerOpen(prev => !prev)}\n          >\n            <Badge badgeContent={itemCount} max={99} color=\"secondary\">\n              <ShoppingCartIcon />\n            </Badge>\n          </IconButton>\n        )}\n\n        <IconButton\n          edge=\"end\"\n          className={classes.menuButton}\n          color=\"inherit\"\n          aria-label=\"user menu\"\n          onClick={handleUserMenuClick}\n        >\n          <TagFacesIcon />\n        </IconButton>\n      </Toolbar>\n      <UserMenu anchorEl={userMenuAnchorEl} setAnchorEl={setUserMenuAnchorEl} />\n      <CartDrawer open={cartDrawerOpen} setOpen={setCartDrawerOpen} />\n    </AppBar>\n  )\n}\n\nexport default withRouter(NavBar)\n","import React, { useState, useEffect } from 'react'\nimport { withRouter, RouteComponentProps } from 'react-router-dom'\n// import Paper from '@material-ui/core/Paper'\nimport Typography from '@material-ui/core/Typography'\nimport Button from '@material-ui/core/Button'\nimport Grid from '@material-ui/core/Grid'\nimport Fade from '@material-ui/core/Fade'\nimport Zoom from '@material-ui/core/Zoom'\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight'\nimport { createStyles, Theme, makeStyles } from '@material-ui/core/styles'\n\nimport NavBar from './NavBar'\nimport { API_HOST } from '../constants'\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    gridRoot: {\n      width: '100%',\n      overflowX: 'auto',\n      minHeight: 'calc(100vh - 64px)',\n      padding: theme.spacing(2),\n      display: 'flex'\n    },\n    crumbz: {\n      display: 'flex',\n      flexDirection: 'row',\n      justifyContent: 'flex-start',\n      alignItems: 'center',\n      flexGrow: 1\n    },\n    gridBtn: {\n      width: '100%',\n      height: '100%',\n      background: theme.palette.background.paper,\n      '&:hover': {\n        textDecoration: 'underline',\n        cursor: 'pointer'\n      }\n    },\n    catHover: {\n      '&:hover': {\n        textDecoration: 'underline',\n        cursor: 'pointer'\n      }\n    },\n    catBtn: {\n      overflow: 'hidden',\n      overflowWrap: 'break-word',\n      hyphens: 'auto'\n    }\n  })\n)\n\nfunction Landing(props: RouteComponentProps) {\n  const classes = useStyles()\n\n  const [categories, setCategories] = useState<string[]>([])\n  const [selectedCat, setSelectedCat] = useState('')\n  const [subCategories, setSubCategories] = useState<\n    { name: string; label: string }[]\n  >([])\n\n  useEffect(() => {\n    fetch(`${API_HOST}/categories`)\n      .then(response => response.json())\n      .then(result => {\n        console.log('result', result)\n        setCategories(Object.keys(result))\n      })\n      .catch(err => {\n        console.warn('onoz, caught err:', err)\n        setCategories([])\n      })\n  }, [setCategories])\n\n  useEffect(() => {\n    fetch(`${API_HOST}/sub_categories`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({ categories: [selectedCat] })\n    })\n      .then(response => response.json())\n      .then(result => {\n        console.log('result', result)\n        setSubCategories(\n          Object.keys(result).map(name => ({\n            name,\n            label: name\n              .split(':')\n              .join(': ')\n              .split(',')\n              .join(', ')\n              .split('/')\n              .join(' / ')\n              .split('-')\n              .join(' - ')\n          }))\n        )\n      })\n      .catch(err => {\n        console.warn('onoz, caught err:', err)\n        setSubCategories([])\n      })\n  }, [selectedCat, setSubCategories])\n\n  return (\n    <>\n      <NavBar showCart>\n        {selectedCat && (\n          <div className={classes.crumbz}>\n            <Fade in>\n              <ChevronRightIcon fontSize=\"large\" />\n            </Fade>\n            <Fade in style={{ transitionDelay: '50ms' }}>\n              <Button\n                variant=\"text\"\n                size=\"large\"\n                onClick={() => setSelectedCat('')}\n              >\n                <Typography\n                  variant=\"h6\"\n                  className={selectedCat && classes.catHover}\n                >\n                  CATEGORIES\n                </Typography>\n              </Button>\n            </Fade>\n\n            <Fade in style={{ transitionDelay: '100ms' }}>\n              <ChevronRightIcon fontSize=\"large\" />\n            </Fade>\n            <Fade in style={{ transitionDelay: '150ms' }}>\n              <Typography variant=\"h6\">{selectedCat.toUpperCase()}</Typography>\n            </Fade>\n          </div>\n        )}\n      </NavBar>\n      {/* <Paper className={classes.root}> */}\n      <Grid container spacing={4} justify=\"center\" className={classes.gridRoot}>\n        {categories &&\n          !selectedCat &&\n          categories.map((i, idx) => (\n            <Zoom\n              in\n              style={{ transitionDelay: `${idx * 50}ms` }}\n              key={`lb${idx}`}\n            >\n              <Grid item xs={12} sm={4} md={3} lg={2}>\n                <Button\n                  className={classes.gridBtn}\n                  variant=\"outlined\"\n                  size=\"large\"\n                  key={`lb${idx}`}\n                  onClick={() => setSelectedCat(i)}\n                >\n                  <Typography variant=\"h5\" className={classes.catBtn}>\n                    {i}\n                  </Typography>\n                </Button>\n              </Grid>\n            </Zoom>\n          ))}\n\n        {categories.length > 0 && !selectedCat && (\n          <Zoom\n            in\n            style={{\n              transitionDelay: `${categories.length * 50}ms`\n            }}\n          >\n            <Grid item xs={12} sm={4} md={3} lg={3}>\n              <Button\n                className={classes.gridBtn}\n                variant=\"outlined\"\n                size=\"large\"\n                onClick={() => props.history.push('/products')}\n              >\n                <Typography variant=\"h5\" className={classes.catBtn}>\n                  See Everything\n                </Typography>\n              </Button>\n            </Grid>\n          </Zoom>\n        )}\n\n        {subCategories &&\n          selectedCat &&\n          subCategories.map((subCat, idx) => (\n            <Zoom\n              in\n              style={{ transitionDelay: `${idx * 50}ms` }}\n              key={`lb${idx}`}\n            >\n              <Grid item xs={12} sm={4} md={3}>\n                <Button\n                  className={classes.gridBtn}\n                  variant=\"outlined\"\n                  size=\"large\"\n                  key={`lb${idx}`}\n                  onClick={() =>\n                    props.history.push(\n                      `/products/${encodeURIComponent(\n                        selectedCat\n                      )}/${encodeURIComponent(subCat.name)}`\n                    )\n                  }\n                >\n                  <Typography variant=\"h5\" className={classes.catBtn}>\n                    {subCat.label}\n                  </Typography>\n                </Button>\n              </Grid>\n            </Zoom>\n          ))}\n\n        {subCategories.length > 0 && selectedCat && (\n          <Zoom\n            in\n            style={{\n              transitionDelay: `${subCategories.length * 50}ms`\n            }}\n          >\n            <Grid item xs={12} sm={4} md={3}>\n              <Button\n                className={classes.gridBtn}\n                variant=\"outlined\"\n                size=\"large\"\n                onClick={() =>\n                  props.history.push(\n                    `/products/${encodeURIComponent(selectedCat)}`\n                  )\n                }\n              >\n                <Typography variant=\"h5\" className={classes.catBtn}>\n                  See Everything\n                </Typography>\n              </Button>\n            </Grid>\n          </Zoom>\n        )}\n      </Grid>\n      {/* </Paper> */}\n    </>\n  )\n}\n\nexport default withRouter(Landing)\n","import React from 'react'\nimport { Container } from '@material-ui/core'\nimport Box from '@material-ui/core/Box'\n\nexport default function Loading() {\n  return (\n    <Container fixed>\n      <Box pt={4} style={{ textAlign: 'center' }}>\n        L O A D I N G . . .\n      </Box>\n    </Container>\n  )\n}\n","import React, { useState, useEffect, useRef } from 'react'\nimport Button from '@material-ui/core/Button'\n\nimport '../sq-payment-form.css'\nimport {\n  SQUARE_APP_ID,\n  SQUARE_LOCATION_ID,\n  SQUARE_PAYMENT_JS\n} from '../constants'\nimport Loading from './Loading'\n\ndeclare const SqPaymentForm: any\n\nconst styles: { [key: string]: React.CSSProperties } = {\n  name: {\n    verticalAlign: 'top',\n    display: 'none',\n    margin: 0,\n    border: 'none',\n    fontSize: '16px',\n    fontFamily: 'Helvetica Neue',\n    padding: '16px',\n    color: '#373F4A',\n    backgroundColor: 'transparent',\n    lineHeight: '1.15em'\n  },\n  leftCenter: {\n    float: 'left',\n    textAlign: 'center'\n  },\n  blockRight: {\n    display: 'block',\n    float: 'right'\n  },\n  center: {\n    textAlign: 'center'\n  },\n  error: {\n    textAlign: 'center',\n    fontWeight: 'bold',\n    fontSize: '1.25rem',\n    whiteSpace: 'pre-wrap',\n    color: 'red'\n  }\n}\n\ninterface SquarePaymentFormProps {\n  paymentForm: any\n  handleNext: () => void\n  amount: number\n}\nfunction SquarePaymentForm(props: SquarePaymentFormProps) {\n  const [cardBrand, setCardBrand] = useState('')\n  const [nonce, setNonce] = useState(undefined)\n  const [googlePay, setGooglePay] = useState(false)\n  const [applePay, setApplePay] = useState(false)\n  const [masterpass, setMasterpass] = useState(false)\n  const [error, setError] = useState('')\n  const [loading, setLoading] = useState(true)\n  const config = {\n    applicationId: SQUARE_APP_ID,\n    locationId: SQUARE_LOCATION_ID,\n    inputClass: 'sq-input',\n    autoBuild: false,\n    inputStyles: [\n      {\n        fontSize: '16px',\n        fontFamily: 'Helvetica Neue',\n        padding: '16px',\n        color: '#373F4A',\n        backgroundColor: 'transparent',\n        lineHeight: '1.15em'\n      }\n    ],\n    applePay: {\n      elementId: 'sq-apple-pay'\n    },\n    masterpass: {\n      elementId: 'sq-masterpass'\n    },\n    googlePay: {\n      elementId: 'sq-google-pay'\n    },\n    cardNumber: {\n      elementId: 'sq-card-number',\n      placeholder: '                  '\n    },\n    cvv: {\n      elementId: 'sq-cvv',\n      placeholder: 'CVV'\n    },\n    expirationDate: {\n      elementId: 'sq-expiration-date',\n      placeholder: 'MM/YY'\n    },\n    postalCode: {\n      elementId: 'sq-postal-code',\n      placeholder: 'Zip'\n    },\n    callbacks: {\n      methodsSupported: (methods: any) => {\n        if (methods.googlePay) {\n          setGooglePay(true)\n        }\n        if (methods.applePay) {\n          setApplePay(true)\n        }\n        if (methods.masterpass) {\n          setMasterpass(true)\n        }\n        return\n      },\n      createPaymentRequest: () => {\n        return {\n          requestShippingAddress: false,\n          requestBillingInfo: true,\n          currencyCode: 'USD',\n          countryCode: 'US',\n          total: {\n            label: 'MARSH COOP',\n            amount: props.amount,\n            pending: false\n          },\n          lineItems: [\n            {\n              label: 'Subtotal',\n              amount: props.amount,\n              pending: false\n            }\n          ]\n        }\n      },\n      cardNonceResponseReceived: (errors: any, nonce: any, cardData: any) => {\n        if (errors) {\n          // Log errors from nonce generation to the Javascript console\n          console.log('Encountered errors:')\n          errors.forEach(function(error: any) {\n            console.log('  ' + error.message)\n          })\n          setError(\n            `Encountered errors:\\n${errors\n              .map((e: any) => e.message)\n              .join('\\n')}`\n          )\n          return\n        }\n        console.log('cardNonceResponseReceived nonce:', nonce)\n        setNonce(nonce)\n        props.handleNext()\n      },\n      unsupportedBrowserDetected: () => {},\n      inputEventReceived: (inputEvent: any) => {\n        switch (inputEvent.eventType) {\n          case 'focusClassAdded':\n            break\n          case 'focusClassRemoved':\n            break\n          case 'errorClassAdded':\n            setError('Please fix card information errors before continuing.')\n            break\n          case 'errorClassRemoved':\n            setError('')\n            break\n          case 'cardBrandChanged':\n            if (inputEvent.cardBrand !== 'unknown') {\n              setCardBrand(inputEvent.cardBrand)\n            } else {\n              setCardBrand('')\n            }\n            break\n          case 'postalCodeChanged':\n            break\n          default:\n            break\n        }\n      },\n      paymentFormLoaded: function() {\n        console.log('paymentFormLoaded!')\n        setLoading(false)\n        // document.getElementById('name').style.display = \"inline-flex\";\n      }\n    }\n  }\n\n  const paymentFormRef = useRef(new props.paymentForm(config))\n\n  function requestCardNonce() {\n    console.log(\n      'requestCardNonce paymentFormRef:',\n      paymentFormRef.current.requestCardNonce,\n      ' props.paymentForm:',\n      props.paymentForm.requestCardNonce\n    )\n    paymentFormRef.current.requestCardNonce &&\n      paymentFormRef.current.requestCardNonce()\n    // props.paymentForm.requestCardNonce()\n  }\n\n  useEffect(() => {\n    console.log(\n      '!!! SquarePaymentForm !!! fx, gonna paymentFormRef.current.build() !!!'\n    )\n    paymentFormRef.current.build()\n    // paymentFormRef && paymentFormRef.current && paymentFormRef.current.build()\n  }, [])\n\n  return (\n    <>\n      {loading && <Loading />}\n      <div style={{ display: loading ? 'hidden' : 'block' }}>\n        <div className=\"container\">\n          <div id=\"form-container\">\n            <div id=\"sq-walletbox\">\n              <button\n                style={{ display: applePay ? 'inherit' : 'none' }}\n                className=\"button-google-pay\"\n                id=\"sq-apple-pay\"\n              ></button>\n              <button\n                style={{ display: masterpass ? 'block' : 'none' }}\n                className=\"sq-apple-pay\"\n                id=\"sq-masterpass\"\n              ></button>\n              <button\n                style={{ display: googlePay ? 'inherit' : 'none' }}\n                className=\"sq-masterpass\"\n                id=\"sq-google-pay\"\n              ></button>\n\n              <div className=\"sq-wallet-divider\">\n                <span className=\"sq-wallet-divider__text\">Or</span>\n              </div>\n            </div>\n\n            <div id=\"sq-ccbox\">\n              <p>\n                <span style={styles.leftCenter}>Enter Card Info Below </span>\n                <span style={styles.blockRight}>{cardBrand.toUpperCase()}</span>\n              </p>\n              <div id=\"cc-field-wrapper\">\n                <div id=\"sq-card-number\"></div>\n                <input type=\"hidden\" id=\"card-nonce\" name=\"nonce\" />\n                <div id=\"sq-expiration-date\"></div>\n                <div id=\"sq-cvv\"></div>\n              </div>\n              <input\n                id=\"name\"\n                style={styles.name}\n                type=\"text\"\n                placeholder=\"Name\"\n              />\n              <div id=\"sq-postal-code\"></div>\n            </div>\n\n            <Button\n              variant=\"contained\"\n              color=\"primary\"\n              onClick={requestCardNonce}\n              fullWidth\n              disabled={nonce !== undefined}\n            >\n              Pay ${(props.amount / 100).toFixed(2)}\n            </Button>\n          </div>\n          <p style={styles.error} id=\"error\">\n            {error}\n          </p>\n        </div>\n      </div>\n    </>\n  )\n}\n\ninterface SquarePaymentProps {\n  handleNext: () => void\n  amount?: number\n}\n\nexport default function SquarePayment(props: SquarePaymentProps) {\n  const [jsloaded, setJsloaded] = useState(false)\n\n  useEffect(() => {\n    let sqPaymentScript = document.createElement('script')\n    sqPaymentScript.src = SQUARE_PAYMENT_JS\n    sqPaymentScript.type = 'text/javascript'\n    sqPaymentScript.async = false\n    sqPaymentScript.onload = () => setJsloaded(true)\n    document.getElementsByTagName('head')[0].appendChild(sqPaymentScript)\n  }, [])\n\n  return jsloaded ? (\n    <SquarePaymentForm\n      paymentForm={SqPaymentForm}\n      handleNext={props.handleNext}\n      amount={props.amount || 0}\n    />\n  ) : (\n    <Loading />\n  )\n}\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport { ThunkDispatch } from 'redux-thunk'\nimport { withRouter, RouteComponentProps } from 'react-router-dom'\nimport Container from '@material-ui/core/Container'\nimport Box from '@material-ui/core/Box'\nimport Typography from '@material-ui/core/Typography'\nimport Radio from '@material-ui/core/Radio'\nimport RadioGroup from '@material-ui/core/RadioGroup'\nimport FormHelperText from '@material-ui/core/FormHelperText'\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\nimport FormControl from '@material-ui/core/FormControl'\nimport FormLabel from '@material-ui/core/FormLabel'\nimport FormGroup from '@material-ui/core/FormGroup'\nimport Checkbox from '@material-ui/core/Checkbox'\nimport TextField from '@material-ui/core/TextField'\nimport { makeStyles } from '@material-ui/core/styles'\n\nimport { RootState } from '../redux'\nimport { login } from '../redux/session/actions'\nimport { UserServiceProps } from '../redux/session/reducers'\nimport SquarePayment from './SquarePayment'\nimport { Slider } from '@material-ui/core'\n\ninterface OwnProps {\n  onRegisterFn?: () => void\n  showTitle?: boolean\n}\n\ninterface DispatchProps {\n  login: (email: string, password: string) => void\n}\n\ntype Props = UserServiceProps & OwnProps & DispatchProps & RouteComponentProps\n\nconst useStyles = makeStyles(theme => ({\n  form: {\n    width: '100%',\n    // minHeight: '100vh',\n    marginTop: theme.spacing(1),\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    '& .MuiFormHelperText-root': {\n      color: theme.palette.error.main,\n      textAlign: 'right'\n    }\n  },\n  title: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'flex-end'\n  },\n  notice: {\n    marginTop: theme.spacing(4),\n    marginBottom: theme.spacing(1)\n  },\n  formControl: {\n    margin: `${theme.spacing(2)}px 0`,\n    '& legend': {\n      fontSize: '1.25rem',\n      marginTop: theme.spacing(2),\n      marginBottom: theme.spacing(1)\n    }\n  },\n  slider: {\n    margin: theme.spacing(4)\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2)\n  },\n  paymentContainer: {\n    height: '100%',\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginBottom: '33vh'\n  }\n}))\n\nfunction Register(props: Props) {\n  const { userService, showTitle, onRegisterFn, history } = props\n  const classes = useStyles()\n  // const [error, setError] = useState('')\n  const [purchaseshare, setPurchaseshare] = useState('')\n  const [understandBylaws, setUnderstandBylaws] = useState(false)\n  const [registrationFee, setRegistrationFee] = useState(100)\n  const [subsityAmount, setSubsityAmount] = useState(99)\n  const [otherexpexplain, setOtherexpexplain] = useState(false)\n\n  const doRegister = () => {\n    console.log('doRegister understandBylaws:', understandBylaws)\n  }\n\n  const handlePurchaseShareChange = (\n    event: React.ChangeEvent<HTMLInputElement>,\n    value: string\n  ) => {\n    console.log('handlePurchaseShareChange value:', value)\n    setRegistrationFee(100)\n    setSubsityAmount(99)\n    setPurchaseshare(value)\n  }\n\n  function valuetext(value: number) {\n    return `$${value.toFixed(2)}`\n  }\n\n  // when userService changes, figure out if the page should redirect if a user is already logged in.\n  useEffect(() => {\n    if (userService.user && !userService.isFetching && userService.user.role) {\n      console.log('we gotta user!', userService.user)\n      onRegisterFn ? onRegisterFn() : history.push('/')\n    }\n    // else if (userService.user && !userService.isFetching) {\n    //   setError('o noz! error! ...hmm??')\n    // }\n  }, [userService, onRegisterFn, history])\n\n  return (\n    <Container maxWidth=\"sm\">\n      <form onSubmit={doRegister} className={classes.form}>\n        {showTitle && (\n          <div className={classes.title}>\n            <Typography variant=\"h2\" display=\"block\">\n              Register\n            </Typography>\n          </div>\n        )}\n        <TextField\n          label=\"email\"\n          name=\"email\"\n          type=\"text\"\n          helperText=\"Required\"\n          autoFocus\n          fullWidth\n          required\n        />\n        <TextField\n          label=\"name\"\n          name=\"name\"\n          type=\"text\"\n          helperText=\"Required\"\n          fullWidth\n          required\n        />\n        <TextField\n          label=\"phone\"\n          name=\"phone\"\n          type=\"phone\"\n          helperText=\"Required\"\n          fullWidth\n          required\n        />\n        <TextField label=\"address\" name=\"address\" type=\"text\" fullWidth />\n\n        <p className={classes.notice}>\n          <i>\n            By purchasing a share in the co-op, I understand that I am an equal\n            owner in the enterprise and am eligible to vote on co-op matters and\n            in board elections and to make proposals for the use of the kitchen\n            and event space. I agree to pay for and pick up my groceries in a\n            timely manner and to collaborate with others for the benefit of my\n            co-members and the community at large. I understand that Member\n            shares cost $100 and I can request a subsidy or contribute to\n            subsidies for others.\n          </i>\n        </p>\n\n        <FormControl component=\"fieldset\" className={classes.formControl}>\n          <FormLabel component=\"legend\">Purchase Share:</FormLabel>\n          <RadioGroup\n            aria-label=\"purchaseshare\"\n            name=\"purchaseshare\"\n            // value={value}\n            onChange={handlePurchaseShareChange}\n          >\n            <FormControlLabel\n              value=\"oneshare\"\n              control={<Radio />}\n              label=\"I am purchasing a share for $100.\"\n            />\n            <FormControlLabel\n              value=\"requestsubsidy\"\n              control={<Radio />}\n              label=\"I can pay some for my share and am requesting a subsidy.\"\n            />\n            {purchaseshare === 'requestsubsidy' && (\n              <Slider\n                className={classes.slider}\n                getAriaValueText={valuetext}\n                value={subsityAmount}\n                onChange={(_, amt: number | number[]) => {\n                  setSubsityAmount(Array.isArray(amt) ? amt[0] : amt)\n                  setRegistrationFee(Array.isArray(amt) ? amt[0] : amt)\n                }}\n                step={1}\n                min={25}\n                max={99}\n                marks={[\n                  {\n                    value: 25,\n                    label: '$25'\n                  },\n                  {\n                    value: 99,\n                    label: '$99'\n                  }\n                ]}\n                valueLabelDisplay=\"on\"\n              />\n            )}\n            <FormControlLabel\n              value=\"payadditional\"\n              control={<Radio />}\n              label=\"I can pay $100 and would like to pay an additional amount to\n              subsidize others.\"\n            />\n            {purchaseshare === 'payadditional' && (\n              <Slider\n                className={classes.slider}\n                getAriaValueText={valuetext}\n                value={registrationFee}\n                onChange={(_, amt: number | number[]) =>\n                  setRegistrationFee(Array.isArray(amt) ? amt[0] : amt)\n                }\n                step={1}\n                min={101}\n                max={1000}\n                marks={[\n                  {\n                    value: 150,\n                    label: '$150'\n                  },\n                  {\n                    value: 250,\n                    label: '$250'\n                  },\n                  {\n                    value: 350,\n                    label: '$350'\n                  },\n                  {\n                    value: 500,\n                    label: '$500'\n                  }\n                ]}\n                valueLabelDisplay=\"on\"\n              />\n            )}\n          </RadioGroup>\n          <FormHelperText>Required</FormHelperText>\n        </FormControl>\n\n        <FormControl component=\"fieldset\" className={classes.formControl}>\n          <FormLabel component=\"legend\">Check any that apply:</FormLabel>\n          <FormGroup>\n            <FormControlLabel\n              control={\n                <Checkbox\n                  // checked={false}\n                  onChange={console.log}\n                  value=\"worker-owner\"\n                />\n              }\n              label=\"I may be interested in participating in the co-op as a worker-owner.\"\n            />\n            <FormControlLabel\n              control={\n                <Checkbox\n                  // checked={false}\n                  onChange={console.log}\n                  value=\"producer-owner\"\n                />\n              }\n              label=\"I may be interested in participating in the co-op as a producer.\"\n            />\n            <FormControlLabel\n              control={\n                <Checkbox\n                  // checked={false}\n                  onChange={console.log}\n                  value=\"kitchenexp\"\n                />\n              }\n              label=\"I have kitchen experience.\"\n            />\n            <FormControlLabel\n              control={\n                <Checkbox\n                  // checked={false}\n                  onChange={console.log}\n                  value=\"farminggardeningexp\"\n                />\n              }\n              label=\"I have farming/gardening experience.\"\n            />\n            <FormControlLabel\n              control={\n                <Checkbox\n                  // checked={false}\n                  onChange={(_, checked: boolean) =>\n                    setOtherexpexplain(checked)\n                  }\n                  value=\"otherexp\"\n                />\n              }\n              label=\"I have other relevant experience.\"\n            />\n            {otherexpexplain && (\n              <TextField\n                label=\"explain\"\n                name=\"otherexpexplain\"\n                type=\"text\"\n                multiline\n                rowsMax=\"10\"\n                fullWidth\n              />\n            )}\n          </FormGroup>\n        </FormControl>\n\n        <FormControl component=\"fieldset\" className={classes.formControl}>\n          <FormLabel component=\"legend\">\n            MARSH Cooperative Bylaws and principles\n          </FormLabel>\n          <FormGroup>\n            <FormControlLabel\n              control={\n                <Checkbox\n                  // checked={false}\n                  name=\"understandBylaws\"\n                  onChange={(_, checked: boolean) =>\n                    setUnderstandBylaws(checked)\n                  }\n                  value=\"agree\"\n                />\n              }\n              label=\"I understand that the MARSH Cooperative Bylaws and principles are\n            available online or upon request and that these documents guide the\n            co-op and its members.\"\n            />\n          </FormGroup>\n          <FormHelperText>Required</FormHelperText>\n        </FormControl>\n\n        <div className={classes.paymentContainer}>\n          {purchaseshare && understandBylaws && (\n            <SquarePayment\n              handleNext={doRegister}\n              amount={registrationFee * 100}\n            />\n          )}\n        </div>\n\n        <Box color=\"error.main\">\n          {props.userService.error && (\n            <>\n              <Typography variant=\"overline\" display=\"block\">\n                onoz! an error!\n              </Typography>\n              <Typography variant=\"body1\" display=\"block\" gutterBottom>\n                {props.userService.error.reason}\n              </Typography>\n            </>\n          )}\n          {/* {error && (\n            <>\n              <Typography variant=\"overline\" display=\"block\">\n                onoz! an error!\n              </Typography>\n              <Typography variant=\"body1\" display=\"block\" gutterBottom>\n                {error}\n              </Typography>\n            </>\n          )} */}\n        </Box>\n      </form>\n    </Container>\n  )\n}\n\nconst mapStateToProps = (\n  states: RootState,\n  ownProps: OwnProps\n): UserServiceProps => {\n  return {\n    userService: states.session.userService\n  }\n}\n\nconst mapDispatchToProps = (\n  dispatch: ThunkDispatch<{}, {}, any>,\n  ownProps: OwnProps\n): DispatchProps => {\n  return {\n    login: (email, password) => dispatch(login(email, password))\n  }\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(withRouter(Register))\n","import React, { useState, useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport { makeStyles, Theme, createStyles } from '@material-ui/core/styles'\nimport Stepper from '@material-ui/core/Stepper'\nimport Step from '@material-ui/core/Step'\nimport StepLabel from '@material-ui/core/StepLabel'\nimport Button from '@material-ui/core/Button'\nimport Tooltip from '@material-ui/core/Tooltip'\nimport IconButton from '@material-ui/core/IconButton'\nimport Typography from '@material-ui/core/Typography'\nimport Grid from '@material-ui/core/Grid'\nimport Paper from '@material-ui/core/Paper'\nimport TextField from '@material-ui/core/TextField'\nimport Box from '@material-ui/core/Box'\nimport BackIcon from '@material-ui/icons/ArrowBack'\n\nimport NavBar from './NavBar'\nimport { useCartService, emptyCart } from '../services/useCartService'\nimport CartTable from './CartTable'\nimport Login from './Login'\nimport Register from './Register'\nimport { Order, OrderLineItem } from '../types/Order'\nimport { BLANK_ORDER, API_HOST } from '../constants'\nimport { UserServiceProps } from '../redux/session/reducers'\nimport { RootState } from '../redux'\nimport SquarePayment from './SquarePayment'\n\nconst registrationStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    opt: {\n      display: 'flex',\n      flexDirection: 'column',\n      padding: `${theme.spacing(4)}px 0`,\n      alignItems: 'center'\n    },\n    optItem: {\n      display: 'flex',\n      justifyContent: 'space-between',\n      alignItems: 'center',\n      marginBottom: theme.spacing(2),\n      maxWidth: '350px',\n      width: '50%',\n      [theme.breakpoints.down('xs')]: {\n        width: '100%',\n        maxWidth: 'unset'\n      }\n    }\n  })\n)\n\nfunction Registration(\n  props: {\n    handleNext: () => void\n    setCanGoToNextStep: React.Dispatch<React.SetStateAction<boolean>>\n  } & StepButtonsProps &\n    UserServiceProps\n) {\n  const classes = registrationStyles()\n  const [opt, setOpt] = useState<'login' | 'register' | 'guest' | undefined>()\n\n  const {\n    setCanGoToNextStep,\n    handleNext,\n    backDisabled,\n    handleBack,\n    nextDisabled,\n    nextText,\n    userService\n  } = props\n\n  useEffect(() => {\n    if (userService && userService.user && userService.user.id) {\n      handleNext && handleNext()\n    } else {\n      setCanGoToNextStep(false)\n    }\n  }, [setCanGoToNextStep, userService, handleNext])\n\n  const onCanContinue = () => {\n    setCanGoToNextStep(true)\n    handleNext()\n  }\n\n  return (\n    <>\n      <Paper>\n        {opt && (\n          <Tooltip aria-label=\"back\" title=\"back\">\n            <IconButton onClick={() => setOpt(undefined)}>\n              <BackIcon />\n            </IconButton>\n          </Tooltip>\n        )}\n        {!opt && (\n          <div className={classes.opt}>\n            <div className={classes.optItem}>\n              <Typography variant=\"body1\" gutterBottom>\n                Already a member?\n              </Typography>\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={() => setOpt('login')}\n              >\n                Sign In\n              </Button>\n            </div>\n            <div className={classes.optItem}>\n              <Typography variant=\"body1\" gutterBottom>\n                Want to become a member?\n              </Typography>\n              <Button color=\"secondary\" onClick={() => setOpt('register')}>\n                Register\n              </Button>\n            </div>\n            {/* <div className={classes.optItem}>\n              <Typography variant=\"body1\" gutterBottom>\n                ...or continue as a\n              </Typography>\n              <Button onClick={() => onCanContinue()}>Guest</Button>\n            </div> */}\n          </div>\n        )}\n\n        {opt === 'login' && <Login onLoginFn={onCanContinue} />}\n        {opt === 'register' && <Register onRegisterFn={onCanContinue} />}\n      </Paper>\n      <StepButtons\n        {...{ backDisabled, handleBack, nextDisabled, handleNext, nextText }}\n      />\n    </>\n  )\n}\n\nconst reviewStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    infoContainer: {\n      padding: theme.spacing(2),\n      height: '100%',\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n      '& .MuiFormHelperText-root': {\n        color: theme.palette.error.main,\n        textAlign: 'right'\n      }\n    }\n  })\n)\n\ninterface ReviewCartProps {\n  setCanGoToNextStep: React.Dispatch<React.SetStateAction<boolean>>\n  setOrder: React.Dispatch<React.SetStateAction<Order>>\n}\n\nfunction ReviewCart(\n  props: ReviewCartProps & StepButtonsProps & UserServiceProps\n) {\n  const classes = reviewStyles()\n  const cartResult = useCartService()\n  const {\n    setCanGoToNextStep,\n    backDisabled,\n    handleBack,\n    nextDisabled,\n    nextText,\n    setOrder,\n    userService\n  } = props\n\n  const [email, setEmail] = useState('')\n  const [phone, setPhone] = useState('')\n  const [name, setName] = useState('')\n  const [address, setAddress] = useState('')\n  const [notes, setNotes] = useState('')\n\n  useEffect(() => {\n    console.log('ReviewCart fx userService:', userService)\n    userService.user &&\n      userService.user.token &&\n      fetch(`${API_HOST}/member/me`, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${userService.user.token}`\n        }\n      })\n        .then(r => r.json())\n        .then(response => {\n          console.log('/member/me response', response)\n          const member = response.member\n          if (member) {\n            member.name && setName(member.name)\n            member.phone && setPhone(member.phone)\n            member.address && setAddress(member.address)\n          }\n          setEmail(\n            userService.user && userService.user.email\n              ? userService.user.email\n              : ''\n          )\n\n          setOrder(prevOrder => ({\n            ...prevOrder,\n            UserId:\n              userService.user && userService.user.id\n                ? userService.user.id\n                : undefined,\n            MemberId: member && member.id ? member.id : undefined\n          }))\n        })\n        .catch(err => console.warn('onoz /member/me caught err:', err))\n  }, [setOrder, userService])\n\n  useEffect(() => {\n    setCanGoToNextStep && setCanGoToNextStep(!!(email && phone && name))\n  }, [setCanGoToNextStep, email, phone, name])\n\n  function handleNext() {\n    const cartItems =\n      cartResult.status === 'loaded' && cartResult.payload.line_items\n        ? (cartResult.payload.line_items as OrderLineItem[])\n        : ([] as OrderLineItem[])\n\n    setOrder(order => ({\n      ...order,\n      email,\n      phone,\n      name,\n      address,\n      notes,\n      item_count: cartItems.length,\n      OrderLineItems: [\n        ...cartItems,\n        ...order.OrderLineItems.filter(li => li.kind !== 'product')\n      ]\n    }))\n    //\n\n    fetch(`${API_HOST}/store/validate_line_items`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(cartItems)\n    })\n      .then(r => r.json())\n      .then(response => {\n        console.log('validate response:', response)\n        if (!response.error) {\n          props.handleNext()\n        }\n        // #TOOOOODOOOO handle removing/updating invalid line items\n      })\n      .catch(err => console.warn('o noz! validation caight error:', err))\n  }\n\n  return (\n    <>\n      <Paper className={classes.infoContainer}>\n        <Grid container justify=\"center\" direction=\"row\" spacing={2}>\n          <Grid item xs={12} sm={4}>\n            <TextField\n              label=\"email\"\n              name=\"email\"\n              type=\"text\"\n              value={email}\n              onChange={(event: any) => setEmail(event.target.value)}\n              autoFocus\n              fullWidth\n              helperText=\"Required\"\n              required\n            />\n            <TextField\n              label=\"name\"\n              name=\"name\"\n              type=\"text\"\n              value={name}\n              onChange={(event: any) => setName(event.target.value)}\n              fullWidth\n              helperText=\"Required\"\n              required\n            />\n            <TextField\n              label=\"phone\"\n              name=\"phone\"\n              type=\"phone\"\n              value={phone}\n              onChange={(event: any) => setPhone(event.target.value)}\n              fullWidth\n              helperText=\"Required\"\n              required\n            />\n            <TextField\n              label=\"address\"\n              name=\"address\"\n              type=\"text\"\n              value={address}\n              onChange={(event: any) => setAddress(event.target.value)}\n              fullWidth\n            />\n            <TextField\n              label=\"notes\"\n              name=\"notes\"\n              type=\"text\"\n              value={notes}\n              onChange={(event: any) => setNotes(event.target.value)}\n              multiline\n              rowsMax=\"10\"\n              fullWidth\n            />\n          </Grid>\n          <Grid item xs={12} sm={8}>\n            {cartResult.status !== 'loaded' && 'Loading...'}\n            {cartResult.status === 'loaded' &&\n              cartResult.payload.line_items.length > 0 && (\n                <CartTable\n                  line_items={cartResult.payload.line_items}\n                  setOrder={setOrder}\n                  checkout\n                />\n              )}\n          </Grid>\n        </Grid>\n      </Paper>\n      <StepButtons\n        {...{ backDisabled, handleBack, nextDisabled, handleNext, nextText }}\n      />\n    </>\n  )\n}\n\nconst paymentStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    paymentContainer: {\n      height: '100%',\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center'\n    },\n    error: {\n      display: 'flex',\n      flexDirection: 'column',\n      textAlign: 'right',\n      padding: theme.spacing(2)\n    }\n  })\n)\n\nfunction Payment(\n  props: {\n    setCanGoToNextStep: React.Dispatch<React.SetStateAction<boolean>>\n    order: Order\n  } & StepButtonsProps\n) {\n  const classes = paymentStyles()\n  const cartResult = useCartService()\n  const {\n    setCanGoToNextStep,\n    backDisabled,\n    handleBack,\n    nextDisabled,\n    nextText,\n    order\n  } = props\n\n  const [error, setError] = useState('')\n\n  useEffect(() => {\n    setCanGoToNextStep(false)\n  }, [setCanGoToNextStep])\n\n  function handleNext() {\n    console.log('on handleNext should submit order:', order)\n    setError('')\n    fetch(`${API_HOST}/store/checkout`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(order)\n    })\n      .then(r => r.json())\n      .then(response => {\n        if (response.error) {\n          console.warn('/store/checkout ERROR response:', response)\n          setError(response.msg || 'onoz! could not submit your order ;(')\n        } else {\n          console.log('/store/checkout response ok:', response)\n          emptyCart()\n          props.handleNext()\n        }\n      })\n      .catch(err => {\n        console.warn('onoz! caught error /store/checkout err:', err)\n        setError('onoz! could not submit your order ;(')\n      })\n  }\n\n  return (\n    <>\n      <Paper>\n        <Grid container justify=\"center\" direction=\"row\">\n          <Grid item xs={12} sm={6}>\n            {cartResult.status !== 'loaded' && 'Loading...'}\n            {cartResult.status === 'loaded' &&\n              cartResult.payload.line_items.length > 0 && (\n                <CartTable\n                  line_items={cartResult.payload.line_items}\n                  checkout\n                  summary\n                />\n              )}\n          </Grid>\n          <Grid item xs={12} sm={6}>\n            <div className={classes.paymentContainer}>\n              <SquarePayment handleNext={handleNext} />\n            </div>\n          </Grid>\n          {error && (\n            <Grid item xs={12}>\n              <Box color=\"error.main\" className={classes.error}>\n                <Typography variant=\"overline\" display=\"block\">\n                  onoz! an error!\n                </Typography>\n                <Typography variant=\"body1\" display=\"block\" gutterBottom>\n                  {error}\n                </Typography>\n              </Box>\n            </Grid>\n          )}\n        </Grid>\n      </Paper>\n      <StepButtons\n        {...{ backDisabled, handleBack, nextDisabled, handleNext, nextText }}\n      />\n    </>\n  )\n}\n\nconst stepButtonsStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      display: 'flex',\n      justifyContent: 'flex-end',\n      marginTop: theme.spacing(2)\n    },\n    button: {\n      marginLeft: theme.spacing(2)\n    }\n  })\n)\n\ninterface StepButtonsProps {\n  backDisabled: boolean\n  handleBack: () => void\n  nextDisabled: boolean\n  handleNext: () => void\n  nextText: string\n}\n\nfunction StepButtons(props: StepButtonsProps) {\n  const classes = stepButtonsStyles()\n\n  const { backDisabled, handleBack, nextDisabled, handleNext, nextText } = props\n  return (\n    <div className={classes.root}>\n      <Button\n        disabled={backDisabled}\n        onClick={handleBack}\n        className={classes.button}\n      >\n        Back\n      </Button>\n\n      {nextText !== 'Finish' && (\n        <Button\n          disabled={nextDisabled}\n          variant=\"contained\"\n          color=\"primary\"\n          onClick={handleNext}\n          className={classes.button}\n        >\n          {nextText}\n        </Button>\n      )}\n    </div>\n  )\n}\n\nconst checkoutStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      width: '100%',\n      padding: theme.spacing(2)\n    },\n    instructions: {\n      marginTop: theme.spacing(2),\n      marginBottom: theme.spacing(2)\n    },\n    stepBtnz: {\n      display: 'flex',\n      justifyContent: 'flex-end',\n      marginTop: theme.spacing(2)\n    },\n    finished: {\n      minHeight: '300px',\n      width: '100%',\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center'\n    }\n  })\n)\n\nfunction getSteps() {\n  return ['Member Registration', 'Review Order', 'Payment']\n}\n\nfunction Checkout(props: UserServiceProps) {\n  const classes = checkoutStyles()\n  const { userService } = props\n\n  const [activeStep, setActiveStep] = useState(0)\n  const [canGoToNextStep, setCanGoToNextStep] = useState(false)\n  const [order, setOrder] = useState<Order>(BLANK_ORDER)\n\n  const steps = getSteps()\n\n  const handleNext = () => {\n    setActiveStep(prevActiveStep => prevActiveStep + 1)\n  }\n\n  const handleBack = () => {\n    setActiveStep(prevActiveStep => prevActiveStep - 1)\n  }\n\n  return (\n    <>\n      <NavBar showCart={false} />\n      <div className={classes.root}>\n        <Stepper activeStep={activeStep}>\n          {steps.map((label, index) => {\n            const stepProps: { completed?: boolean } = {}\n            const labelProps: { optional?: React.ReactNode } = {}\n            return (\n              <Step key={label} {...stepProps}>\n                <StepLabel {...labelProps}>{label}</StepLabel>\n              </Step>\n            )\n          })}\n        </Stepper>\n        <div>\n          {activeStep === steps.length ? (\n            <Paper className={classes.finished}>\n              <Typography className={classes.instructions}>\n                THANK YOU!\n              </Typography>\n            </Paper>\n          ) : (\n            <div>\n              {activeStep === 0 && (\n                <Registration\n                  handleNext={handleNext}\n                  setCanGoToNextStep={setCanGoToNextStep}\n                  backDisabled={true}\n                  handleBack={handleBack}\n                  nextDisabled={!canGoToNextStep || activeStep === 0}\n                  nextText={activeStep === steps.length - 1 ? 'Finish' : 'Next'}\n                  userService={userService}\n                />\n              )}\n              {activeStep === 1 && (\n                <ReviewCart\n                  setCanGoToNextStep={setCanGoToNextStep}\n                  backDisabled={true}\n                  handleBack={handleBack}\n                  nextDisabled={!canGoToNextStep}\n                  handleNext={handleNext}\n                  nextText={activeStep === steps.length - 1 ? 'Finish' : 'Next'}\n                  setOrder={setOrder}\n                  userService={userService}\n                />\n              )}\n              {activeStep === 2 && (\n                <Payment\n                  setCanGoToNextStep={setCanGoToNextStep}\n                  backDisabled={false}\n                  handleBack={handleBack}\n                  nextDisabled={!canGoToNextStep}\n                  handleNext={handleNext}\n                  nextText={activeStep === steps.length - 1 ? 'Finish' : 'Next'}\n                  order={order}\n                />\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n    </>\n  )\n}\n\nconst mapStateToProps = (states: RootState): UserServiceProps => {\n  return {\n    userService: states.session.userService\n  }\n}\n\nexport default connect(mapStateToProps)(Checkout)\n","import React, { useEffect } from 'react'\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom'\nimport { connect } from 'react-redux'\nimport { ThunkDispatch } from 'redux-thunk'\nimport CssBaseline from '@material-ui/core/CssBaseline'\nimport { ThemeProvider } from '@material-ui/core/styles'\n\nimport { darkTheme, lightTheme } from './theme'\nimport { RootState } from './redux'\n\nimport { UserServiceProps } from './redux/session/reducers'\nimport { checkSession } from './redux/session/actions'\n\nimport { PreferencesServiceProps } from './redux/preferences/reducers'\nimport { getPreferences } from './redux/preferences/actions'\n\nimport DataTable from './components/DataTable'\nimport Landing from './components/Landing'\nimport Checkout from './components/Checkout'\nimport Login from './components/Login'\nimport Register from './components/Register'\nimport NavBar from './components/NavBar'\n\ninterface DispatchProps {\n  checkSession: () => void\n  getPreferences: () => void\n}\n\nexport function App(\n  props: PreferencesServiceProps & UserServiceProps & DispatchProps\n) {\n  const { preferencesService, checkSession, getPreferences } = props\n\n  useEffect(() => {\n    getPreferences && getPreferences()\n  }, [getPreferences])\n\n  useEffect(() => {\n    checkSession && checkSession()\n  }, [checkSession])\n\n  const theme =\n    preferencesService &&\n    preferencesService.preferences &&\n    preferencesService.preferences.dark_mode === 'true'\n      ? darkTheme\n      : lightTheme\n  return (\n    <ThemeProvider theme={theme}>\n      <CssBaseline />\n      <Router>\n        <Switch>\n          <Route path=\"/checkout\" exact component={Checkout} />\n          <Route path=\"/products\" exact component={DataTable} />\n          <Route path=\"/products/:cat/\" exact component={DataTable} />\n          <Route path=\"/products/:cat/:subcat\" component={DataTable} />\n          <Route path=\"/login\" exact>\n            <>\n              <NavBar />\n              <Login showTitle />\n            </>\n          </Route>\n          <Route path=\"/register\" exact>\n            <>\n              <NavBar />\n              <Register showTitle />\n            </>\n          </Route>\n          <Route path=\"/\" component={Landing} />\n        </Switch>\n      </Router>\n    </ThemeProvider>\n  )\n}\n\nconst mapStateToProps = (\n  states: RootState\n): UserServiceProps & PreferencesServiceProps => {\n  return {\n    userService: states.session.userService,\n    preferencesService: states.preferences.preferencesService\n  }\n}\n\nconst mapDispatchToProps = (\n  dispatch: ThunkDispatch<{}, {}, any>\n): DispatchProps => {\n  return {\n    checkSession: () => dispatch(checkSession()),\n    getPreferences: () => dispatch(getPreferences())\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App)\n","import { combineReducers } from 'redux'\n\nimport { Action } from './actions'\nimport { User, LoginError } from '../../types/User'\n\nexport interface UserService {\n  isFetching: boolean\n  user?: User\n  error?: LoginError\n}\n\nexport interface UserServiceProps {\n  userService: UserService\n}\n\nconst userService = (\n  state: UserService = { isFetching: false },\n  action: Action\n): UserService => {\n  switch (action.type) {\n    case 'SET':\n      return { ...state, user: action.user, error: undefined }\n    case 'SET_FETCHING':\n      return {\n        ...state,\n        isFetching: action.isFetching\n      }\n    case 'SET_ERROR':\n      return { ...state, user: undefined, error: action.error }\n  }\n  return state\n}\n\nexport default combineReducers<UserServiceProps>({\n  userService\n})\n","import { combineReducers } from 'redux'\n\nimport { Action } from './actions'\nimport { Preferences, PreferencesError } from '../../types/Preferences'\n\nexport interface PreferencesService {\n  isFetching: boolean\n  preferences?: Preferences\n  error?: PreferencesError\n}\n\nexport interface PreferencesServiceProps {\n  preferencesService: PreferencesService\n}\n\nconst preferencesService = (\n  state: PreferencesService = { isFetching: false },\n  action: Action\n): PreferencesService => {\n  switch (action.type) {\n    case 'SET_PREFERENCES':\n      return { ...state, preferences: action.preferences, error: undefined }\n    case 'SET_FETCHING_PREFERENCES':\n      return {\n        ...state,\n        isFetching: action.isFetching\n      }\n    case 'SET_ERROR_PREFERENCES':\n      return { ...state, preferences: undefined, error: action.error }\n  }\n  return state\n}\n\nexport default combineReducers<PreferencesServiceProps>({\n  preferencesService\n})\n","import { createStore, combineReducers, applyMiddleware } from 'redux'\nimport thunk from 'redux-thunk'\nimport session, { UserServiceProps } from './session/reducers'\nimport preferences, { PreferencesServiceProps } from './preferences/reducers'\n\nexport interface RootState {\n  session: UserServiceProps\n  preferences: PreferencesServiceProps\n}\n\nexport default createStore(\n  combineReducers<RootState>({\n    session,\n    preferences\n  }),\n  applyMiddleware(thunk)\n)\n","import React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport { Provider } from 'react-redux'\n\nimport './index.css'\nimport App from './App'\n\nimport store from './redux'\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.querySelector('#root')\n)\n\n// import * as serviceWorker from './serviceWorker'\n// // If you want your app to work offline and load faster, you can change\n// // unregister() to register() below. Note this comes with some pitfalls.\n// // Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.unregister()\n"],"sourceRoot":""}